<!DOCTYPE html><html lang="zh-CN"><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><meta name="author" content="李金珂,jkli@thoughtworks.com"><title>前端世界中的动画 · 李金珂的小屋</title><meta name="description" content="前言16 年年底入坑前端，原因之一就是被网页中各种炫酷的动画震撼到了，想着我要是也能自己写出那些炫酷的动画就好了！当然动画看起来只是简单的平移旋转，放大缩小，其实知识点还是不少，今天闲来无事，就来回顾一下我在前端世界中接触到的那些动画。本人水平有限，本文参考了很多大神的文章，结合了自己一些见解，可能"><meta name="keywords" content="Javascript,Node.js"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-title" content="李金珂的小屋"><meta name="icon" content="/logos/logo_192.png"><meta name="apple-touch-icon" content="/logos/logo_192.png"><meta name="apple-touch-icon-precomposed" content="/logos/logo_192.png"><meta name="apple-touch-startup-image" content="/logos/logo_192.png"><meta name="Alipay:title" content="李金珂的小屋"><meta name="Alipay:imgUrl" content="/logos/logo_192.png"><meta name="Alipay:desc" content="要想学仙术哪能不吃苦"><meta name="renderer" content="webkit"><meta name="theme-color" content="#fff"><link rel="short icon" href="/logos/logo_192.png" type="image/x-icon"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/blog_basic.css"><link rel="stylesheet" href="/css/font-awesome.min.css"><link rel="alternate" type="application/atom+xml" title="ATOM 1.0" href="/atom.xml"><link rel="manifest" href="/manifest.json"><meta name="generator" content="Hexo 5.4.0"></head><body><div class="sidebar animated fadeInDown"><div class="logo-title"><div class="title"><img src="/images/my.jpeg" style="width:127px;border-radius:50%;margin-bottom:20px;"><h3 title=""><a href="/">李金珂的小屋</a></h3><div class="description"><p>要想学仙术,哪能不吃苦</p></div></div></div><ul class="social-links"><li><a target="_blank" rel="noopener" href="http://weibo.com/金珂珂珂珂"><i class="fa fa-weibo"></i></a></li><li><a target="_blank" rel="noopener" href="http://github.com/lijinke666"><i class="fa fa-github"></i></a></li></ul><div class="switch"><input type="checkbox" id="time"><label for="time">Night</label></div></div><div class="main"><div class="page-top animated fadeInDown"><div class="nav"><li><a href="/">主页</a></li><li><a href="/about">关于</a></li><li><a href="/archives">归档</a></li><li><a href="/links">友情链接</a></li></div><div class="information"><div class="back_btn"><li><a class="fa fa-chevron-left" onclick="window.history.go(-1)"> </a></li></div><div class="avatar"><img src="/images/my.jpeg"></div></div></div><div class="autopagerize_page_element"><div class="content"><div class="post-page"><div class="post animated fadeInDown"><div class="post-title"><h3><a>前端世界中的动画</a></h3></div><div class="post-content"><h3 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h3><p>16 年年底入坑前端，原因之一就是被网页中各种炫酷的动画震撼到了，想着我要是也能自己写出那些炫酷的动画就好了！当然动画看起来只是简单的平移旋转，放大缩小，其实知识点还是不少，今天闲来无事，就来回顾一下我在前端世界中接触到的那些动画。本人水平有限，本文参考了很多大神的文章，结合了自己一些见解，可能会有一些错误的表述，欢迎指正！</p>
<h3 id="浏览器架构"><a href="#浏览器架构" class="headerlink" title="浏览器架构"></a>浏览器架构</h3><p>对于前端动画，浏览器基本是我们的唯一舞台，自然需要了解一下相关基础知识：</p>
<p>首先浏览器是一个多线程多进程的架构，</p>
<p>线程：</p>
<ul>
<li><code>JS 引擎线程</code>: 调用 V8 处理 js 相关脚本</li>
<li><code>GUI 线程</code>: 负责解析网页，处理 HTML, CSS, 计算 dom 元素的样式和位置，最后渲染出来</li>
</ul>
<p>进程：</p>
<ul>
<li><code>Browser process</code>: 负责协调其他线程，可以当做 <code>React</code> 的 <code>Root</code> 组件，</li>
</ul>
<p><img src="https://cdn.lijinke.cn/2020-08-12-21-27-13-2020812212713.png" alt="2020-08-12-21-27-13-2020812212713"></p>
<p>主要负责地址栏，书签栏，前进后退按钮，网络请求等通用部分的工作</p>
<ul>
<li><code>Renderer Process</code> : 一个 tab 内的网页渲染，打开一个 tab 就新开一个子进程，超过一定的数量就会合并，从这里可以看出，为啥开很多个 tab 页，会很卡，因为占了很多的内存，当然有 类似 <code>One Tab</code> 的这种插件帮你优化</li>
<li><code>GPU Process</code> : 负责 3D 绘制，对，我们常说的 <code>transform GPU 加速</code> 就是它的工作</li>
</ul>
<p>我们可以点击浏览器右上角 <code>三个点</code> -&gt; <code>更多工具</code> -&gt; <code>任务管理器</code> 可以看到浏览器的一个进程情况</p>
<p><img src="https://cdn.lijinke.cn/2020-08-12-21-39-33-2020812213933.png" alt="2020-08-12-21-39-33-2020812213933"></p>
<p>这里只做一个引入，详细的知识可以看 <a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/47407398">这篇文章</a>, 写的非常好。对于本文，我们需要了解</p>
<p><code>GUI 线程</code> 和 <code>GPU 进程</code> 这两个</p>
<h3 id="网页渲染"><a href="#网页渲染" class="headerlink" title="网页渲染"></a>网页渲染</h3><p>一个网页，由三剑客 (html + css + js) 组成</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="css"></span></span><br><span class="line"><span class="css">    <span class="selector-tag">div</span> &#123;</span></span><br><span class="line"><span class="css">      <span class="attribute">color</span>: red;</span></span><br><span class="line"><span class="css">    &#125;</span></span><br><span class="line"><span class="css">  </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span>&gt;</span>skr<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>浏览器在拿到 DOM 结构后，会分成若干个图层，根据编写的 css:</p>
<ul>
<li>绘制颜色，边框，颜色，大小等，这个叫 <code>重绘 (repaint)</code></li>
<li>计算每个图层节点的样式，生成对应的位置，这个叫 <code>重排 (reflow)</code></li>
<li>所以图层完事之后，浏览器会交给 <code>GPU 进程</code> 合并所有图层，最终显示在页面上</li>
</ul>
<p>重绘和重排会涉及到重新计算，相对来说很耗费浏览器性能，在手机上更明显，这里就引出了第一个前端动画需要注意的点，动画无非就是对 DOM 进行 缩放，平移，放大 等操作，这些理论上会触发重绘和重排，会造成卡顿，所以想让动画很流畅，我们要使用 不影响文档流，不造成重绘重排的属性，也就是 <code>transform3d</code> 和 <code>will-change</code> 属性，使用了这两个属性，可以让当前 dom 生成一个独立的图层，从而不影响其他图层，同时触发 <code>GPU 加速</code>.</p>
<h3 id="过渡效果"><a href="#过渡效果" class="headerlink" title="过渡效果"></a>过渡效果</h3><p>一个状态到另一个状态，比如将元素位置向右移动 20px, 如果没有过渡效果，立即生效，这样是没有动画效果的，iOS 系统之所有流畅，不 “卡”, 除了强大的处理器之外，还有一个很重要的原因就是动画，动画自然且舒服，给人一种很流畅的感觉，所以一个合理的过渡效果很重要，在 <code>CSS3</code>, 我们通过 <code>transition</code> 属性 指定元素的过渡效果，</p>
<p><code>CSS3</code> 内置了几种过渡效果：</p>
<p><img src="https://cdn.lijinke.cn/2020-08-14-15-12-59-202081415130.png" alt="2020-08-14-15-12-59-202081415130"></p>
<p>那么如果不想用内置的，想自定义一下，比如想模拟物体撞击反弹，这时候就需要用到 <a target="_blank" rel="noopener" href="https://baike.baidu.com/item/%E8%B4%9D%E5%A1%9E%E5%B0%94%E6%9B%B2%E7%BA%BF">贝赛尔曲线</a>,</p>
<p>贝塞尔曲线有四个任意点构成一条曲线，<code>CSS3</code> 的表示如下：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">transition</span>: all <span class="number">0.3s</span> <span class="built_in">cubic-bezier</span>(<span class="number">0</span>, <span class="number">0.66</span>, <span class="number">0.31</span>, <span class="number">1.18</span>);</span><br></pre></td></tr></table></figure>

<p>对应的效果如下</p>
<p><img src="https://cdn.lijinke.cn/2020-08-14%2015.17.44.gif" alt="gif"></p>
<p>当然，可以看到我这里的自定义贝塞尔曲线有点不自然，我们使用过渡效果应该考虑现实世界中真实物体的运动规律，不然就会很鬼畜。</p>
<h3 id="动画的不同种类"><a href="#动画的不同种类" class="headerlink" title="动画的不同种类"></a>动画的不同种类</h3><p>讲到这，好像才点题了，没办法，说一下相应的知识点便于我们更好的理解，这里我结合实际例子，结合我看到的网上各路大神的文章，讲解下不同的动画种类的应用，不讲解太详细的代码，讲一下大致的思路</p>
<h4 id="平移动画-（轮播图）"><a href="#平移动画-（轮播图）" class="headerlink" title="平移动画 （轮播图）"></a>平移动画 （轮播图）</h4><p>平移大概有三种方式</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">margin-left</span>: <span class="number">10px</span>;</span><br></pre></td></tr></table></figure>

<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">position</span>: absolute;</span><br><span class="line"><span class="attribute">left</span>: <span class="number">10px</span>;</span><br></pre></td></tr></table></figure>

<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">transform</span>: <span class="built_in">translateY</span>(<span class="number">10px</span>);</span><br></pre></td></tr></table></figure>

<p>上面三种代码都是往右平移 10px, 但是前两种会触发重排，性能没有第三种好，所以第三种，也是主流的一种平移方式，当然，想让元素有动画的效果，还需要加上 <code>transition</code>, 告诉元素的过渡时间，这个基本接触过前端的都知道</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">transform</span>: <span class="built_in">translateY</span>(<span class="number">10px</span>);</span><br><span class="line"><span class="attribute">transition</span>: transform <span class="number">0.3s</span>;</span><br></pre></td></tr></table></figure>

<p>我们还可以改写成这样，触发 <code>GPU</code> 3d 加速</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">transform</span>: <span class="built_in">translate3d</span>(<span class="number">10px</span>, <span class="number">0</span>, <span class="number">0</span>);</span><br><span class="line"><span class="attribute">transition</span>: transform <span class="number">0.3s</span>;</span><br></pre></td></tr></table></figure>

<p>而轮播图的原理就是将所有元素并排在一起，依次向左或向右平移</p>
<p><img src="https://cdn.lijinke.cn/2020-08-12-22-38-07-202081222387.png" alt="2020-08-12-22-38-07-202081222387"></p>
<p><img src="https://cdn.lijinke.cn/2020-08-12%2022.35.30.gif" alt="gif"></p>
<h4 id="缩放动画-（封面图）"><a href="#缩放动画-（封面图）" class="headerlink" title="缩放动画 （封面图）"></a>缩放动画 （封面图）</h4><p>缩放大概有两种方式</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">width</span>: <span class="number">150%</span>;</span><br><span class="line"><span class="attribute">height</span>: <span class="number">150%</span>;</span><br></pre></td></tr></table></figure>

<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">transform</span>: <span class="built_in">scale</span>(<span class="number">1.5</span>);</span><br></pre></td></tr></table></figure>

<p>同理，第一种也会触发重排，所以我们通常使用第二种 <code>transform</code> 的方式</p>
<p><img src="https://cdn.lijinke.cn/2020-08-12%2022.46.21.gif" alt="gif"></p>
<p><img src="https://cdn.lijinke.cn/2020-08-12%2022.53.47.gif" alt="gif"></p>
<h4 id="旋转动画-（音乐播放器专辑封面）"><a href="#旋转动画-（音乐播放器专辑封面）" class="headerlink" title="旋转动画 （音乐播放器专辑封面）"></a>旋转动画 （音乐播放器专辑封面）</h4><p>旋转我们可以指定按照水平还是 X,Y 轴旋转，比较简单，没啥好说的</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">transform</span>: <span class="built_in">rotate</span>(<span class="number">20deg</span>);</span><br><span class="line"><span class="attribute">transform</span>: <span class="built_in">rotateX</span>(<span class="number">20deg</span>);</span><br><span class="line"><span class="attribute">transform</span>: <span class="built_in">rotateY</span>(<span class="number">20deg</span>);</span><br></pre></td></tr></table></figure>

<p>旋转动画比较常见的是在 Web 端的音乐播放器，有一个一直旋转的封面图，另一个场景也比较常见，就是 loading 加载中，原理都一样，<code>rotate</code> 转就完事了</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">@keyframes</span> rotate &#123;</span><br><span class="line">  <span class="selector-tag">from</span> &#123;</span><br><span class="line">    <span class="attribute">transform</span>: <span class="built_in">rotate</span>(<span class="number">0deg</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="selector-tag">to</span> &#123;</span><br><span class="line">    <span class="attribute">transform</span>: <span class="built_in">rotate</span>(<span class="number">360deg</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.cover</span> &#123;</span><br><span class="line">  <span class="attribute">animation</span>: rotate <span class="number">30s</span> linear infinite;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="https://cdn.lijinke.cn/2020-08-13%2012.18.55.gif" alt="gif"></p>
<h4 id="自定义组合动画"><a href="#自定义组合动画" class="headerlink" title="自定义组合动画"></a>自定义组合动画</h4><p>自定义动画我们使用 <code>CSS3</code> 的 <code>animation</code> 或者 <code>js</code> 的 <code>animate</code> api, 这里我们以 <code>CSS3</code> 的 <code>animation</code> 为例，文字从屏幕右边飞过来，并且放大，</p>
<p>首先使用 <code>@keyframes</code> 声明动画的执行规则，然后 使用 <code>animation: [animateName]</code> 执行动画</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">@keyframes</span> test &#123;</span><br><span class="line">  <span class="number">0%</span> &#123;</span><br><span class="line">    <span class="attribute">transform</span>: <span class="built_in">translateX</span>(<span class="number">2000px</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="number">50%</span> &#123;</span><br><span class="line">    <span class="attribute">transform</span>: <span class="built_in">translateX</span>(<span class="number">0</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="number">100%</span> &#123;</span><br><span class="line">    <span class="attribute">transform</span>: <span class="built_in">scale</span>(<span class="number">1.2</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">div</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">100px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">100px</span>;</span><br><span class="line">  <span class="attribute">animation</span>: test <span class="number">2s</span> forwards;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="https://cdn.lijinke.cn/2020-08-12%2023.01.48.gif" alt="gif"></p>
<h4 id="渐变动画-（按钮点击水波效果）"><a href="#渐变动画-（按钮点击水波效果）" class="headerlink" title="渐变动画 （按钮点击水波效果）"></a>渐变动画 （按钮点击水波效果）</h4><p><code>CSS3</code> 中常见的渐变 (Gradients) 有两种</p>
<ul>
<li>线性渐变（Linear Gradients）- 向下/向上/向左/向右/对角方向</li>
<li>径向渐变（Radial Gradients）- 由它们的中心定义</li>
</ul>
<p>线性渐变比较常见的应用之一就是进度条</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">background</span>: <span class="built_in">repeating-linear-gradient</span>(</span><br><span class="line">  -<span class="number">45deg</span>,</span><br><span class="line">  <span class="number">#fafafa</span> <span class="number">25%</span>,</span><br><span class="line">  <span class="number">#31c27c</span> <span class="number">0</span>,</span><br><span class="line">  <span class="number">#31c27c</span> <span class="number">50%</span>,</span><br><span class="line">  <span class="number">#fafafa</span> <span class="number">0</span>,</span><br><span class="line">  <span class="number">#fafafa</span> <span class="number">75%</span>,</span><br><span class="line">  <span class="number">#31c27c</span> <span class="number">0</span></span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<p><img src="https://cdn.lijinke.cn/2020-08-12-23-14-36-2020812231436.png" alt="2020-08-12-23-14-36-2020812231436"></p>
<p>径向渐变一个 <a target="_blank" rel="noopener" href="https://www.zhangxinxu.com/wordpress/2020/07/css-var-improve-components/">比较炫酷的例子</a>, 在很多组件库会见到，鼠标点击按钮时，会有水波一样的效果，核心代码如下</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">position</span>: absolute;</span><br><span class="line"><span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line"><span class="attribute">height</span>: <span class="number">100%</span>;</span><br><span class="line"><span class="attribute">left</span>: <span class="built_in">var</span>(--x, <span class="number">0</span>);</span><br><span class="line"><span class="attribute">top</span>: <span class="built_in">var</span>(--y, <span class="number">0</span>);</span><br><span class="line"><span class="attribute">background</span>: <span class="built_in">radial-gradient</span>(circle, <span class="number">#fff</span>, <span class="number">10%</span>, transparent <span class="number">10.1%</span>) no-repeat <span class="number">50%</span>;</span><br><span class="line"><span class="attribute">transform</span>: <span class="built_in">translate</span>(-<span class="number">50%</span>, -<span class="number">50%</span>) <span class="built_in">scale</span>(<span class="number">10</span>);</span><br></pre></td></tr></table></figure>

<p><img src="https://cdn.lijinke.cn/2020-08-12%2023.16.46.gif" alt="gif"></p>
<p>具体细节可以查看张鑫旭大神的文章：</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://www.zhangxinxu.com/wordpress/2017/11/css3-radial-gradient-syntax-example/">10 个 demo 示例学会 CSS3 radial-gradient 径向渐变</a></li>
<li><a target="_blank" rel="noopener" href="https://www.zhangxinxu.com/wordpress/2020/07/css-var-improve-components/">CSS 变量对 JS 交互组件开发带来的提升与变革</a></li>
</ul>
<h4 id="滤镜动画-（霓虹灯）"><a href="#滤镜动画-（霓虹灯）" class="headerlink" title="滤镜动画 （霓虹灯）"></a>滤镜动画 （霓虹灯）</h4><p>现在的相机都提供了很多花哨的滤镜，<code>CSS3</code> 也不例外，我们通过 <code>filter: [value]</code> 指定滤镜，场景的滤镜有：</p>
<blockquote>
<p><a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/CSS/filter">https://developer.mozilla.org/zh-CN/docs/Web/CSS/filter</a></p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">filter: blur(5px);  <span class="comment">// 高斯模糊</span></span><br><span class="line">filter: brightness(<span class="number">0.4</span>); <span class="comment">// 亮度</span></span><br><span class="line">filter: contrast(<span class="number">200</span>%); <span class="comment">// 对比度</span></span><br><span class="line">filter: drop-shadow(16px 16px 20px blue); <span class="comment">// 投影</span></span><br><span class="line">filter: grayscale(<span class="number">50</span>%); <span class="comment">// 灰度</span></span><br><span class="line">filter: hue-rotate(90deg); <span class="comment">// 色调</span></span><br><span class="line">filter: invert(<span class="number">75</span>%); <span class="comment">// 反相</span></span><br><span class="line">filter: opacity(<span class="number">25</span>%); <span class="comment">// 透明度</span></span><br><span class="line">filter: saturate(<span class="number">30</span>%); <span class="comment">// 饱和度</span></span><br><span class="line">filter: sepia(<span class="number">60</span>%); <span class="comment">// 褐色</span></span><br></pre></td></tr></table></figure>

<p>如果只想改变元素的背景区域，可以使用 <a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/CSS/backdrop-filter">backdrop-filter</a>, 属性值一样</p>
<p>比较常见的是 <code>blur</code> 和 <code>grayscale</code>, 前者可以用来做 <code>IOS</code> 的 <code>毛玻璃</code> 效果，当然，<code>backdrop-filter</code> 也是可以的</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.mask</span> &#123;</span><br><span class="line">  backdrop-<span class="attribute">filter</span>: <span class="built_in">blur</span>(<span class="number">5px</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="https://cdn.lijinke.cn/2020-08-13-11-35-59-202081311360.png" alt="2020-08-13-11-35-59-202081311360"></p>
<p><code>grayscale</code> 最典型的例子就是最近的疫情，国家哀悼日，很多网站你会发现都变灰了，其实用的就是这个属性</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">html</span> &#123;</span><br><span class="line">  <span class="attribute">filter</span>: <span class="built_in">grayscale</span>(<span class="number">100%</span>);</span><br><span class="line">  <span class="attribute">transition</span>: <span class="number">1s</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="https://cdn.lijinke.cn/2020-08-13%2011.38.29.gif" alt="gif"></p>
<p>可以看到，结合 <code>transition</code>, 我们可以在动态改变 <code>filter</code> 滤镜值的时候，让它有过渡效果，从而实现动画。</p>
<p>另外再张鑫旭大神的博客中还看到个 <a target="_blank" rel="noopener" href="https://www.zhangxinxu.com/study/201904/css-filter-blend/color-flow.php">好玩的动画</a>, 结合 <code>hue-rotate</code> 滤镜 和 <code>linear-gradient</code> 线性渐变 实现了炫酷的霓虹灯动画</p>
<p>一段普通的文本</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>李金珂 666<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>加上一段普通的样式</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">h1</span> &#123;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">100px</span>;</span><br><span class="line">  <span class="attribute">background-image</span>: <span class="built_in">linear-gradient</span>(</span><br><span class="line">    to right,</span><br><span class="line">    red,</span><br><span class="line">    yellow,</span><br><span class="line">    lime,</span><br><span class="line">    aqua,</span><br><span class="line">    blue,</span><br><span class="line">    fuchsia</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>一个杀马特风格的文本就出来了</p>
<p><img src="https://cdn.lijinke.cn/2020-08-13-11-47-57-2020813114758.png" alt="2020-08-13-11-47-57-2020813114758"></p>
<p>接着配合</p>
<ul>
<li><code>hue-rotate</code> 改变文本的色相</li>
<li><code>-webkit-background-clip: text</code> 裁减掉背景，就像 PS 的魔棒一样，保留文字</li>
<li><code>-webkit-text-fill-color: transparent</code> 让文本变镂空，这样就能看到文字背后的彩色背景</li>
</ul>
<p>一个酷炫的霓虹灯动画就完成了</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">@keyframes</span> hue &#123;</span><br><span class="line">  <span class="selector-tag">from</span> &#123;</span><br><span class="line">    <span class="attribute">filter</span>: <span class="built_in">hue-rotate</span>(<span class="number">0deg</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="selector-tag">to</span> &#123;</span><br><span class="line">    <span class="attribute">filter</span>: <span class="built_in">hue-rotate</span>(<span class="number">360deg</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">h1</span> &#123;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">100px</span>;</span><br><span class="line">  -webkit-<span class="attribute">background-clip</span>: text;</span><br><span class="line">  -webkit-text-fill-<span class="attribute">color</span>: transparent;</span><br><span class="line">  <span class="attribute">background-image</span>: <span class="built_in">linear-gradient</span>(</span><br><span class="line">    to right,</span><br><span class="line">    red,</span><br><span class="line">    yellow,</span><br><span class="line">    lime,</span><br><span class="line">    aqua,</span><br><span class="line">    blue,</span><br><span class="line">    fuchsia</span><br><span class="line">  );</span><br><span class="line">  <span class="attribute">animation</span>: hue <span class="number">3s</span> linear infinite;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="https://cdn.lijinke.cn/2020-08-13%2011.56.34.gif" alt="gif"></p>
<p>不同的滤镜组合还能实现各种酷炫的效果，更多例子可以点击 <a target="_blank" rel="noopener" href="https://www.zhangxinxu.com/study/201904/css-filter-blend/">这里</a></p>
<h4 id="SVG-动画-（文字描边）"><a href="#SVG-动画-（文字描边）" class="headerlink" title="SVG 动画 （文字描边）"></a>SVG 动画 （文字描边）</h4><p>其实 <code>SVG</code> 是很复杂且强大的一个东西，我自己也只掌握到了一点皮毛，相信大家接触 <code>SVG</code> 还是因为字体图标，<code>iconfont</code>, 写页面的时候，会用到，要么是设计师给你切好了 <code>SVG</code> 的图片，要么是去网上找，当做字体库引进来，</p>
<p>下面这段代码</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">svg</span></span></span><br><span class="line"><span class="tag">  <span class="attr">xmlns</span>=<span class="string">&quot;http://www.w3.org/2000/svg&quot;</span></span></span><br><span class="line"><span class="tag">  <span class="attr">width</span>=<span class="string">&quot;39&quot;</span></span></span><br><span class="line"><span class="tag">  <span class="attr">height</span>=<span class="string">&quot;37&quot;</span></span></span><br><span class="line"><span class="tag">  <span class="attr">viewBox</span>=<span class="string">&quot;0 0 39 37&quot;</span></span></span><br><span class="line"><span class="tag">&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">g</span> <span class="attr">fill</span>=<span class="string">&quot;none&quot;</span> <span class="attr">fill-rule</span>=<span class="string">&quot;evenodd&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">path</span> <span class="attr">d</span>=<span class="string">&quot;M0 0L44 0 44 44 0 44z&quot;</span> <span class="attr">transform</span>=<span class="string">&quot;translate(-4 -3)&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">path</span></span></span><br><span class="line"><span class="tag">      <span class="attr">fill</span>=<span class="string">&quot;#E1E2E3&quot;</span></span></span><br><span class="line"><span class="tag">      <span class="attr">d</span>=<span class="string">&quot;M39.226 27.5v10.665C39.225 39.179 38.355 40 37.283 40H5.943c-.519-.003-1.015-.202-1.38-.551-.364-.35-.567-.821-.563-1.312V15.95h11.742c1.08 0 1.957-.828 1.957-1.85V3h19.574c1.078 0 1.953.842 1.953 1.835V11.8L21.615 28.45l-.012 7.84 8.31.012 9.313-8.802zm1.065-11.741L43 18.31 28.1 32.345l-2.713-.004.004-2.548 14.9-14.034zM4 11.93L14.065 3v8.931H4z&quot;</span></span></span><br><span class="line"><span class="tag">      <span class="attr">transform</span>=<span class="string">&quot;translate(-4 -3)&quot;</span></span></span><br><span class="line"><span class="tag">    /&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">g</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">svg</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>对应的图标长这样</p>
<p><img src="https://cdn.lijinke.cn/2020-08-14-10-45-42-2020814104542.png" alt="2020-08-14-10-45-42-2020814104542"></p>
<p>当然，这是设计师用工具生成的 <code>SVG</code> 代码，我发现身边很多开发也不懂这些代码具体的意思，<code>SVG</code> 是可缩放的矢量图形，可以很灵活的改变大小，形状，还可以添加滤镜，内置的图形有：</p>
<blockquote>
<p><a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/SVG/Tutorial/Basic_Shapes">https://developer.mozilla.org/zh-CN/docs/Web/SVG/Tutorial/Basic_Shapes</a></p>
</blockquote>
<ul>
<li><code>rect</code> 矩形</li>
<li><code>circle</code> 圆形</li>
<li><code>ellipse</code> 椭圆</li>
<li><code>line</code> 线</li>
<li><code>polyline</code> 多边形</li>
<li><code>path</code> 路径</li>
</ul>
<p>其实 <code>path</code> 是最有东西的，可以绘制任意的形状，所以字体图标生成之类的工具，就是对 path 的 编辑，从而生成自定义的形状，</p>
<p>其中 <code>d</code> 属性，用来描述具体的路径，<code>fill</code> 就相当于 <code>background-color</code> , <code>stroke</code> 表示绘制颜色，<code>stroke-width</code> 表示 绘制粗细，想象一下就好比你用一支铅笔，在绘制你自己的图形，</p>
<p>然后我们看到上面示例中有很多神秘代码：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">d=<span class="string">&quot;M39.226 27.5v10.665C39.225 39.179 38.355...</span></span><br></pre></td></tr></table></figure>

<p>其中大写字母代表 <code>绝对定位</code>, 小写字母代表 <code>相对定位</code>, 可以理解成一个指令，每个指令具体的含义如下</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">M = moveto 移动到</span><br><span class="line">L = lineto 连接一根线到</span><br><span class="line">H = horizontal lineto  水平连线</span><br><span class="line">V = vertical lineto    垂直连线</span><br><span class="line">C = curveto</span><br><span class="line">S = smooth curveto</span><br><span class="line">Q = quadratic Belzier curve</span><br><span class="line">T = smooth quadratic Belzier curveto</span><br><span class="line">A = elliptical Arc     椭圆的线 贝塞尔曲线</span><br><span class="line">Z = closepath          结束当前路径</span><br></pre></td></tr></table></figure>

<p>每个指令具体的应用可以查看 <a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/SVG/Tutorial/Paths">这篇文章</a></p>
<p>现在我们就使用 <code>path</code> 写三个字，做一个描边的动画</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line">&lt;svg&gt;</span><br><span class="line">  <span class="xml"><span class="tag">&lt;<span class="name">path</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">    <span class="attr">d</span>=<span class="string">&quot;</span></span></span></span><br><span class="line"><span class="string"><span class="tag"><span class="xml">      M50 50</span></span></span></span><br><span class="line"><span class="string"><span class="tag"><span class="xml">      L120 50</span></span></span></span><br><span class="line"><span class="string"><span class="tag"><span class="xml">      A15 2 0 1 0 110 30</span></span></span></span><br><span class="line"><span class="string"><span class="tag"><span class="xml">      L105 100</span></span></span></span><br><span class="line"><span class="string"><span class="tag"><span class="xml">      v -50</span></span></span></span><br><span class="line"><span class="string"><span class="tag"><span class="xml">      L 70 85</span></span></span></span><br><span class="line"><span class="string"><span class="tag"><span class="xml">      L141 70</span></span></span></span><br><span class="line"><span class="string"><span class="tag"><span class="xml">      L104 120</span></span></span></span><br><span class="line"><span class="string"><span class="tag"><span class="xml">      v 100</span></span></span></span><br><span class="line"><span class="string"><span class="tag"><span class="xml">      A 1 2 0 0 1 69 204</span></span></span></span><br><span class="line"><span class="string"><span class="tag"><span class="xml">      L31 167</span></span></span></span><br><span class="line"><span class="string"><span class="tag"><span class="xml">      L196 127&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">  /&gt;</span></span></span><br><span class="line">  <span class="xml"><span class="tag">&lt;<span class="name">path</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">    <span class="attr">d</span>=<span class="string">&quot;</span></span></span></span><br><span class="line"><span class="string"><span class="tag"><span class="xml">      M500 50</span></span></span></span><br><span class="line"><span class="string"><span class="tag"><span class="xml">      L 410 136</span></span></span></span><br><span class="line"><span class="string"><span class="tag"><span class="xml">      M457 89</span></span></span></span><br><span class="line"><span class="string"><span class="tag"><span class="xml">      L 610 136</span></span></span></span><br><span class="line"><span class="string"><span class="tag"><span class="xml">      M 445 155</span></span></span></span><br><span class="line"><span class="string"><span class="tag"><span class="xml">      h 70</span></span></span></span><br><span class="line"><span class="string"><span class="tag"><span class="xml">      M 445 175</span></span></span></span><br><span class="line"><span class="string"><span class="tag"><span class="xml">      h 70</span></span></span></span><br><span class="line"><span class="string"><span class="tag"><span class="xml">      M 475 155</span></span></span></span><br><span class="line"><span class="string"><span class="tag"><span class="xml">      v 90</span></span></span></span><br><span class="line"><span class="string"><span class="tag"><span class="xml">      M 457 232</span></span></span></span><br><span class="line"><span class="string"><span class="tag"><span class="xml">      L 428 213</span></span></span></span><br><span class="line"><span class="string"><span class="tag"><span class="xml">      M 520 232</span></span></span></span><br><span class="line"><span class="string"><span class="tag"><span class="xml">      L 538 213</span></span></span></span><br><span class="line"><span class="string"><span class="tag"><span class="xml">      M 405 245</span></span></span></span><br><span class="line"><span class="string"><span class="tag"><span class="xml">      h 140&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">  /&gt;</span></span></span><br><span class="line">  <span class="xml"><span class="tag">&lt;<span class="name">path</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">    <span class="attr">d</span>=<span class="string">&quot;</span></span></span></span><br><span class="line"><span class="string"><span class="tag"><span class="xml">      M780 50</span></span></span></span><br><span class="line"><span class="string"><span class="tag"><span class="xml">      h 90</span></span></span></span><br><span class="line"><span class="string"><span class="tag"><span class="xml">      h -45</span></span></span></span><br><span class="line"><span class="string"><span class="tag"><span class="xml">      v 70</span></span></span></span><br><span class="line"><span class="string"><span class="tag"><span class="xml">      h -50</span></span></span></span><br><span class="line"><span class="string"><span class="tag"><span class="xml">      h 100</span></span></span></span><br><span class="line"><span class="string"><span class="tag"><span class="xml">      h -50</span></span></span></span><br><span class="line"><span class="string"><span class="tag"><span class="xml">      v 80</span></span></span></span><br><span class="line"><span class="string"><span class="tag"><span class="xml">      L 740 233</span></span></span></span><br><span class="line"><span class="string"><span class="tag"><span class="xml">      L 932 157</span></span></span></span><br><span class="line"><span class="string"><span class="tag"><span class="xml">      A 4 3 0 0 1 1036 96</span></span></span></span><br><span class="line"><span class="string"><span class="tag"><span class="xml">      L 980 130</span></span></span></span><br><span class="line"><span class="string"><span class="tag"><span class="xml">      v 30</span></span></span></span><br><span class="line"><span class="string"><span class="tag"><span class="xml">      h 30</span></span></span></span><br><span class="line"><span class="string"><span class="tag"><span class="xml">      v -25</span></span></span></span><br><span class="line"><span class="string"><span class="tag"><span class="xml">      h -30</span></span></span></span><br><span class="line"><span class="string"><span class="tag"><span class="xml">      h 30</span></span></span></span><br><span class="line"><span class="string"><span class="tag"><span class="xml">      v 150</span></span></span></span><br><span class="line"><span class="string"><span class="tag"><span class="xml">      L 945 222&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">  /&gt;</span></span></span><br><span class="line">&lt;/svg&gt;</span><br></pre></td></tr></table></figure>

<p><img src="https://cdn.lijinke.cn/2020-08-14-11-48-23-2020814114824.png" alt="2020-08-14-11-48-23-2020814114824"></p>
<p>三个炫酷的大字映入眼帘，这就是 <code>SVG</code> 的强大，现在我们让他动起来，实现一个描边动画，要实现描边动画，需要用到两个关键属性</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">stroke-dasharray：定义描边的虚线长度，如果提供奇数个，则会自动复制该值成偶数</span><br><span class="line">stroke-dashoffset：定义虚线描边的偏移量（在路径开始的前面，看不到）</span><br></pre></td></tr></table></figure>

<p>将这两个 值 设置为一样的值，且相对大一点，这时你会发现刚才辛辛苦苦写的字看不见了</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">stroke-dashoffset: <span class="number">2000</span>;</span><br><span class="line">stroke-dasharray: <span class="number">2000</span>;</span><br></pre></td></tr></table></figure>

<p>最后我们让 他的 <code>dashoffset</code> 从 <code>2000</code> 回到 <code>0</code>, 这样看起来就是一个描边的效果</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">path &#123;</span><br><span class="line">  stroke-<span class="attribute">width</span>: <span class="number">3px</span>;</span><br><span class="line">  stroke-linecap: round;</span><br><span class="line">  fill: none;</span><br><span class="line">  stroke-dashoffset: <span class="number">2000</span>;</span><br><span class="line">  stroke-dasharray: <span class="number">2000</span>;</span><br><span class="line">  <span class="attribute">animation</span>: path <span class="number">10s</span> linear forwards;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">@keyframes</span> path &#123;</span><br><span class="line">  <span class="selector-tag">to</span> &#123;</span><br><span class="line">    stroke-dashoffset: <span class="number">0</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="https://cdn.lijinke.cn/2020-08-14%2011.53.34.gif" alt="gif"></p>
<h4 id="Canvas-动画-（帧动画）"><a href="#Canvas-动画-（帧动画）" class="headerlink" title="Canvas 动画 （帧动画）"></a>Canvas 动画 （帧动画）</h4><p><code>canvas</code> 不用多说，不会还有前端不知道 <code>canvas</code> 吧 ? 不会吧不会吧！</p>
<p>canvas 就是一个画布，我们在上面绘制各种图形和动画，默认支持 <code>GPU</code> 的加速，性能比较好，有 <code>2d context</code> 和 <code>3d context (WebGL)</code>, 作为一个带专生，<code>WebGL</code> 需要一些数学功底，我没怎么接触过所以就不展开说明了，这里主要说明下 2d 的 canvas.</p>
<p>众所周知，动画片的原理就是有一组连续播放的静态图片组成，每一张图片，我们叫做一帧，把每一帧快速播放，人眼会产生视觉暂留，从而形成 “动画”</p>
<p><img src="https://cdn.lijinke.cn/2020-08-14-12-10-41-2020814121042.png" alt="2020-08-14-12-10-41-2020814121042"></p>
<p>所以在 <code>canvas</code> 里绘制动画，需要用到 <code>js</code> 相关的 timer api, 让图片快速 “动起来”</p>
<ul>
<li><code>setInterval</code> 计时器</li>
<li><code>requestAnimationFrame</code> 根据浏览器的刷新频率自动调整动画的时间间隔</li>
</ul>
<p>当然，都 <code>2020</code> 年了，现在做动画基本都是用 <code>requestAnimationFrame</code>, 性能更好，动画表现更流畅，这里用一个简单的帧动画伪代码来演示一下：</p>
<p>前面说了，我们需要将图片一张一张的绘制在 canvas 上，需要用到 <code>ctx.drawImage</code> API,</p>
<p>每次绘制将上一次的图片清除，需要用到 <code>ctx.clearRect</code></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">canvas</span>&gt;</span><span class="tag">&lt;/<span class="name">canvas</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></span><br><span class="line"><span class="javascript">  <span class="keyword">let</span> i = <span class="number">0</span>;</span></span><br><span class="line"><span class="javascript">  <span class="keyword">let</span> rafId;</span></span><br><span class="line"><span class="javascript">  <span class="keyword">const</span> canvas = <span class="built_in">document</span>.querySelector(<span class="string">&#x27;canvas&#x27;</span>);</span></span><br><span class="line"><span class="javascript">  <span class="keyword">const</span> imageList = [帧动画原始素材];</span></span><br><span class="line"><span class="javascript">  canvas.width = <span class="number">400</span>;</span></span><br><span class="line"><span class="javascript">  canvas.height = <span class="number">400</span>;</span></span><br><span class="line"><span class="javascript">  <span class="keyword">const</span> ctx = canvas.getContext(<span class="string">&#x27;2d&#x27;</span>);</span></span><br><span class="line"><span class="javascript">  drawImage();</span></span><br><span class="line"><span class="javascript"></span></span><br><span class="line"><span class="javascript">  <span class="function"><span class="keyword">function</span> <span class="title">drawImage</span>(<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">    <span class="keyword">if</span> (i === <span class="number">20</span>) &#123;</span></span><br><span class="line"><span class="javascript">      cancelAnimationFrame(rafId);</span></span><br><span class="line"><span class="javascript">      <span class="keyword">return</span>;</span></span><br><span class="line"><span class="javascript">    &#125;</span></span><br><span class="line"><span class="javascript">    ctx.clearRect(<span class="number">0</span>, <span class="number">0</span>, canvas.width, canvas.height);</span></span><br><span class="line"><span class="javascript">    ctx.drawImage(imageList[i], <span class="number">0</span>, <span class="number">0</span>);</span></span><br><span class="line"><span class="javascript">    i++;</span></span><br><span class="line"><span class="javascript">    rafId = requestAnimationFrame(drawImage);</span></span><br><span class="line"><span class="javascript">  &#125;</span></span><br><span class="line"><span class="javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="3D-动画-（翻书）"><a href="#3D-动画-（翻书）" class="headerlink" title="3D 动画 （翻书）"></a>3D 动画 （翻书）</h4><p>话不多说，先来一张图感受下，炫酷就完事了</p>
<p><img src="https://cdn.lijinke.cn/2020-08-14%2015.29.18.gif" alt="gif"></p>
<p>首先声明结构</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;container&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;page&quot;</span>&gt;</span>如何与 sb 相处<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ul>
<li><code>container</code> 声明 3d 舞台</li>
<li><code>page</code> 表示一页书</li>
</ul>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.container</span> &#123;</span><br><span class="line">  <span class="attribute">transform-style</span>: preserve-<span class="number">3</span>d;</span><br><span class="line">  <span class="attribute">position</span>: absolute;</span><br><span class="line">  <span class="attribute">top</span>: <span class="number">50%</span>;</span><br><span class="line">  <span class="attribute">left</span>: <span class="number">50%</span>;</span><br><span class="line">  <span class="attribute">transform</span>: <span class="built_in">translate3d</span>(-<span class="number">50%</span>, -<span class="number">50%</span>, <span class="number">0</span>) <span class="built_in">rotateX</span>(<span class="number">30deg</span>);</span><br><span class="line">  <span class="attribute">background</span>: <span class="number">#dcdcdc</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.page</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#fff</span>;</span><br><span class="line">  <span class="attribute">background</span>: <span class="number">#396</span>;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">30px</span>;</span><br><span class="line">  <span class="attribute">animation</span>: rotate <span class="number">5s</span> forwards;</span><br><span class="line">  <span class="attribute">transform-origin</span>: <span class="number">0</span> <span class="number">50%</span>;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">300px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">300px</span>;</span><br><span class="line">  <span class="attribute">display</span>: flex;</span><br><span class="line">  <span class="attribute">align-items</span>: center;</span><br><span class="line">  <span class="attribute">justify-content</span>: center;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">@keyframes</span> rotate &#123;</span><br><span class="line">  <span class="selector-tag">from</span> &#123;</span><br><span class="line">    <span class="attribute">transform</span>: <span class="built_in">rotateY</span>(<span class="number">0deg</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="selector-tag">to</span> &#123;</span><br><span class="line">    <span class="attribute">transform</span>: <span class="built_in">rotateY</span>(-<span class="number">150deg</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><code>transform-style: preserve-3d</code> 表示当前以 <code>3D</code> 的方式进行过渡，现在以 <code>rotateY(-150deg)</code> Y 轴旋转的时候就有 3d 的效果了</p>
<h4 id="页面滚动动画"><a href="#页面滚动动画" class="headerlink" title="页面滚动动画"></a>页面滚动动画</h4><p>页面滚动动画比较常见，他不会在网页加载的时候立即执行，而是等用户滚到一定的位置时触发，视觉和交互的体验更棒，</p>
<p>以 <a target="_blank" rel="noopener" href="https://landing.ant.design/index-cn">Ant Design Landing</a> 网站为例，滚动到指定区域，会触发对应的滚动动画，看起来非常酷炫</p>
<p><img src="https://cdn.lijinke.cn/2020-08-14%2012.34.12.gif" alt="gif"></p>
<p>原理也比较简单，我们可以编写想执行动画区域的 <code>css</code>, 写好动画，监听滚动条高度，匹配对应的区域的 <code>offsetTop</code> , 如果快到达时，给当前区域添加 <code>class</code> 即可，</p>
<p>另外一种方案，使用浏览器的 API <code>intersectionObserver</code> 监听目标元素是否在可视范围内</p>
<blockquote>
<p><a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/API/IntersectionObserver">https://developer.mozilla.org/zh-CN/docs/Web/API/IntersectionObserver</a></p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> intersectionObserver = <span class="keyword">new</span> IntersectionObserver(<span class="function"><span class="keyword">function</span> (<span class="params">entries</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// If intersectionRatio is 0, the target is out of view</span></span><br><span class="line">  <span class="comment">// and we do not need to do anything.</span></span><br><span class="line">  <span class="keyword">if</span> (entries[<span class="number">0</span>].intersectionRatio &lt;= <span class="number">0</span>) <span class="keyword">return</span>;</span><br><span class="line"></span><br><span class="line">  loadItems(<span class="number">10</span>);</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&#x27;Loaded new items&#x27;</span>);</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">// start observing</span></span><br><span class="line">intersectionObserver.observe(<span class="built_in">document</span>.querySelector(<span class="string">&#x27;.scrollerFooter&#x27;</span>));</span><br></pre></td></tr></table></figure>

<h4 id="一些优秀的第三方库"><a href="#一些优秀的第三方库" class="headerlink" title="一些优秀的第三方库"></a>一些优秀的第三方库</h4><ul>
<li><a target="_blank" rel="noopener" href="https://animate.style/">Animate.css</a> 写好了各种类型的动画 css, 粘贴复制即可</li>
<li><a target="_blank" rel="noopener" href="https://motion.ant.design/index-cn">Ant Motion</a> 一个 React 的 动画库</li>
</ul>
<h3 id="结语"><a href="#结语" class="headerlink" title="结语"></a>结语</h3><p>以上是我个人平时学习或者看到的一些动画的总结，在微软都放弃 IE 的今天，我们再也不用考虑那恶心的浏览器兼容，和 hack, 如果今天还有人问你各种 IE 的问题，纯属脑瘫，没有了 IE 的束缚，我们可以放心大胆的使用各种新特性，实现各种酷炫的动画，一个恰到好处的动画，能给网页增色不少，当然我认为动画的实现手段都是次要的，最主要的是想象力和创造力，你说是吗？</p>
<h3 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h3><ul>
<li><a target="_blank" rel="noopener" href="https://www.zhangxinxu.com/wordpress/2019/06/fdcon2019-css-share/">FDCon2019 大会分享之滤镜与混合模式实录</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/lijinke666/css3-demos">CSS3-demos</a></li>
<li><a target="_blank" rel="noopener" href="https://developer.mozilla.org/en-US/docs/Web/CSS/transform-function">MDN transform-function</a></li>
<li><a target="_blank" rel="noopener" href="https://www.zhangxinxu.com/wordpress/2012/09/css3-3d-transform-perspective-animate-transition/">好吧，CSS3 3D transform 变换，不过如此</a></li>
<li><a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/SVG/Tutorial">SVG 教程</a></li>
<li><a target="_blank" rel="noopener" href="https://segmentfault.com/a/1190000000490328">前端性能优化（CSS 动画篇）</a></li>
<li><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/47407398">图解浏览器的基本工作原理</a></li>
<li><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/181199232">Webkit 内核初探</a></li>
<li><a target="_blank" rel="noopener" href="https://www.zhangxinxu.com/wordpress/2020/07/css-var-improve-components/">CSS 变量对 JS 交互组件开发带来的提升与变革</a></li>
<li><a href="https://www.lijinke.cn/2019/03/04/%E7%94%A8SVG-%E7%94%BB%E4%B8%80%E4%B8%AA%E5%AD%97/">用 SVG-画一个字</a></li>
<li><a target="_blank" rel="noopener" href="https://juejin.im/post/6844903906061860878">SVG 描边动画就这么简单</a></li>
<li><a target="_blank" rel="noopener" href="https://laixiazheteng.com/article/page/id/rf5VpT3YQPpN">canvas 动画包教不包会</a></li>
<li><a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/API/IntersectionObserver">MDN IntersectionObserver</a></li>
<li><a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/CSS/CSS_Transitions/Using_CSS_transitions">使用 CSS transitions</a></li>
<li><a target="_blank" rel="noopener" href="https://www.zhangxinxu.com/wordpress/2012/09/css3-3d-transform-perspective-animate-transition/">好吧，CSS3 3D transform 变换，不过如此！</a></li>
</ul>
</div><div class="post-footer"><div class="meta"><div class="info"><i class="fa fa-sun-o"></i><span class="date">2020-08-12</span><i class="fa fa-comment-o"></i><a href="/2020/08/12/%E5%89%8D%E7%AB%AF%E4%B8%96%E7%95%8C%E4%B8%AD%E7%9A%84%E5%8A%A8%E7%94%BB/#comments">评论</a><i class="fa fa-tag"></i><a class="tag" href="/tags/浏览器，CSS3-动画/" title="浏览器，CSS3, 动画">浏览器，CSS3, 动画 </a></div></div></div></div><div style="margin:30px"><span class="leancloud-visitors" id="/2020/08/12/前端世界中的动画/"><span class="post-meta-item-text" style="margin-right:5px">阅读量</span><i class="leancloud-visitors-count">1000000</i></span></div><div class="share"><div class="evernote"><a class="fa fa-bookmark" href="javascript:(function(){EN_CLIP_HOST='http://www.evernote.com';try{var%20x=document.createElement('SCRIPT');x.type='text/javascript';x.src=EN_CLIP_HOST+'/public/bookmarkClipper.js?'+(new%20Date().getTime()/100000);document.getElementsByTagName('head')[0].appendChild(x);}catch(e){location.href=EN_CLIP_HOST+'/clip.action?url='+encodeURIComponent(location.href)+'&amp;title='+encodeURIComponent(document.title);}})();" ref="nofollow" target="_blank"></a></div><div class="weibo"><a class="fa fa-weibo" href="javascript:void((function(s,d,e){try{}catch(e){}var f='http://service.weibo.com/share/share.php?',u=d.location.href,p=['url=',e(u),'&amp;title=',e(d.title),'&amp;appkey=2924220432'].join('');function a(){if(!window.open([f,p].join(''),'mb',['toolbar=0,status=0,resizable=1,width=620,height=450,left=',(s.width-620)/2,',top=',(s.height-450)/2].join('')))u.href=[f,p].join('');};if(/Firefox/.test(navigator.userAgent)){setTimeout(a,0)}else{a()}})(screen,document,encodeURIComponent));"></a></div><div class="twitter"><a class="fa fa-twitter" target="_blank" rel="noopener" href="http://twitter.com/home?status=,https://www.lijinke.cn/2020/08/12/前端世界中的动画/,李金珂的小屋,前端世界中的动画,;"></a></div></div><div class="pagination"><ul class="clearfix"><li class="pre pagbuttons"><a class="btn" role="navigation" href="/2021/01/19/2020%E5%B9%B4%E7%BB%88%E7%BB%88%E7%BB%93/" title="2020 年终总结">上一篇</a></li><li class="next pagbuttons"><a class="btn" role="navigation" href="/2020/07/03/%E4%B8%80%E4%B8%AAnpm%E5%8C%85%E7%9A%84%E8%87%AA%E8%BF%B0/" title="一个 npm 包的自述">下一篇</a></li></ul></div><a id="comments"></a><div id="vcomments" style="margin:0 30px;"></div><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="//unpkg.com/valine/dist/Valine.min.js?v=undefined"></script><script>var valine = new Valine({
  el:'#vcomments',
  //- notify: || false,
  //- verify:|| false,
  notify: true,
  verify: true,
  enableQQ: true,
  recordIP: true,
  app_id:'RBh7EcHesd4twgP5qIos38HM-gzGzoHsz',
  app_key:'f47a9Cg5ea9EVoPSs4KqfE6U',
  placeholder:'留下点什么?',
  path: window.location.pathname,
  avatar:'robohash',
  visitor: true,
})</script></div></div></div></div><script src="/js/jquery.js"></script><script src="/js/jquery-migrate-1.2.1.min.js"></script><script src="/js/jquery.appear.js"></script><script src="https://unpkg.com/darkreader@4.9.32/darkreader.js"></script><script src="/pwa.js"></script><script src="/main.js"></script></body></html>