<!DOCTYPE html><html lang="zh-CN"><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><meta name="author" content="李金珂,jinke.li666@gmail.com"><title>使用 Github Action 来做自动化 · 李金珂的小屋</title><meta name="description" content="1. 🔍 背景在日常开源运营中，对于一个 Github 仓库，使用最频繁的就是这四大金刚


Code 查看源代码
Issues 管理问题
Pull requests 管理代码提交
Releases 查看发布日志

Issues和 Pull requests 版块是开发者和用户频繁交流的地方，也是"><meta name="keywords" content="Javascript,Node.js"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-title" content="李金珂的小屋"><meta name="icon" content="/logos/logo_192.png"><meta name="apple-touch-icon" content="/logos/logo_192.png"><meta name="apple-touch-icon-precomposed" content="/logos/logo_192.png"><meta name="apple-touch-startup-image" content="/logos/logo_192.png"><meta name="Alipay:title" content="李金珂的小屋"><meta name="Alipay:imgUrl" content="/logos/logo_192.png"><meta name="Alipay:desc" content="要想学仙术哪能不吃苦"><meta name="renderer" content="webkit"><meta name="theme-color" content="#fff"><link rel="short icon" href="/logos/logo_192.png" type="image/x-icon"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/blog_basic.css"><link rel="stylesheet" href="/css/font-awesome.min.css"><link rel="alternate" type="application/atom+xml" title="ATOM 1.0" href="/atom.xml"><link rel="manifest" href="/manifest.json"><meta name="generator" content="Hexo 5.4.0"></head><body><div class="sidebar animated fadeInDown"><div class="logo-title"><div class="title"><img src="/images/my.jpeg" style="width:127px;border-radius:50%;margin-bottom:20px;"><h3 title=""><a href="/">李金珂的小屋</a></h3><div class="description"><p>要想学仙术,哪能不吃苦</p></div></div></div><ul class="social-links"><li><a target="_blank" rel="noopener" href="http://weibo.com/金珂珂珂珂"><i class="fa fa-weibo"></i></a></li><li><a target="_blank" rel="noopener" href="http://github.com/lijinke666"><i class="fa fa-github"></i></a></li></ul><div class="switch"><input type="checkbox" id="time"><label for="time">Night</label></div><div class="footer"><a target="_blank" href="/"><span>Theme by</span></a><a target="_blank" rel="noopener" href="https://www.caicai.me"> CaiCai</a><span>&</span><a target="_blank" rel="noopener" href="https://github.com/Ben02/hexo-theme-Anatole"> Ben</a><div class="by_farbox"><a href="https://hexo.io/zh-cn/" target="_blank">Proudly published with Hexo&#65281;</a><a href="https://beian.miit.gov.cn/" target="_blank">蜀ICP备17033638号</a></div></div></div><div class="main"><div class="page-top animated fadeInDown"><div class="nav"><li><a href="/">主页</a></li><li><a href="/about">关于</a></li><li><a href="/archives">归档</a></li><li><a href="/links">友情链接</a></li></div><div class="information"><div class="back_btn"><li><a class="fa fa-chevron-left" onclick="window.history.go(-1)"> </a></li></div><div class="avatar"><img src="/images/my.jpeg"></div></div></div><div class="autopagerize_page_element"><div class="content"><div class="post-page"><div class="post animated fadeInDown"><div class="post-title"><h3><a>使用 Github Action 来做自动化</a></h3></div><div class="post-content"><p><a name="oBKDo"></a></p>
<h3 id="1-🔍-背景"><a href="#1-🔍-背景" class="headerlink" title="1. 🔍 背景"></a>1. 🔍 背景</h3><p>在日常开源运营中，对于一个 Github 仓库，使用最频繁的就是这四大金刚<br /></p>
<p><img src="https://intranetproxy.alipay.com/skylark/lark/0/2022/png/6356643/1665555131989-80553e28-d859-410c-80c2-bb52ef4d89f3.png#clientId=u2d9663fb-26e8-4&crop=0&crop=0&crop=1&crop=1&errorMessage=unknown%20error&from=paste&height=55&id=u0b2e5828&margin=%5Bobject%20Object%5D&name=image.png&originHeight=110&originWidth=398&originalType=binary&ratio=1&rotation=0&showTitle=false&size=11047&status=error&style=none&taskId=u7b3e1a44-18e6-49aa-9b57-da72cd75468&title=&width=199" alt="image.png"><img src="https://intranetproxy.alipay.com/skylark/lark/0/2022/png/6356643/1665555141180-04876950-2b7a-4d2b-a149-4f4ddbb51073.png#clientId=u2d9663fb-26e8-4&crop=0&crop=0&crop=1&crop=1&errorMessage=unknown%20error&from=paste&height=78&id=uc70ad10e&margin=%5Bobject%20Object%5D&name=image.png&originHeight=156&originWidth=289&originalType=binary&ratio=1&rotation=0&showTitle=false&size=10988&status=error&style=none&taskId=u1fe4593e-b568-43ff-a262-7f8b3413416&title=&width=144.5" alt="image.png"></p>
<ul>
<li><strong>Code</strong> 查看源代码</li>
<li><strong>Issues</strong> 管理问题</li>
<li><strong>Pull requests</strong> 管理代码提交</li>
<li><strong>Releases</strong> 查看发布日志</li>
</ul>
<p><code>Issues</code>和 <code>Pull requests</code> 版块是开发者和用户频繁交流的地方，也是比较耗费精力的地方，往往是反复对线拉扯，我们会预设好对应的 <strong>模板</strong>, 用来提升提问效率<br /><img src="https://intranetproxy.alipay.com/skylark/lark/0/2022/png/6356643/1665556058636-69e0deec-71fd-4bfb-9b5a-33df000e72df.png#clientId=u2d9663fb-26e8-4&crop=0&crop=0&crop=1&crop=1&errorMessage=unknown%20error&from=paste&height=488&id=ua9348b82&margin=%5Bobject%20Object%5D&name=image.png&originHeight=975&originWidth=777&originalType=binary&ratio=1&rotation=0&showTitle=false&size=103237&status=error&style=none&taskId=u5b4bab95-4892-4ffa-8b1c-4eb3ee14531&title=&width=388.5" alt="image.png"></p>
<p>然而模板并没有什么卵用，我们也总是遇到这篇文章 <a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/25795393">&lt;&lt;如何向开源项目提交无法解答的问题&gt;&gt;</a> 提到的那些 “神奇” 的用户</p>
<p>这篇文章就简单介绍一下 S2 是如果通过自动化的方式，来对 Issue, PR, 版本进行管理</p>
<p><a name="KRT2o"></a></p>
<h3 id="2-📈-Issue-管理"><a href="#2-📈-Issue-管理" class="headerlink" title="2. 📈 Issue 管理"></a>2. 📈 Issue 管理</h3><p><a name="GrZbu"></a></p>
<h4 id="2-1-打标签"><a href="#2-1-打标签" class="headerlink" title="2.1 打标签"></a>2.1 打标签</h4><p>在越来越多的 Issue 堆积起来后，使用 标签 对其进行分类就显得尤为重要，便于快速查找，增加辨识度 <a target="_blank" rel="noopener" href="https://github.com/antvis/S2/labels">查看完整列表</a><br /><img src="https://intranetproxy.alipay.com/skylark/lark/0/2022/png/6356643/1665556869517-0e8dba33-148f-4273-b8b7-f772b2e07e05.png#clientId=u2d9663fb-26e8-4&crop=0&crop=0&crop=1&crop=1&errorMessage=unknown%20error&from=paste&height=163&id=u9a7197e0&margin=%5Bobject%20Object%5D&name=image.png&originHeight=671&originWidth=619&originalType=binary&ratio=1&rotation=0&showTitle=false&size=60513&status=error&style=none&taskId=ue97d7f9b-1339-4228-8c74-434727bb7f4&title=&width=150.5" alt="image.png"></p>
<p><a name="HOMjg"></a></p>
<h4 id="2-2-自动回复"><a href="#2-2-自动回复" class="headerlink" title="2.2 自动回复"></a>2.2 自动回复</h4><p>设置标签后，我们还可以进一步扩展，利用强大的 <a target="_blank" rel="noopener" href="https://github.com/antvis/S2/actions/workflows/issue-labeled.yml">Github Action</a> 和 <a target="_blank" rel="noopener" href="https://github.com/actions-cool/issues-helper">issues-helper</a> 来进行自动回复</p>
<ul>
<li>Action 提供强大的 CI 能力，可以使用各种自定义功能</li>
<li>issues-helper 对 GItHub API 提供了封装，能便捷的对 issue 做各种处理 （强烈推荐）</li>
</ul>
<p>如图，该用户采用了经典的提问方式：**”无视模板，开局一句话，内容全靠猜”**, 此时我们打上 👀 need more info 标签，机器人就会自动回复一个我们预设好的话<br /><img src="https://intranetproxy.alipay.com/skylark/lark/0/2022/png/6356643/1665557152420-4c3d4b34-bbe9-4cfd-8835-21f0a3c4828e.png#clientId=u2d9663fb-26e8-4&crop=0&crop=0&crop=1&crop=1&errorMessage=unknown%20error&from=paste&height=295&id=u01587cf8&margin=%5Bobject%20Object%5D&name=image.png&originHeight=590&originWidth=940&originalType=binary&ratio=1&rotation=0&showTitle=false&size=124757&status=error&style=none&taskId=u8d2a518d-f641-45e1-a193-44eabc77883&title=&width=470" alt="image.png"></p>
<p>又或是用户反馈了一个 bug, 但是我们无法复现，需要一个让其提供一个复现链接</p>
<p><img src="https://intranetproxy.alipay.com/skylark/lark/0/2022/png/6356643/1665558057314-4271acd1-6a66-4669-a4de-be0a56f31640.png#clientId=u2d9663fb-26e8-4&crop=0&crop=0&crop=1&crop=1&errorMessage=unknown%20error&from=paste&height=135&id=u6b1939d6&margin=%5Bobject%20Object%5D&name=image.png&originHeight=270&originWidth=920&originalType=binary&ratio=1&rotation=0&showTitle=false&size=62212&status=error&style=none&taskId=u7799da20-5961-4f69-b1ff-86f1cf4d0b8&title=&width=460" alt="image.png"></p>
<p>workflow 代码如下</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">name:</span> <span class="string">Issue</span> <span class="string">Labeled</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 新增标签时触发</span></span><br><span class="line"><span class="attr">on:</span></span><br><span class="line">  <span class="attr">issues:</span></span><br><span class="line">    <span class="attr">types:</span> [<span class="string">labeled</span>]</span><br><span class="line"></span><br><span class="line"><span class="attr">jobs:</span></span><br><span class="line">  <span class="attr">issue-labeled:</span></span><br><span class="line">    <span class="comment"># 打标签和提交 issue 的不是同一个人才执行</span></span><br><span class="line">    <span class="attr">if:</span> <span class="string">github.actor</span> <span class="type">!=</span> <span class="string">github.event.issue.user.login</span></span><br><span class="line">    <span class="attr">runs-on:</span> <span class="string">ubuntu-latest</span></span><br><span class="line">    <span class="attr">steps:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Need</span> <span class="string">more</span> <span class="string">info</span></span><br><span class="line">        <span class="attr">if:</span> <span class="string">github.event.label.name</span> <span class="string">==</span> <span class="string">&#x27;👀 need more info&#x27;</span></span><br><span class="line">        <span class="attr">uses:</span> <span class="string">actions-cool/issues-helper@main</span></span><br><span class="line">        <span class="attr">with:</span></span><br><span class="line">          <span class="attr">actions:</span> <span class="string">&#x27;create-comment&#x27;</span></span><br><span class="line">          <span class="attr">token:</span> <span class="string">$&#123;&#123;</span> <span class="string">secrets.GITHUB_TOKEN</span> <span class="string">&#125;&#125;</span></span><br><span class="line">          <span class="attr">issue-number:</span> <span class="string">$&#123;&#123;</span> <span class="string">github.event.issue.number</span> <span class="string">&#125;&#125;</span></span><br><span class="line">          <span class="attr">body:</span> <span class="string">|</span></span><br><span class="line"><span class="string">            你好 @$&#123;&#123; github.event.issue.user.login &#125;&#125;，你所提供的信息不足于我们排查问题，请按照 issue 模板填写相关信息 （参考 #852 #848), 提供 gif, 截图，代码片段，配置信息，版本号，可复现链接等方式，详细说明复现步骤，感谢配合，谢谢！15 天内未回复 issue 自动关闭。</span></span><br><span class="line"><span class="string"></span></span><br><span class="line">            <span class="string">Hello,</span> <span class="string">@$&#123;&#123;</span> <span class="string">github.event.issue.user.login</span> <span class="string">&#125;&#125;,</span> <span class="string">the</span> <span class="string">information</span> <span class="string">you</span> <span class="string">provided</span> <span class="string">is</span> <span class="string">not</span> <span class="string">enough</span> <span class="string">for</span> <span class="string">us</span> <span class="string">to</span> <span class="string">troubleshoot</span> <span class="string">the</span> <span class="string">problem.</span> <span class="string">Please</span> <span class="string">complete</span> <span class="string">the</span> <span class="string">issue</span> <span class="string">description</span> <span class="string">(refer</span> <span class="comment">#852 #848), provide gifs, screenshots, config, version. And explain the reproduction steps in detail. Thanks so much for your cooperation! The issue will be closed without any replay within 15 days.</span></span><br></pre></td></tr></table></figure>

<p>控制台查看：<br /><img src="https://intranetproxy.alipay.com/skylark/lark/0/2022/png/6356643/1665558536189-c3a81a89-b6e8-463f-925d-784e09b3cc67.png#clientId=u2d9663fb-26e8-4&crop=0&crop=0&crop=1&crop=1&errorMessage=unknown%20error&from=paste&height=202&id=u2208c873&margin=%5Bobject%20Object%5D&name=image.png&originHeight=404&originWidth=1276&originalType=binary&ratio=1&rotation=0&showTitle=false&size=79168&status=error&style=none&taskId=uebc9a67b-c7f4-4f58-932c-4aefbdd6cc2&title=&width=638" alt="image.png"></p>
<p>大致流程：<br /><img src="https://intranetproxy.alipay.com/skylark/lark/0/2022/jpeg/6356643/1665562324238-520480aa-cda5-4c23-b47f-7c5a93d2d292.jpeg"></p>
<p>更多细节请查看 [🏷 S2 Labels 使用指南](<a target="_blank" rel="noopener" href="https://yuque.antfin.com/docs/share/356a627f-be20-427c-9b6d-2d2abf6e5734">https://yuque.antfin.com/docs/share/356a627f-be20-427c-9b6d-2d2abf6e5734</a>?# 《🏷 S2 Labels 使用指南》)</p>
<p><a name="EQOjt"></a></p>
<h4 id="2-3-定时任务"><a href="#2-3-定时任务" class="headerlink" title="2.3 定时任务"></a>2.3 定时任务</h4><p>对于已经打上 👀 need more info 🤔 need reproduce 的 issue,  但是却迟迟得不到回应，我们可以使用 <code>定时任务</code> 来自动的进行批量处理</p>
<p>workflow 代码如下</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">name:</span> <span class="string">Issue</span> <span class="string">Close</span> <span class="string">Require</span></span><br><span class="line"></span><br><span class="line"><span class="attr">on:</span></span><br><span class="line">  <span class="attr">schedule:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">cron:</span> <span class="string">&quot;0 0 * * *&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="attr">jobs:</span></span><br><span class="line">  <span class="attr">close-issues:</span></span><br><span class="line">    <span class="attr">runs-on:</span> <span class="string">ubuntu-latest</span></span><br><span class="line">    <span class="attr">steps:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Need</span> <span class="string">reproduce</span></span><br><span class="line">        <span class="attr">uses:</span> <span class="string">actions-cool/issues-helper@main</span></span><br><span class="line">        <span class="attr">with:</span></span><br><span class="line">          <span class="attr">actions:</span> <span class="string">&#x27;close-issues&#x27;</span></span><br><span class="line">          <span class="attr">labels:</span> <span class="string">&#x27;🤔 need reproduce&#x27;</span></span><br><span class="line">          <span class="attr">inactive-day:</span> <span class="number">15</span></span><br><span class="line">          <span class="attr">body:</span> <span class="string">|</span></span><br><span class="line"><span class="string">            由于该 issue 被标记为需要复现，却 15 天未收到回应。现关闭 issue，若有任何问题，可评论回复。</span></span><br><span class="line"><span class="string"></span></span><br><span class="line">            <span class="string">Since</span> <span class="string">the</span> <span class="string">issue</span> <span class="string">was</span> <span class="string">labeled</span> <span class="string">as</span> <span class="string">&quot;🤔 need reproduce&quot;</span> <span class="string">but</span> <span class="literal">no</span> <span class="string">response</span> <span class="string">was</span> <span class="string">received</span> <span class="string">for</span> <span class="number">15</span> <span class="string">days.</span> <span class="string">Now</span> <span class="string">close</span> <span class="string">the</span> <span class="string">issue.</span> <span class="string">If</span> <span class="string">you</span> <span class="string">have</span> <span class="string">any</span> <span class="string">questions,</span> <span class="string">feel</span> <span class="string">free</span> <span class="string">to</span> <span class="string">comment.</span></span><br><span class="line"></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Needs</span> <span class="string">more</span> <span class="string">info</span></span><br><span class="line">        <span class="attr">uses:</span> <span class="string">actions-cool/issues-helper@main</span></span><br><span class="line">        <span class="attr">with:</span></span><br><span class="line">          <span class="attr">actions:</span> <span class="string">&#x27;close-issues&#x27;</span></span><br><span class="line">          <span class="attr">labels:</span> <span class="string">&#x27;👀 need more info&#x27;</span></span><br><span class="line">          <span class="attr">inactive-day:</span> <span class="number">15</span></span><br><span class="line">          <span class="attr">body:</span> <span class="string">|</span></span><br><span class="line"><span class="string">            由于该 issue 被标记为需要更多信息，却 15 天未收到回应。现关闭 issue，若有任何问题，可评论回复。</span></span><br><span class="line"><span class="string"></span></span><br><span class="line">            <span class="string">Since</span> <span class="string">the</span> <span class="string">issue</span> <span class="string">was</span> <span class="string">labeled</span> <span class="string">as</span> <span class="string">&quot;👀 need more info&quot;</span> <span class="string">but</span> <span class="literal">no</span> <span class="string">response</span> <span class="string">was</span> <span class="string">received</span> <span class="string">for</span> <span class="number">15</span> <span class="string">days.</span> <span class="string">Now</span> <span class="string">close</span> <span class="string">the</span> <span class="string">issue.</span> <span class="string">If</span> <span class="string">you</span> <span class="string">have</span> <span class="string">any</span> <span class="string">questions,</span> <span class="string">feel</span> <span class="string">free</span> <span class="string">to</span> <span class="string">comment.</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>此时，有弹幕肯定会问：”如果打上标签后，过几天用户又突然回复了怎么办？岂不是就自动关闭了”</p>
<p><a name="ADYEO"></a></p>
<h4 id="2-4-按需移除"><a href="#2-4-按需移除" class="headerlink" title="2.4 按需移除"></a>2.4 按需移除</h4><p>对于上面弹幕说到的问题，我们监听 Issue 的 <code>edited</code>和 <code>comment</code> 事件，只要该 <code>issue</code>是打开状态，并且是创建者编辑的，那么我们就移除对应的标签，这样定时任务就不会触发了</p>
<p><img src="https://intranetproxy.alipay.com/skylark/lark/0/2022/png/6356643/1665559636230-304abdf8-a9b4-449d-ac69-06f591d031af.png#clientId=u2d9663fb-26e8-4&crop=0&crop=0&crop=1&crop=1&errorMessage=unknown%20error&from=paste&height=115&id=u5c59fed6&margin=%5Bobject%20Object%5D&name=image.png&originHeight=229&originWidth=930&originalType=binary&ratio=1&rotation=0&showTitle=false&size=31951&status=error&style=none&taskId=uded7350c-437c-4542-8921-dbdb1f1b3f2&title=&width=465" alt="image.png"></p>
<p>workflow 代码如下：</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">name:</span> <span class="string">Issue</span> <span class="string">Remove</span> <span class="string">Inactive</span></span><br><span class="line"></span><br><span class="line"><span class="attr">on:</span></span><br><span class="line">  <span class="comment"># issue 更新</span></span><br><span class="line">  <span class="attr">issues:</span></span><br><span class="line">    <span class="attr">types:</span> [<span class="string">edited</span>]</span><br><span class="line">  <span class="comment"># issue 新增/修改评论</span></span><br><span class="line">  <span class="attr">issue_comment:</span></span><br><span class="line">    <span class="attr">types:</span> [<span class="string">created</span>, <span class="string">edited</span>]</span><br><span class="line"></span><br><span class="line"><span class="attr">jobs:</span></span><br><span class="line">  <span class="attr">issue-remove-inactive:</span></span><br><span class="line">    <span class="attr">runs-on:</span> <span class="string">ubuntu-latest</span></span><br><span class="line">    <span class="attr">steps:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">remove</span> <span class="string">inactive</span></span><br><span class="line">        <span class="comment"># 当前 issue 是打开状态，并且是楼主触发的更新</span></span><br><span class="line">        <span class="attr">if:</span> <span class="string">github.event.issue.state</span> <span class="string">==</span> <span class="string">&#x27;open&#x27;</span> <span class="string">&amp;&amp;</span> <span class="string">github.actor</span> <span class="string">==</span> <span class="string">github.event.issue.user.login</span></span><br><span class="line">        <span class="attr">uses:</span> <span class="string">actions-cool/issues-helper@v3</span></span><br><span class="line">        <span class="attr">with:</span></span><br><span class="line">          <span class="attr">actions:</span> <span class="string">&#x27;remove-labels&#x27;</span></span><br><span class="line">          <span class="attr">issue-number:</span> <span class="string">$&#123;&#123;</span> <span class="string">github.event.issue.number</span> <span class="string">&#125;&#125;</span></span><br><span class="line">          <span class="attr">labels:</span> <span class="string">&#x27;💤 inactive,🤔 need reproduce,👀 need more info&#x27;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><a name="Vha7I"></a></p>
<h3 id="3-📈-PR-管理"><a href="#3-📈-PR-管理" class="headerlink" title="3. 📈 PR 管理"></a>3. 📈 PR 管理</h3><p>给 S2 提交 PR 的通常都是组内的小伙伴，但是偶尔还是会有几个社区的活菩萨，通常 PR 会有场景的几个问题</p>
<ul>
<li>PR 没人看</li>
<li>PR 不写描述，看不懂改了什么东西</li>
<li>单测挂了，没有提示</li>
</ul>
<p>同理，和 Issue 管理一样，我们通过 <code>打标签</code>+ <code>自动回复</code> 的方式，增强了开发体验</p>
<p><a name="JE0KD"></a></p>
<h4 id="3-1-PR-提醒"><a href="#3-1-PR-提醒" class="headerlink" title="3. 1 PR 提醒"></a>3. 1 PR 提醒</h4><ol>
<li>首先是配置 webhook, 配合钉钉群机器人 进行提醒，比较简单不多赘述。</li>
</ol>
<p><img src="https://intranetproxy.alipay.com/skylark/lark/0/2022/png/6356643/1665560769224-aad30ba9-fbd1-48ac-8968-7879d9cc4d70.png#clientId=u2d9663fb-26e8-4&crop=0&crop=0&crop=1&crop=1&errorMessage=unknown%20error&from=paste&height=238&id=u9fda1458&margin=%5Bobject%20Object%5D&name=image.png&originHeight=475&originWidth=422&originalType=binary&ratio=1&rotation=0&showTitle=false&size=54619&status=error&style=none&taskId=ufcda4a74-8b91-433b-9e66-6e0d2473286&title=&width=211" alt="image.png"></p>
<ol start="2">
<li>自动添加 Reviewer</li>
</ol>
<p><img src="https://intranetproxy.alipay.com/skylark/lark/0/2022/png/6356643/1665560826237-b0ddc3c1-d167-4dca-b9a0-97f76073303a.png#clientId=u2d9663fb-26e8-4&crop=0&crop=0&crop=1&crop=1&errorMessage=unknown%20error&from=paste&height=109&id=u1e117714&margin=%5Bobject%20Object%5D&name=image.png&originHeight=218&originWidth=875&originalType=binary&ratio=1&rotation=0&showTitle=false&size=36726&status=error&style=none&taskId=u1f9b5d08-3307-4358-a66e-6eafd4c3174&title=&width=437.5" alt="image.png"><br />当新建一个 PR 时，会自动添加预设的组内其他小伙伴，提醒他们来评审 PR, 同时会有邮件提醒</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">name:</span> <span class="string">👨‍💻👩‍💻</span> <span class="string">PR</span> <span class="string">Auto</span> <span class="string">Assign</span> <span class="string">Reviewer</span></span><br><span class="line"></span><br><span class="line"><span class="attr">on:</span></span><br><span class="line">  <span class="attr">pull_request_target:</span></span><br><span class="line">    <span class="attr">types:</span> [<span class="string">opened</span>]</span><br><span class="line"></span><br><span class="line"><span class="attr">jobs:</span></span><br><span class="line">  <span class="attr">add-reviewer:</span></span><br><span class="line">    <span class="attr">runs-on:</span> <span class="string">ubuntu-latest</span></span><br><span class="line">    <span class="attr">steps:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Add</span> <span class="string">assignees</span></span><br><span class="line">        <span class="attr">uses:</span> <span class="string">actions-cool/issues-helper@main</span></span><br><span class="line">        <span class="attr">with:</span></span><br><span class="line">          <span class="attr">actions:</span> <span class="string">&#x27;add-assignees&#x27;</span></span><br><span class="line">          <span class="attr">token:</span> <span class="string">$&#123;&#123;</span> <span class="string">secrets.GITHUB_TOKEN</span> <span class="string">&#125;&#125;</span></span><br><span class="line">          <span class="attr">issue-number:</span> <span class="string">$&#123;&#123;</span> <span class="string">github.event.pull_request.number</span> <span class="string">&#125;&#125;</span></span><br><span class="line">          <span class="attr">assignees:</span> <span class="string">$&#123;&#123;</span> <span class="string">github.event.pull_request.user.login</span> <span class="string">&#125;&#125;</span></span><br><span class="line"></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Add</span> <span class="string">reviewers</span></span><br><span class="line">        <span class="attr">uses:</span> <span class="string">actions-cool/pr-welcome@main</span></span><br><span class="line">        <span class="attr">with:</span></span><br><span class="line">          <span class="attr">token:</span> <span class="string">$&#123;&#123;</span> <span class="string">secrets.GITHUB_TOKEN</span> <span class="string">&#125;&#125;</span></span><br><span class="line">          <span class="attr">pr-emoji:</span> <span class="string">&#x27;+1, rocket&#x27;</span></span><br><span class="line">          <span class="attr">reviewers:</span> <span class="string">&#x27;xingwanying,serializedowen,lcx-seima,YardWill,lijinke666,wjgogogo,stone-lyl,GaoFuhong&#x27;</span></span><br><span class="line">          <span class="attr">review-creator:</span> <span class="literal">false</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><a name="IEjkD"></a></p>
<h4 id="3-2-单测未通过提醒"><a href="#3-2-单测未通过提醒" class="headerlink" title="3.2 单测未通过提醒"></a>3.2 单测未通过提醒</h4><p>Action CI 的执行过程，每一个 <code>steps</code> 是串行的，同时 Github 提供了 <code>failure</code>和 <code>success</code> 两个函数，用于得到当前 <code>step</code>的执行状态</p>
<p>因此我们将检测的代码放在所有 <code>step</code>的末尾，如下代码所示，如果 <code>Test</code> 这一部失败了，那么我们就添加一个 🚨 test failed 的标签，反之移除，同时自动添加一条评论 <code>maintain-one-comment</code>, 同时作者也会收到一条邮件<br /></p>
<p><img src="https://intranetproxy.alipay.com/skylark/lark/0/2022/png/6356643/1665561388092-83cd4b0f-6757-44d0-87b9-54cef2fb1eac.png#clientId=u2d9663fb-26e8-4&crop=0&crop=0&crop=1&crop=1&errorMessage=unknown%20error&from=paste&height=129&id=u8b216f5c&margin=%5Bobject%20Object%5D&name=image.png&originHeight=257&originWidth=914&originalType=binary&ratio=1&rotation=0&showTitle=false&size=45617&status=error&style=none&taskId=ud8781718-4399-4435-bb4c-50639c05392&title=&width=457" alt="image.png"></p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">name:</span> <span class="string">test</span></span><br><span class="line"></span><br><span class="line"><span class="attr">on:</span> [<span class="string">pull_request</span>]</span><br><span class="line"></span><br><span class="line"><span class="attr">concurrency:</span></span><br><span class="line">  <span class="attr">group:</span> <span class="string">$&#123;&#123;github.workflow&#125;&#125;-$&#123;&#123;github.event_name&#125;&#125;-$&#123;&#123;github.ref&#125;&#125;</span></span><br><span class="line">  <span class="attr">cancel-in-progress:</span> <span class="literal">true</span></span><br><span class="line"></span><br><span class="line"><span class="attr">jobs:</span></span><br><span class="line">  <span class="attr">test:</span></span><br><span class="line">    <span class="attr">runs-on:</span> <span class="string">macos-latest</span></span><br><span class="line">    <span class="attr">if:</span> <span class="string">&quot;!contains(github.event.head_commit.message, &#x27;[skip ci]&#x27;)&quot;</span></span><br><span class="line">    <span class="attr">strategy:</span></span><br><span class="line">      <span class="attr">matrix:</span></span><br><span class="line">        <span class="attr">node-version:</span> [<span class="number">16</span>]</span><br><span class="line"></span><br><span class="line">    <span class="attr">steps:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Test</span></span><br><span class="line">        <span class="attr">run:</span> <span class="string">|</span></span><br><span class="line"><span class="string">          yarn test:ci-coverage</span></span><br><span class="line"><span class="string"></span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Workflow</span> <span class="string">failed</span> <span class="string">alert</span></span><br><span class="line">        <span class="attr">if:</span> <span class="string">$&#123;&#123;</span> <span class="string">failure()</span> <span class="string">&#125;&#125;</span></span><br><span class="line">        <span class="attr">uses:</span> <span class="string">actions-cool/maintain-one-comment@main</span></span><br><span class="line">        <span class="attr">with:</span></span><br><span class="line">          <span class="attr">token:</span> <span class="string">$&#123;&#123;</span> <span class="string">secrets.GITHUB_TOKEN</span> <span class="string">&#125;&#125;</span></span><br><span class="line">          <span class="attr">body:</span> <span class="string">|</span></span><br><span class="line"><span class="string">            你好，@$&#123;&#123; github.event.pull_request.user.login &#125;&#125; CI 执行失败，请点击 [Details] 按钮查看，并根据日志修复。</span></span><br><span class="line"><span class="string"></span></span><br><span class="line">            <span class="string">Hello,</span> <span class="string">@$&#123;&#123;</span> <span class="string">github.event.pull_request.user.login</span> <span class="string">&#125;&#125;</span> <span class="string">CI</span> <span class="string">run</span> <span class="string">failed,</span> <span class="string">please</span> <span class="string">click</span> <span class="string">the</span> [<span class="string">Details</span>] <span class="string">button</span> <span class="string">for</span> <span class="string">detailed</span> <span class="string">log</span> <span class="string">information</span> <span class="string">and</span> <span class="string">fix</span> <span class="string">it.</span></span><br><span class="line">            <span class="string">&lt;!--</span> <span class="string">Created</span> <span class="string">by</span> <span class="string">actions-cool/maintain-one-comment</span> <span class="string">--&gt;</span></span><br><span class="line">          <span class="attr">emojis:</span> <span class="string">&#x27;eyes&#x27;</span></span><br><span class="line">          <span class="attr">body-include:</span> <span class="string">&#x27;&lt;!-- Created by actions-cool/maintain-one-comment --&gt;&#x27;</span></span><br><span class="line"></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Workflow</span> <span class="string">failed</span> <span class="string">add</span> <span class="string">test</span> <span class="string">failed</span> <span class="string">label</span></span><br><span class="line">        <span class="attr">if:</span> <span class="string">$&#123;&#123;</span> <span class="string">failure()</span> <span class="string">&amp;&amp;</span> <span class="string">github.event.pull_request.number</span> <span class="type">!=</span> <span class="string">&#x27;&#x27;</span> <span class="string">&#125;&#125;</span></span><br><span class="line">        <span class="attr">uses:</span> <span class="string">actions-cool/issues-helper@main</span></span><br><span class="line">        <span class="attr">with:</span></span><br><span class="line">          <span class="attr">actions:</span> <span class="string">&#x27;add-labels&#x27;</span></span><br><span class="line">          <span class="attr">token:</span> <span class="string">$&#123;&#123;</span> <span class="string">secrets.GITHUB_TOKEN</span> <span class="string">&#125;&#125;</span></span><br><span class="line">          <span class="attr">issue-number:</span> <span class="string">$&#123;&#123;</span> <span class="string">github.event.pull_request.number</span> <span class="string">&#125;&#125;</span></span><br><span class="line">          <span class="attr">labels:</span> <span class="string">&#x27;🚨 test failed&#x27;</span></span><br><span class="line"></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Remove</span> <span class="string">test</span> <span class="string">failed</span> <span class="string">label</span></span><br><span class="line">        <span class="attr">if:</span> <span class="string">$&#123;&#123;</span> <span class="string">success()</span> <span class="string">&amp;&amp;</span> <span class="string">github.event.pull_request.number</span> <span class="type">!=</span> <span class="string">&#x27;&#x27;</span> <span class="string">&#125;&#125;</span></span><br><span class="line">        <span class="attr">uses:</span> <span class="string">actions-cool/issues-helper@main</span></span><br><span class="line">        <span class="attr">with:</span></span><br><span class="line">          <span class="attr">actions:</span> <span class="string">&#x27;remove-labels&#x27;</span></span><br><span class="line">          <span class="attr">token:</span> <span class="string">$&#123;&#123;</span> <span class="string">secrets.GITHUB_TOKEN</span> <span class="string">&#125;&#125;</span></span><br><span class="line">          <span class="attr">issue-number:</span> <span class="string">$&#123;&#123;</span> <span class="string">github.event.pull_request.number</span> <span class="string">&#125;&#125;</span></span><br><span class="line">          <span class="attr">labels:</span> <span class="string">&#x27;🚨 test failed&#x27;</span></span><br></pre></td></tr></table></figure>

<p><a name="pzDGW"></a></p>
<h3 id="4-📚-敏捷看板"><a href="#4-📚-敏捷看板" class="headerlink" title="4. 📚 敏捷看板"></a>4. 📚 敏捷看板</h3><p>敏捷看板又称为产品经理快乐板，在一个一个纵向排列的泳道中，一般是：</p>
<p> “待排期” =&gt; “待开发” =&gt; “进行中” =&gt; “待测试” =&gt; “测试中” =&gt; “已解决”</p>
<p>依葫芦画瓢，在 S2 中，我们利用  Github  自带但是特别冷门的 <code>Projects</code>, 将 Issue 和 PR 做成一个看板，通过它，我们可能很清晰直观的看到目前的一个状态，在周会上，组内的小伙伴也可以快速同步，可谓是 “一站式” 处理 :)<br /></p>
<p><img src="https://intranetproxy.alipay.com/skylark/lark/0/2022/png/6356643/1665559938794-9f629815-d024-46ac-801e-f3cf4a4e1e2a.png#clientId=u2d9663fb-26e8-4&crop=0&crop=0&crop=1&crop=1&errorMessage=unknown%20error&from=paste&height=341&id=ubc7b4842&margin=%5Bobject%20Object%5D&name=image.png&originHeight=682&originWidth=1849&originalType=binary&ratio=1&rotation=0&showTitle=false&size=283952&status=error&style=none&taskId=ubbd0207b-93ab-4feb-9bb0-a91504bfed6&title=&width=924.5" alt="image.png"></p>
<p><a name="n6etg"></a></p>
<h4 id="4-1-自动同步-Issue-和-PR-到看板中"><a href="#4-1-自动同步-Issue-和-PR-到看板中" class="headerlink" title="4.1 自动同步 Issue 和 PR 到看板中"></a>4.1 自动同步 Issue 和 PR 到看板中</h4><p>默认情况下，Issue 和 PR 是不会自动添加到看板中，需要手动添加，同理，我们可以利用 Github Action 自动添加</p>
<blockquote>
<p>Issue</p>
</blockquote>
<p><img src="https://intranetproxy.alipay.com/skylark/lark/0/2022/png/6356643/1665560362147-8e8537b3-284d-4374-a9c1-63fd642cabfd.png#clientId=u2d9663fb-26e8-4&crop=0&crop=0&crop=1&crop=1&errorMessage=unknown%20error&from=paste&height=89&id=ub7ab56c8&margin=%5Bobject%20Object%5D&name=image.png&originHeight=178&originWidth=756&originalType=binary&ratio=1&rotation=0&showTitle=false&size=25326&status=error&style=none&taskId=ua1a7c114-c3a5-4428-90c0-fbc2ad544c0&title=&width=378" alt="image.png"></p>
<blockquote>
<p>PR</p>
</blockquote>
<p><img src="https://intranetproxy.alipay.com/skylark/lark/0/2022/png/6356643/1665560407275-4a3ca4db-5924-48a5-818a-2e719899d7fd.png#clientId=u2d9663fb-26e8-4&crop=0&crop=0&crop=1&crop=1&errorMessage=unknown%20error&from=paste&height=170&id=u999507ba&margin=%5Bobject%20Object%5D&name=image.png&originHeight=340&originWidth=1043&originalType=binary&ratio=1&rotation=0&showTitle=false&size=53812&status=error&style=none&taskId=u4a9ca4a0-c9fb-4cf3-a9cf-69c4ab0a6ba&title=&width=521.5" alt="image.png"></p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">name:</span> <span class="string">🚀</span> <span class="string">Auto</span> <span class="string">Add</span> <span class="string">Issue</span> <span class="string">And</span> <span class="string">PR</span> <span class="string">To</span> <span class="string">Project</span></span><br><span class="line"><span class="attr">on:</span></span><br><span class="line">  <span class="attr">issues:</span></span><br><span class="line">    <span class="attr">types:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">opened</span></span><br><span class="line">  <span class="attr">pull_request_target:</span></span><br><span class="line">    <span class="attr">types:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">opened</span></span><br><span class="line"></span><br><span class="line"><span class="attr">jobs:</span></span><br><span class="line">  <span class="attr">add-issue-to-project:</span></span><br><span class="line">    <span class="attr">runs-on:</span> <span class="string">ubuntu-latest</span></span><br><span class="line">    <span class="attr">if:</span> <span class="string">&quot;github.event_name == &#x27;issues&#x27;&quot;</span></span><br><span class="line">    <span class="attr">steps:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">uses:</span> <span class="string">alex-page/github-project-automation-plus@v0.8.1</span></span><br><span class="line">        <span class="attr">with:</span></span><br><span class="line">          <span class="attr">project:</span> <span class="string">👨‍💻👩‍💻</span>  <span class="string">Issues</span> <span class="string">&amp;</span> <span class="string">PRs</span> <span class="string">进度跟踪</span></span><br><span class="line">          <span class="attr">column:</span> <span class="string">Pending</span> <span class="string">Issues</span></span><br><span class="line">          <span class="attr">repo-token:</span> <span class="string">$&#123;&#123;</span> <span class="string">secrets.GH_PROJECT_TOKEN</span> <span class="string">&#125;&#125;</span></span><br><span class="line">          <span class="attr">action:</span> <span class="string">add</span></span><br><span class="line"></span><br><span class="line">  <span class="attr">add-pr-to-project:</span></span><br><span class="line">    <span class="attr">runs-on:</span> <span class="string">ubuntu-latest</span></span><br><span class="line">    <span class="attr">if:</span> <span class="string">&quot;github.event_name == &#x27;pull_request_target&#x27;&quot;</span></span><br><span class="line">    <span class="attr">steps:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">uses:</span> <span class="string">alex-page/github-project-automation-plus@v0.8.1</span></span><br><span class="line">        <span class="attr">with:</span></span><br><span class="line">          <span class="attr">project:</span> <span class="string">👨‍💻👩‍💻</span>  <span class="string">Issues</span> <span class="string">&amp;</span> <span class="string">PRs</span> <span class="string">进度跟踪</span></span><br><span class="line">          <span class="attr">column:</span> <span class="string">Pending</span> <span class="string">PRs</span></span><br><span class="line">          <span class="attr">repo-token:</span> <span class="string">$&#123;&#123;</span> <span class="string">secrets.GH_PROJECT_TOKEN</span> <span class="string">&#125;&#125;</span></span><br><span class="line">          <span class="attr">action:</span> <span class="string">add</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><a name="SeGWe"></a></p>
<h3 id="5-🚀-自动发布"><a href="#5-🚀-自动发布" class="headerlink" title="5. 🚀 自动发布"></a>5. 🚀 自动发布</h3><p>S2 是 monorepo,  目前由 4 个包组成</p>
<blockquote>
<p>含 @s2-shread 私有包 （内部使用，未发布）</p>
</blockquote>
<p><img src="https://intranetproxy.alipay.com/skylark/lark/0/2022/png/6356643/1665562071466-6564fe9c-2e58-4c9f-8074-6c33c313fa3e.png#clientId=u2d9663fb-26e8-4&crop=0&crop=0&crop=1&crop=1&errorMessage=unknown%20error&from=paste&height=124&id=ua95f5634&margin=%5Bobject%20Object%5D&name=image.png&originHeight=248&originWidth=841&originalType=binary&ratio=1&rotation=0&showTitle=false&size=48842&status=error&style=none&taskId=u36313645-f334-4a0d-a10a-f59607fc1ff&title=&width=420.5" alt="image.png"><br />主流的包管理方案是 <code>lerna</code>和 <code>pnpm</code>, 通常来说，发布流程如下</p>
<p><img src="https://intranetproxy.alipay.com/skylark/lark/0/2022/jpeg/6356643/1665562715561-57d1bc60-9d86-4a72-ba48-471faf108fbb.jpeg"></p>
<p>对于 Github 这一环的流程，还有所欠缺。比如：</p>
<ul>
<li>需要手动创建 Github Releases, 把生成的 changelog 粘贴过去</li>
<li>无法和 issue 进行关联，用户不清楚当前的 issue 的 bug fix 对应哪个版本</li>
</ul>
<p>经过组内小伙伴的共同调研，最终使用了</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://github.com/semantic-release/semantic-release">semantic-release</a>  全自动的语义化发布</li>
<li><a target="_blank" rel="noopener" href="https://github.com/pmowrer/semantic-release-monorepo">semantic-release-monorepo</a>  semantice-release 的 monorepo 插件</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  <span class="attr">branches</span>: [</span><br><span class="line">    <span class="string">&#x27;latest&#x27;</span>,</span><br><span class="line">    &#123; <span class="attr">name</span>: <span class="string">&#x27;beta&#x27;</span>, <span class="attr">prerelease</span>: <span class="literal">true</span> &#125;,</span><br><span class="line">    &#123; <span class="attr">name</span>: <span class="string">&#x27;alpha&#x27;</span>, <span class="attr">prerelease</span>: <span class="literal">true</span> &#125;,</span><br><span class="line">    &#123; <span class="attr">name</span>: <span class="string">&#x27;next&#x27;</span>, <span class="attr">prerelease</span>: <span class="literal">true</span> &#125;,</span><br><span class="line">  ],</span><br><span class="line">  <span class="attr">extends</span>: <span class="string">&#x27;semantic-release-monorepo&#x27;</span>,</span><br><span class="line">  <span class="attr">plugins</span>: [</span><br><span class="line">    <span class="string">&#x27;@semantic-release/commit-analyzer&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;@semantic-release/release-notes-generator&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;@semantic-release/changelog&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;@semantic-release/npm&#x27;</span>,</span><br><span class="line">    [</span><br><span class="line">      <span class="string">&#x27;@semantic-release/git&#x27;</span>,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">message</span>: <span class="string">&#x27;chore(release): 🤖 $&#123;nextRelease.gitTag&#125; [skip ci]&#x27;</span>,</span><br><span class="line">      &#125;,</span><br><span class="line">    ],</span><br><span class="line">    <span class="string">&#x27;@semantic-release/github&#x27;</span>,</span><br><span class="line">  ],</span><br><span class="line">  <span class="attr">preset</span>: <span class="string">&#x27;angular&#x27;</span>,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>相比其他方案，它可以自动创建 Github Releases<br /><img src="https://intranetproxy.alipay.com/skylark/lark/0/2022/png/6356643/1665563527052-02bcdae1-c0b6-44c1-baea-3c860b9f9d3d.png#clientId=u2d9663fb-26e8-4&crop=0&crop=0&crop=1&crop=1&errorMessage=unknown%20error&from=paste&height=407&id=u128b03df&margin=%5Bobject%20Object%5D&name=image.png&originHeight=814&originWidth=842&originalType=binary&ratio=1&rotation=0&showTitle=false&size=133245&status=error&style=none&taskId=ua3830de7-e8cc-4e8f-bd12-caab3d7e7bd&title=&width=421" alt="image.png"><br />以及自动关联发布版本 到对应 issue<br /><img src="https://intranetproxy.alipay.com/skylark/lark/0/2022/png/6356643/1665563570279-8e43c807-73f7-48c3-81ff-b97807149678.png#clientId=u2d9663fb-26e8-4&crop=0&crop=0&crop=1&crop=1&errorMessage=unknown%20error&from=paste&height=199&id=u713dbf14&margin=%5Bobject%20Object%5D&name=image.png&originHeight=398&originWidth=959&originalType=binary&ratio=1&rotation=0&showTitle=false&size=61725&status=error&style=none&taskId=ua5e973ea-d915-46a2-bdb0-9366cb41b1a&title=&width=479.5" alt="image.png"></p>
<p>:::info<br>在 CI 中，Action 会有一个 默认的 TOKEN, 即：<code>$&#123;&#123; secrets.GITHUB_TOKEN &#125;&#125;</code>, 如图<br /><img src="https://intranetproxy.alipay.com/skylark/lark/0/2022/png/6356643/1665628518573-2a07438d-f94c-4f63-89e8-94458449be81.png#clientId=udac51be5-845e-4&crop=0&crop=0&crop=1&crop=1&errorMessage=unknown%20error&from=paste&height=71&id=NOrIh&margin=%5Bobject%20Object%5D&name=image.png&originHeight=71&originWidth=243&originalType=binary&ratio=1&rotation=0&showTitle=false&size=7389&status=error&style=none&taskId=ud67a734d-4d52-4505-9b1a-a028a2b667d&title=&width=243" alt="image.png"><br />你也可以配置成自己的 TOKEN, 那么就会显示你的用户名和头像，所以看到这个头像不一定是我本人在操作 :)<br /><img src="https://intranetproxy.alipay.com/skylark/lark/0/2022/png/6356643/1665628629640-41bb8432-d03c-4c96-9af1-d13f91169a9c.png#clientId=udac51be5-845e-4&crop=0&crop=0&crop=1&crop=1&errorMessage=unknown%20error&from=paste&height=62&id=ue423517e&margin=%5Bobject%20Object%5D&name=image.png&originHeight=62&originWidth=158&originalType=binary&ratio=1&rotation=0&showTitle=false&size=7400&status=error&style=none&taskId=ub3267f7c-e2b1-4a4e-9cb6-f14cf92e0ec&title=&width=158" alt="image.png"><br /><a target="_blank" rel="noopener" href="https://yuque.antfin.com/lijinke.ljk/lcp8sk/lkgayg">🔑 如何生成各种 TOKEN</a><br>:::</p>
<p><a name="Yv7Lz"></a></p>
<h4 id="5-1-发布方式"><a href="#5-1-发布方式" class="headerlink" title="5.1 发布方式"></a>5.1 发布方式</h4><p><img src="https://intranetproxy.alipay.com/skylark/lark/0/2022/png/6356643/1665563454421-bb1d29ed-d4a9-4dfb-8dc6-9f542ad1335c.png#clientId=u2d9663fb-26e8-4&crop=0&crop=0&crop=1&crop=1&errorMessage=unknown%20error&from=paste&height=224&id=Tz4wD&margin=%5Bobject%20Object%5D&name=image.png&originHeight=447&originWidth=785&originalType=binary&ratio=1&rotation=0&showTitle=false&size=129658&status=error&style=none&taskId=u1106d1b1-4b5d-4986-828b-76fc274a792&title=&width=392.5" alt="image.png"><br />我们创建了三个分支，分别是</p>
<ul>
<li><code>latest</code>正式版</li>
<li><code>beta</code>测试版</li>
<li><code>alpha</code>预览版</li>
</ul>
<p>在任意分支提交以 <code>chore(release):</code> 开头的 commit ,  push 代码即完成发布，后续交给 CI 即可</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git commit -m <span class="string">&quot;chore(release): bump version&quot;</span></span><br><span class="line">git push</span><br></pre></td></tr></table></figure>

<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">name:</span> <span class="string">🚀</span> <span class="string">Auto</span> <span class="string">Release</span></span><br><span class="line"><span class="attr">on:</span></span><br><span class="line">  <span class="attr">push:</span></span><br><span class="line">    <span class="attr">branches:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">latest</span> <span class="comment"># 正式版</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">beta</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">alpha</span></span><br><span class="line"></span><br><span class="line"><span class="attr">jobs:</span></span><br><span class="line">  <span class="attr">release:</span></span><br><span class="line">    <span class="attr">runs-on:</span> <span class="string">ubuntu-latest</span></span><br><span class="line">    <span class="comment"># 以 chore(release): 开头才触发</span></span><br><span class="line">    <span class="attr">if:</span> <span class="string">&quot;!contains(github.event.head_commit.message, &#x27;[skip ci]&#x27;) &amp;&amp; startsWith(github.event.head_commit.message , &#x27;chore(release):&#x27;)&quot;</span></span><br><span class="line"></span><br><span class="line">    <span class="attr">steps:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">uses:</span> <span class="string">actions/checkout@v3</span></span><br><span class="line"></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Use</span> <span class="string">Node.js</span> <span class="number">16</span></span><br><span class="line">        <span class="attr">uses:</span> <span class="string">actions/setup-node@v3</span></span><br><span class="line">        <span class="attr">with:</span></span><br><span class="line">          <span class="attr">node-version:</span> <span class="number">16</span> <span class="comment"># semantic-release 需要 &gt;= 16 的 Node.js 环境</span></span><br><span class="line">          <span class="attr">cache:</span> <span class="string">&#x27;yarn&#x27;</span></span><br><span class="line"></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Install</span> <span class="string">dependencies</span></span><br><span class="line">        <span class="attr">run:</span> <span class="string">yarn</span></span><br><span class="line"></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Build</span></span><br><span class="line">        <span class="attr">run:</span> <span class="string">yarn</span> <span class="string">build</span></span><br><span class="line"></span><br><span class="line">      <span class="comment"># 自动发布完成后 触发 github.release.published 事件</span></span><br><span class="line">      <span class="comment"># 如果是 action 自带的 机器人 token, 出于安全考虑，github 会禁止循环触发，使用真实用户的 token 可解决这个问题</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Release</span></span><br><span class="line">        <span class="attr">env:</span></span><br><span class="line">          <span class="attr">GITHUB_TOKEN:</span> <span class="string">$&#123;&#123;</span> <span class="string">secrets.JINKE_GITHUB_TOKEN</span> <span class="string">&#125;&#125;</span></span><br><span class="line">          <span class="attr">NPM_TOKEN:</span> <span class="string">$&#123;&#123;</span> <span class="string">secrets.NPM_TOKEN</span> <span class="string">&#125;&#125;</span></span><br><span class="line">        <span class="attr">run:</span> <span class="string">lerna</span> <span class="string">exec</span> <span class="string">--concurrency</span> <span class="number">1</span> <span class="string">--</span> <span class="string">npx</span> <span class="string">--no-install</span> <span class="string">semantic-release</span></span><br><span class="line"></span><br><span class="line">      <span class="comment"># 发布失败通知内部开发群</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Release</span> <span class="string">failed</span> <span class="string">ding</span> <span class="string">talk</span> <span class="string">dev</span> <span class="string">group</span> <span class="string">notify</span></span><br><span class="line">        <span class="attr">if:</span> <span class="string">$&#123;&#123;</span> <span class="string">failure()</span> <span class="string">&#125;&#125;</span></span><br><span class="line">        <span class="attr">uses:</span> <span class="string">zcong1993/actions-ding@master</span></span><br><span class="line">        <span class="attr">with:</span></span><br><span class="line">          <span class="attr">dingToken:</span> <span class="string">$&#123;&#123;</span> <span class="string">secrets.DING_TALK_ACCESS_TOKEN</span> <span class="string">&#125;&#125;</span></span><br><span class="line">          <span class="attr">ignoreError:</span> <span class="literal">true</span></span><br><span class="line">          <span class="attr">body:</span> <span class="string">|</span></span><br><span class="line"><span class="string">            &#123;</span></span><br><span class="line"><span class="string">              &quot;msgtype&quot;: &quot;link&quot;,</span></span><br><span class="line"><span class="string">              &quot;link&quot;: &#123;</span></span><br><span class="line"><span class="string">                &quot;title&quot;: &quot;🚨 自动发布失败&quot;,</span></span><br><span class="line"><span class="string">                &quot;text&quot;: &quot;🔗 请点击链接查看具体原因，及时修复，尝试点击右上角 [Re-run all jobs] 重试，或手动发布 🚑&quot;,</span></span><br><span class="line"><span class="string">                &quot;messageUrl&quot;: &quot;https://github.com/antvis/S2/actions/workflows/auto-release.yml&quot;,</span></span><br><span class="line"><span class="string">                &quot;picUrl&quot;: &quot;https://gw.alipayobjects.com/zos/antfincdn/JxgObjrPo/dde3c2cf-ce2f-45ab-90a7-9f5cce889227.png&quot;</span></span><br><span class="line"><span class="string">              &#125;</span></span><br><span class="line"><span class="string">            &#125;</span></span><br><span class="line"><span class="string"></span></span><br></pre></td></tr></table></figure>

<p>:::warning<br>为什么不直接在本地发布，而是要通过 CI ?<br>:::<br>:::success</p>
<ol>
<li>本地需要配置 npm 和 github 的 TOKEN, 组内小伙伴都需要配置，很麻烦，而把 TOKEN 统一配置在 CI 中，则可解决多人发布的问题</li>
<li>通过 CI, 可以保证 lint , test 全部通过后，再进行发布，同时可以避免由于每个人的环境差异，本地 node_modules 差异造成的打包产物不同</li>
<li>发布过程更直观，每个人都可以在控制台看到<br>:::<br><a name="OgMpf"></a></li>
</ol>
<h4 id="5-2-发布分支"><a href="#5-2-发布分支" class="headerlink" title="5.2 发布分支"></a>5.2 发布分支</h4><p>对于正式版发布，为什么是 <code>latest</code>分支，而不是直接使用 <code>master</code>, 原因是在自动发布后，semantice-release 会将生成的 <code>changelog</code>提交上来<br /><img src="https://intranetproxy.alipay.com/skylark/lark/0/2022/png/6356643/1665565504893-ea16f2af-5899-40bd-9b00-5f2d714e9f61.png#clientId=u2d9663fb-26e8-4&crop=0&crop=0&crop=1&crop=1&errorMessage=unknown%20error&from=paste&height=559&id=u0fa839d1&margin=%5Bobject%20Object%5D&name=image.png&originHeight=1117&originWidth=1456&originalType=binary&ratio=1&rotation=0&showTitle=false&size=234338&status=error&style=none&taskId=u3ec2b507-d8ef-4f44-96e6-e9b152793cb&title=&width=728" alt="image.png"></p>
<p>由于 <code>master</code>是 <strong>保护分支，</strong>无法直接 push 代码，也可以取消 <code>master</code> 的保护策略，在安全性以及各种权衡之下，最终选中了这种取消救国的方式，唯一的弊端就是，在发布 <code>alpha</code>和 <code>beta</code>版本时，需要同时同步一下 <code>latest （同步 Tag)</code>和 <code>master （同步代码）</code> 分支<br /><img src="https://intranetproxy.alipay.com/skylark/lark/0/2022/png/6356643/1665565788225-06af5df6-34b8-4314-ac3d-9e02760f337a.png#clientId=u2d9663fb-26e8-4&crop=0&crop=0&crop=1&crop=1&errorMessage=unknown%20error&from=paste&height=114&id=uc8fbb56d&margin=%5Bobject%20Object%5D&name=image.png&originHeight=227&originWidth=821&originalType=binary&ratio=1&rotation=0&showTitle=false&size=139829&status=error&style=none&taskId=uf11dd747-b5d3-462b-9fe6-f8023688a95&title=&width=410.5" alt="image.png"><br /><img src="https://intranetproxy.alipay.com/skylark/lark/0/2022/png/6356643/1665565570143-7b1ae3e0-80d1-4819-b6b4-fad067c2252a.png#clientId=u2d9663fb-26e8-4&crop=0&crop=0&crop=1&crop=1&errorMessage=unknown%20error&from=paste&height=449&id=ueeb407fb&margin=%5Bobject%20Object%5D&name=image.png&originHeight=898&originWidth=895&originalType=binary&ratio=1&rotation=0&showTitle=false&size=126823&status=error&style=none&taskId=ua660e6e5-a6d7-4d3c-bd4f-63de945aebe&title=&width=447.5" alt="image.png"></p>
<p><a name="FuhHZ"></a></p>
<h4 id="5-3-发布通知"><a href="#5-3-发布通知" class="headerlink" title="5.3 发布通知"></a>5.3 发布通知</h4><p>同理，我们使用 Action 监听  <code>release</code> 的 <code>released</code> 事件，再调用 钉钉 API 即可</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">name:</span> <span class="string">🎉</span> <span class="string">Release</span> <span class="string">Notify</span></span><br><span class="line"></span><br><span class="line"><span class="attr">on:</span></span><br><span class="line">  <span class="attr">release:</span></span><br><span class="line">    <span class="comment"># published: latest release 和 pre release 都会触发</span></span><br><span class="line">    <span class="comment"># prereleased: 只有 pre release 触发</span></span><br><span class="line">    <span class="comment"># released: 只有 latest release 触发</span></span><br><span class="line">    <span class="attr">types:</span> [<span class="string">prereleased</span>]</span><br><span class="line"></span><br><span class="line"><span class="attr">jobs:</span></span><br><span class="line">  <span class="attr">notify:</span></span><br><span class="line">    <span class="attr">runs-on:</span> <span class="string">ubuntu-latest</span></span><br><span class="line">    <span class="attr">steps:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Sleep</span> <span class="string">10s</span></span><br><span class="line">        <span class="attr">uses:</span> <span class="string">juliangruber/sleep-action@v1</span></span><br><span class="line">        <span class="attr">with:</span></span><br><span class="line">          <span class="attr">time:</span> <span class="string">10s</span></span><br><span class="line"></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Pre</span> <span class="string">Release</span> <span class="string">Notify</span></span><br><span class="line">        <span class="attr">uses:</span> <span class="string">visiky/dingtalk-release-notify@main</span></span><br><span class="line">        <span class="attr">with:</span></span><br><span class="line">          <span class="attr">DING_TALK_TOKEN:</span> <span class="string">$&#123;&#123;</span> <span class="string">secrets.DING_TALK_ACCESS_TOKEN</span> <span class="string">&#125;&#125;</span></span><br><span class="line">          <span class="attr">notify_title:</span> <span class="string">&#x27;🎉 &#123;release_tag&#125; 发布 🎉&#x27;</span></span><br><span class="line">          <span class="attr">notify_body:</span> <span class="string">&#x27;## &#123; title &#125; &lt;hr /&gt; ![preview](https://gw.alipayobjects.com/zos/antfincdn/ISzgBCtgR/2c5c4aaa-4f40-46f7-8f6b-427fa9ff07bb.png) &lt;hr /&gt; &#123; body &#125; &lt;hr /&gt;&#x27;</span></span><br><span class="line">          <span class="attr">notify_footer:</span> <span class="string">&#x27;&gt; 前往 [**AntV/S2 Releases**](&#123; release_url &#125;) 查看完整信息。&#x27;</span></span><br><span class="line">          <span class="attr">at_all:</span> <span class="literal">false</span></span><br><span class="line">          <span class="attr">enable_prerelease:</span> <span class="literal">true</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><img src="https://intranetproxy.alipay.com/skylark/lark/0/2022/png/6356643/1665566099275-defb2677-3f5e-4726-905e-a7ae1ac7d65e.png#clientId=u2d9663fb-26e8-4&crop=0&crop=0&crop=1&crop=1&errorMessage=unknown%20error&from=paste&height=163&id=u56d71254&margin=%5Bobject%20Object%5D&name=image.png&originHeight=325&originWidth=455&originalType=binary&ratio=1&rotation=0&showTitle=false&size=105462&status=error&style=none&taskId=u1d78c56f-b934-42cc-a4c4-e3cf9625bf8&title=&width=227.5" alt="image.png"><br />同时，action 支持 job 依赖，即一个 action 执行完成后，再执行另外一个，我们可以利用这个特性将 action 解耦，不然全部写在一个文件，太乱，不易维护</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">name:</span> <span class="string">🚀</span> <span class="string">After</span> <span class="string">the</span> <span class="string">release</span> <span class="string">is</span> <span class="string">successful</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 自动发布 action 执行完成后再执行 （无论成功失败都会执行）</span></span><br><span class="line"><span class="attr">on:</span></span><br><span class="line">  <span class="attr">workflow_run:</span></span><br><span class="line">    <span class="attr">workflows:</span> [<span class="string">&quot;🚀 Auto Release&quot;</span>]</span><br><span class="line">    <span class="attr">branches:</span> [<span class="string">latest</span>] <span class="comment"># 只有正式版发布才同步 changelog 和 lock</span></span><br><span class="line">    <span class="attr">types:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">completed</span></span><br><span class="line"></span><br><span class="line"><span class="attr">jobs:</span></span><br><span class="line">  <span class="attr">sync-site-lock:</span></span><br><span class="line">    <span class="attr">runs-on:</span> <span class="string">ubuntu-latest</span></span><br><span class="line">    <span class="comment"># 自动发布成功后</span></span><br><span class="line">    <span class="attr">if:</span> <span class="string">github.event.workflow_run.conclusion</span> <span class="string">==</span> <span class="string">&#x27;success&#x27;</span></span><br><span class="line">    <span class="attr">steps:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">uses:</span> <span class="string">actions/checkout@v3</span></span><br><span class="line"></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Use</span> <span class="string">Node.js</span> <span class="number">16</span></span><br><span class="line">        <span class="attr">uses:</span> <span class="string">actions/setup-node@v3</span></span><br><span class="line">        <span class="attr">with:</span></span><br><span class="line">          <span class="attr">node-version:</span> <span class="number">16</span></span><br><span class="line">          <span class="attr">cache:</span> <span class="string">&#x27;yarn&#x27;</span></span><br><span class="line"></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Git</span> <span class="string">bootstrap</span></span><br><span class="line">        <span class="attr">run:</span> <span class="string">|</span></span><br><span class="line"><span class="string">          git config --global user.name &#x27;Jinke Li&#x27;</span></span><br><span class="line"><span class="string">          git config --global user.email &#x27;a1231236677287@163.com&#x27;</span></span><br><span class="line"><span class="string">          git remote set-url origin https://x-access-token:$&#123;GITHUB_TOKEN&#125;@github.com/$GITHUB_REPOSITORY</span></span><br><span class="line"><span class="string"></span>        <span class="attr">env:</span></span><br><span class="line">          <span class="attr">GITHUB_TOKEN:</span> <span class="string">$&#123;&#123;</span> <span class="string">secrets.JINKE_GITHUB_TOKEN</span> <span class="string">&#125;&#125;</span></span><br><span class="line"></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Checkout</span> <span class="string">branch</span></span><br><span class="line">        <span class="attr">run:</span> <span class="string">|</span></span><br><span class="line"><span class="string">          git checkout -b chore-sync</span></span><br><span class="line"><span class="string">          git fetch --all</span></span><br><span class="line"><span class="string">          git merge origin/latest --squash</span></span><br><span class="line"><span class="string"></span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Sleep</span> <span class="string">5m</span></span><br><span class="line">        <span class="attr">uses:</span> <span class="string">juliangruber/sleep-action@v1</span></span><br><span class="line">        <span class="attr">with:</span></span><br><span class="line">          <span class="attr">time:</span> <span class="string">20m</span></span><br><span class="line"></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Install</span> <span class="string">dependencies</span></span><br><span class="line">        <span class="attr">run:</span> <span class="string">yarn</span></span><br><span class="line"></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Sync</span> <span class="string">Locale</span> <span class="string">site</span> <span class="string">@antv/s2</span> <span class="string">and</span> <span class="string">@antv/s2-react</span> <span class="string">lock</span></span><br><span class="line">        <span class="attr">run:</span> <span class="string">yarn</span> <span class="string">site:sync-s2-lock</span></span><br><span class="line"></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Push</span> <span class="string">lock</span></span><br><span class="line">        <span class="attr">run:</span> <span class="string">|</span></span><br><span class="line"><span class="string">          git add .</span></span><br><span class="line"><span class="string">          git commit -m &quot;chore: 🤖 更新 lock 和 changelog 文件&quot; -n</span></span><br><span class="line"><span class="string">          git push origin chore-sync --no-verify -f</span></span><br><span class="line"><span class="string"></span></span><br><span class="line">      <span class="comment"># 使用官方的 github cli 便捷的创建 pr</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Create</span> <span class="string">PR</span></span><br><span class="line">        <span class="attr">run:</span> <span class="string">|</span></span><br><span class="line"><span class="string">          gh pr create --title &quot;chore: 🤖 更新 lock 和 changelog 文件&quot; --body &quot;🤖 由 [[Sync Site S2 Lock And Changelog With PR](https://github.com/antvis/S2/blob/master/.github/workflows/sync-site-lock-changelog-with-pr.yml)] action 自动创建。&quot;</span></span><br><span class="line"><span class="string"></span>        <span class="attr">env:</span></span><br><span class="line">          <span class="attr">GITHUB_TOKEN:</span> <span class="string">$&#123;&#123;</span> <span class="string">secrets.JINKE_GITHUB_TOKEN</span> <span class="string">&#125;&#125;</span></span><br><span class="line"></span><br><span class="line">      <span class="comment"># 部署官网</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Delpoy</span> <span class="string">Site</span></span><br><span class="line">        <span class="attr">run:</span> <span class="string">yarn</span> <span class="string">site:deploy</span></span><br><span class="line"></span><br><span class="line">      <span class="comment"># 失败通知</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">🔊</span> <span class="string">Delpoy</span> <span class="string">failed</span> <span class="string">notify</span></span><br><span class="line">        <span class="attr">if:</span> <span class="string">$&#123;&#123;</span> <span class="string">failure()</span> <span class="string">&#125;&#125;</span></span><br><span class="line">        <span class="attr">uses:</span> <span class="string">zcong1993/actions-ding@master</span></span><br><span class="line">        <span class="attr">with:</span></span><br><span class="line">          <span class="attr">dingToken:</span> <span class="string">$&#123;&#123;</span> <span class="string">secrets.DING_TALK_ACCESS_TOKEN</span> <span class="string">&#125;&#125;</span></span><br><span class="line">          <span class="attr">ignoreError:</span> <span class="literal">true</span></span><br><span class="line">          <span class="attr">body:</span> <span class="string">|</span></span><br><span class="line"><span class="string">            &#123;</span></span><br><span class="line"><span class="string">              &quot;msgtype&quot;: &quot;link&quot;,</span></span><br><span class="line"><span class="string">              &quot;link&quot;: &#123;</span></span><br><span class="line"><span class="string">                &quot;title&quot;: &quot;🚨 官网部署失败&quot;,</span></span><br><span class="line"><span class="string">                &quot;text&quot;: &quot;🔗 请点击链接查看具体原因，尝试点击右上角 [Re-run all jobs] 重试，或者手动部署 🚑&quot;,</span></span><br><span class="line"><span class="string">                &quot;messageUrl&quot;: &quot;https://github.com/antvis/S2/actions/workflows/release-success.yml&quot;,</span></span><br><span class="line"><span class="string">                &quot;picUrl&quot;: &quot;https://gw.alipayobjects.com/zos/antfincdn/JxgObjrPo/dde3c2cf-ce2f-45ab-90a7-9f5cce889227.png&quot;</span></span><br><span class="line"><span class="string">              &#125;</span></span><br><span class="line"><span class="string">            &#125;</span></span><br><span class="line"><span class="string"></span></span><br></pre></td></tr></table></figure>

<p><a name="kApzH"></a></p>
<h4 id="5-4-自动部署官网"><a href="#5-4-自动部署官网" class="headerlink" title="5.4 自动部署官网"></a>5.4 自动部署官网</h4><p>我们可以使用 Action 的 <code>workflow_run</code> 属性，在指定 Action 执行完后再执行操作，然后部署官网</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">name:</span> <span class="string">🚀</span> <span class="string">After</span> <span class="string">the</span> <span class="string">release</span> <span class="string">is</span> <span class="string">successful</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 自动发布 action 执行完成后再执行 （无论成功失败都会执行）</span></span><br><span class="line"><span class="attr">on:</span></span><br><span class="line">  <span class="attr">workflow_run:</span></span><br><span class="line">    <span class="attr">workflows:</span> [<span class="string">&quot;🚀 Auto Release&quot;</span>]</span><br><span class="line">    <span class="attr">branches:</span> [<span class="string">latest</span>] <span class="comment"># 只有正式版发布才同步 changelog 和 lock</span></span><br><span class="line">    <span class="attr">types:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">completed</span></span><br><span class="line"></span><br><span class="line"><span class="attr">jobs:</span></span><br><span class="line">  <span class="attr">sync-site-lock:</span></span><br><span class="line">    <span class="attr">runs-on:</span> <span class="string">ubuntu-latest</span></span><br><span class="line">    <span class="comment"># 自动发布成功后</span></span><br><span class="line">    <span class="attr">if:</span> <span class="string">github.event.workflow_run.conclusion</span> <span class="string">==</span> <span class="string">&#x27;success&#x27;</span></span><br><span class="line">    <span class="attr">steps:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">uses:</span> <span class="string">actions/checkout@v3</span></span><br><span class="line"></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Use</span> <span class="string">Node.js</span> <span class="number">16</span></span><br><span class="line">        <span class="attr">uses:</span> <span class="string">actions/setup-node@v3</span></span><br><span class="line">        <span class="attr">with:</span></span><br><span class="line">          <span class="attr">node-version:</span> <span class="number">16</span></span><br><span class="line">          <span class="attr">cache:</span> <span class="string">&#x27;yarn&#x27;</span></span><br><span class="line"></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Git</span> <span class="string">bootstrap</span></span><br><span class="line">        <span class="attr">run:</span> <span class="string">|</span></span><br><span class="line"><span class="string">          git config --global user.name &#x27;Jinke Li&#x27;</span></span><br><span class="line"><span class="string">          git config --global user.email &#x27;a1231236677287@163.com&#x27;</span></span><br><span class="line"><span class="string">          git remote set-url origin https://x-access-token:$&#123;GITHUB_TOKEN&#125;@github.com/$GITHUB_REPOSITORY</span></span><br><span class="line"><span class="string"></span>        <span class="attr">env:</span></span><br><span class="line">          <span class="attr">GITHUB_TOKEN:</span> <span class="string">$&#123;&#123;</span> <span class="string">secrets.JINKE_GITHUB_TOKEN</span> <span class="string">&#125;&#125;</span></span><br><span class="line"></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Checkout</span> <span class="string">branch</span></span><br><span class="line">        <span class="attr">run:</span> <span class="string">|</span></span><br><span class="line"><span class="string">          git checkout -b chore-sync</span></span><br><span class="line"><span class="string">          git fetch --all</span></span><br><span class="line"><span class="string">          git merge origin/latest --squash</span></span><br><span class="line"><span class="string"></span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Sleep</span> <span class="string">5m</span></span><br><span class="line">        <span class="attr">uses:</span> <span class="string">juliangruber/sleep-action@v1</span></span><br><span class="line">        <span class="attr">with:</span></span><br><span class="line">          <span class="attr">time:</span> <span class="string">20m</span></span><br><span class="line"></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Install</span> <span class="string">dependencies</span></span><br><span class="line">        <span class="attr">run:</span> <span class="string">yarn</span></span><br><span class="line"></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Sync</span> <span class="string">Locale</span> <span class="string">site</span> <span class="string">@antv/s2</span> <span class="string">and</span> <span class="string">@antv/s2-react</span> <span class="string">lock</span></span><br><span class="line">        <span class="attr">run:</span> <span class="string">yarn</span> <span class="string">site:sync-s2-lock</span></span><br><span class="line"></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Push</span> <span class="string">lock</span></span><br><span class="line">        <span class="attr">run:</span> <span class="string">|</span></span><br><span class="line"><span class="string">          git add .</span></span><br><span class="line"><span class="string">          git commit -m &quot;chore: 🤖 更新 lock 和 changelog 文件&quot; -n</span></span><br><span class="line"><span class="string">          git push origin chore-sync --no-verify -f</span></span><br><span class="line"><span class="string"></span></span><br><span class="line">      <span class="comment"># 使用官方的 github cli 便捷的创建 pr</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Create</span> <span class="string">PR</span></span><br><span class="line">        <span class="attr">run:</span> <span class="string">|</span></span><br><span class="line"><span class="string">          gh pr create --title &quot;chore: 🤖 更新 lock 和 changelog 文件&quot; --body &quot;🤖 由 [[Sync Site S2 Lock And Changelog With PR](https://github.com/antvis/S2/blob/master/.github/workflows/sync-site-lock-changelog-with-pr.yml)] action 自动创建。&quot;</span></span><br><span class="line"><span class="string"></span>        <span class="attr">env:</span></span><br><span class="line">          <span class="attr">GITHUB_TOKEN:</span> <span class="string">$&#123;&#123;</span> <span class="string">secrets.JINKE_GITHUB_TOKEN</span> <span class="string">&#125;&#125;</span></span><br><span class="line"></span><br><span class="line">      <span class="comment"># 部署官网</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Delpoy</span> <span class="string">Site</span></span><br><span class="line">        <span class="attr">run:</span> <span class="string">yarn</span> <span class="string">site:deploy</span></span><br><span class="line"></span><br><span class="line">      <span class="comment"># 失败通知</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">🔊</span> <span class="string">Delpoy</span> <span class="string">failed</span> <span class="string">notify</span></span><br><span class="line">        <span class="attr">if:</span> <span class="string">$&#123;&#123;</span> <span class="string">failure()</span> <span class="string">&#125;&#125;</span></span><br><span class="line">        <span class="attr">uses:</span> <span class="string">zcong1993/actions-ding@master</span></span><br><span class="line">        <span class="attr">with:</span></span><br><span class="line">          <span class="attr">dingToken:</span> <span class="string">$&#123;&#123;</span> <span class="string">secrets.DING_TALK_ACCESS_TOKEN</span> <span class="string">&#125;&#125;</span></span><br><span class="line">          <span class="attr">ignoreError:</span> <span class="literal">true</span></span><br><span class="line">          <span class="attr">body:</span> <span class="string">|</span></span><br><span class="line"><span class="string">            &#123;</span></span><br><span class="line"><span class="string">              &quot;msgtype&quot;: &quot;link&quot;,</span></span><br><span class="line"><span class="string">              &quot;link&quot;: &#123;</span></span><br><span class="line"><span class="string">                &quot;title&quot;: &quot;🚨 官网部署失败&quot;,</span></span><br><span class="line"><span class="string">                &quot;text&quot;: &quot;🔗 请点击链接查看具体原因，尝试点击右上角 [Re-run all jobs] 重试，或者手动部署 🚑&quot;,</span></span><br><span class="line"><span class="string">                &quot;messageUrl&quot;: &quot;https://github.com/antvis/S2/actions/workflows/release-success.yml&quot;,</span></span><br><span class="line"><span class="string">                &quot;picUrl&quot;: &quot;https://gw.alipayobjects.com/zos/antfincdn/JxgObjrPo/dde3c2cf-ce2f-45ab-90a7-9f5cce889227.png&quot;</span></span><br><span class="line"><span class="string">              &#125;</span></span><br><span class="line"><span class="string">            &#125;</span></span><br><span class="line"><span class="string"></span></span><br></pre></td></tr></table></figure>

<p><img src="https://intranetproxy.alipay.com/skylark/lark/0/2022/png/6356643/1665566456897-31ba8590-52ce-4dd1-9f96-d883727cdd82.png#clientId=u2d9663fb-26e8-4&crop=0&crop=0&crop=1&crop=1&errorMessage=unknown%20error&from=paste&height=74&id=uf2fecaa0&margin=%5Bobject%20Object%5D&name=image.png&originHeight=148&originWidth=426&originalType=binary&ratio=1&rotation=0&showTitle=false&size=19436&status=error&style=none&taskId=u6b0ae879-da1a-45f2-9eb0-fd569fa12b3&title=&width=213" alt="image.png"><br />更多细节请查看 <a target="_blank" rel="noopener" href="https://yuque.antfin.com/spreadsheet/garqs6/hednl5">🚀 发布规范</a></p>
<p><a name="wSVPf"></a></p>
<h3 id="6-🔭-总结"><a href="#6-🔭-总结" class="headerlink" title="6. 🔭 总结"></a>6. 🔭 总结</h3><p>上述很多 Action ,  主要参考 (chao xi) 了 ant-design 仓库 的 <a target="_blank" rel="noopener" href="https://github.com/ant-design/ant-design/tree/master/.github/workflows">workflows 配置</a> , 通过上面简单的介绍，我们可以了解到，借助强大的 Github Action, 我们实现</p>
<ul>
<li>Issue 的自动回复</li>
<li>PR 的自动回复，自动通知</li>
<li>定时任务管理 Issue</li>
<li>semantice-release 自动发布</li>
<li>自动部署官网</li>
</ul>
<p>如果看完这篇文章你有所收获，欢迎给我们的 <a href="https://link.juejin.cn/?target=https://github.com/antvis/s2">仓库</a> <a href="https://link.juejin.cn/?target=https://github.com/antvis/s2">Star⭐️</a> 鼓励。</p>
<p>S2 的相关链接：</p>
<ul>
<li><a href="https://link.juejin.cn/?target=https://github.com/antvis/s2">GitHub</a></li>
<li><a href="https://link.juejin.cn/?target=https://s2.antv.vision/">官网</a></li>
<li>核心层：<a href="https://link.juejin.cn/?target=https://www.npmjs.com/package/@antv/s2">@antv/s2</a></li>
<li>组件层：<a href="https://link.juejin.cn/?target=https://www.npmjs.com/package/@antv/s2-react">@antv/s2-react</a></li>
</ul>
<p><a name="UdVE1"></a></p>
<h3 id="7-🔗-参考链接"><a href="#7-🔗-参考链接" class="headerlink" title="7. 🔗 参考链接"></a>7. 🔗 参考链接</h3><ul>
<li><a target="_blank" rel="noopener" href="https://github.com/ant-design/ant-design/tree/master/.github/workflows">ant-design workflows</a></li>
<li><a target="_blank" rel="noopener" href="https://yuque.antfin.com/spreadsheet/garqs6">S2 开发规范</a></li>
<li><a target="_blank" rel="noopener" href="https://yuque.antfin.com/spreadsheet/garqs6/mowkwq">S2 Labels 使用指南</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/actions-cool/issues-helper">actions-cool/issues-helper</a></li>
</ul>
</div><div class="post-footer"><div class="meta"><div class="info"><i class="fa fa-sun-o"></i><span class="date">2022-10-19</span><i class="fa fa-comment-o"></i><a href="/2022/10/19/%E4%BD%BF%E7%94%A8-Github-Action-%E6%9D%A5%E5%81%9A%E8%87%AA%E5%8A%A8%E5%8C%96/#comments">评论</a><i class="fa fa-tag"></i><a class="tag" href="/tags/Github-Action/" title="Github Action">Github Action </a></div></div></div></div><div style="margin:30px"><span class="leancloud-visitors" id="/2022/10/19/使用-Github-Action-来做自动化/"><span class="post-meta-item-text" style="margin-right:5px">阅读量</span><i class="leancloud-visitors-count">1000000</i></span></div><div class="share"><div class="evernote"><a class="fa fa-bookmark" href="javascript:(function(){EN_CLIP_HOST='http://www.evernote.com';try{var%20x=document.createElement('SCRIPT');x.type='text/javascript';x.src=EN_CLIP_HOST+'/public/bookmarkClipper.js?'+(new%20Date().getTime()/100000);document.getElementsByTagName('head')[0].appendChild(x);}catch(e){location.href=EN_CLIP_HOST+'/clip.action?url='+encodeURIComponent(location.href)+'&amp;title='+encodeURIComponent(document.title);}})();" ref="nofollow" target="_blank"></a></div><div class="weibo"><a class="fa fa-weibo" href="javascript:void((function(s,d,e){try{}catch(e){}var f='http://service.weibo.com/share/share.php?',u=d.location.href,p=['url=',e(u),'&amp;title=',e(d.title),'&amp;appkey=2924220432'].join('');function a(){if(!window.open([f,p].join(''),'mb',['toolbar=0,status=0,resizable=1,width=620,height=450,left=',(s.width-620)/2,',top=',(s.height-450)/2].join('')))u.href=[f,p].join('');};if(/Firefox/.test(navigator.userAgent)){setTimeout(a,0)}else{a()}})(screen,document,encodeURIComponent));"></a></div><div class="twitter"><a class="fa fa-twitter" target="_blank" rel="noopener" href="http://twitter.com/home?status=,https://www.lijinke.cn/2022/10/19/使用-Github-Action-来做自动化/,李金珂的小屋,使用 Github Action 来做自动化,;"></a></div></div><div class="pagination"><ul class="clearfix"><li class="next pagbuttons"><a class="btn" role="navigation" href="/2022/08/09/%E5%A6%82%E4%BD%95%E8%AE%A9%E8%A1%A8%E6%A0%BC%E6%BB%9A%E5%8A%A8%E6%97%B6%E4%B8%8D%E8%A7%A6%E5%8F%91%E6%B5%8F%E8%A7%88%E5%99%A8%E5%9B%9E%E9%80%80/" title="如何让表格滚动时不触发浏览器回退">下一篇</a></li></ul></div><a id="comments"></a><div id="vcomments" style="margin:0 30px;"></div><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="//unpkg.com/valine/dist/Valine.min.js?v=undefined"></script><script>var valine = new Valine({
  el:'#vcomments',
  //- notify: || false,
  //- verify:|| false,
  notify: true,
  verify: true,
  enableQQ: true,
  recordIP: true,
  app_id:'RBh7EcHesd4twgP5qIos38HM-gzGzoHsz',
  app_key:'f47a9Cg5ea9EVoPSs4KqfE6U',
  placeholder:'留下点什么?',
  path: window.location.pathname,
  avatar:'robohash',
  visitor: true,
})</script></div></div></div></div><script src="/js/jquery.js"></script><script src="/js/jquery-migrate-1.2.1.min.js"></script><script src="/js/jquery.appear.js"></script><script src="https://unpkg.com/darkreader@4.9.32/darkreader.js"></script><script src="/pwa.js"></script><script src="/main.js"></script></body></html>