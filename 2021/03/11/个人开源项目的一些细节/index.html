<!DOCTYPE html><html lang="zh-CN"><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><meta name="author" content="李金珂,jkli@thoughtworks.com"><title>个人开源项目的一些细节 · 李金珂的小屋</title><meta name="description" content="什么是开源项目?在一部分人的眼中, 我想大概就是将源代码开放出来, 放在 Github 之类的平台中
12// index.tsexport const myModule = () =&amp;gt; &amp;#123;&amp;#125;;

1234&amp;#123;  &quot;version&quot;: &quot;0.0.1&quot;,  &quot;name"><meta name="keywords" content="Javascript,Node.js"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-title" content="李金珂的小屋"><meta name="icon" content="/logos/logo_192.png"><meta name="apple-touch-icon" content="/logos/logo_192.png"><meta name="apple-touch-icon-precomposed" content="/logos/logo_192.png"><meta name="apple-touch-startup-image" content="/logos/logo_192.png"><meta name="Alipay:title" content="李金珂的小屋"><meta name="Alipay:imgUrl" content="/logos/logo_192.png"><meta name="Alipay:desc" content="要想学仙术哪能不吃苦"><meta name="renderer" content="webkit"><meta name="theme-color" content="#fff"><link rel="short icon" href="/logos/logo_192.png" type="image/x-icon"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/blog_basic.css"><link rel="stylesheet" href="/css/font-awesome.min.css"><link rel="alternate" type="application/atom+xml" title="ATOM 1.0" href="/atom.xml"><link rel="manifest" href="/manifest.json"><meta name="generator" content="Hexo 4.2.1"></head><body><div class="sidebar animated fadeInDown"><div class="logo-title"><div class="title"><img src="/images/my.jpeg" style="width:127px;border-radius:50%;margin-bottom:20px;"><h3 title=""><a href="/">李金珂的小屋</a></h3><div class="description"><p>要想学仙术,哪能不吃苦</p></div></div></div><ul class="social-links"><li><a href="http://weibo.com/金珂珂珂珂" target="_blank" rel="noopener"><i class="fa fa-weibo"></i></a></li><li><a href="http://github.com/lijinke666" target="_blank" rel="noopener"><i class="fa fa-github"></i></a></li></ul><div class="footer"><a target="_blank" href="/"><span>Theme by</span></a><a href="https://www.caicai.me" target="_blank" rel="noopener"> CaiCai</a><span>&</span><a href="https://github.com/Ben02/hexo-theme-Anatole" target="_blank" rel="noopener"> Ben</a><div class="by_farbox"><a href="https://hexo.io/zh-cn/" target="_blank">Proudly published with Hexo&#65281;</a><a href="http://www.beian.miit.gov.cn/" target="_blank">蜀ICP备17033638号</a></div></div></div><div class="main"><div class="page-top animated fadeInDown"><div class="nav"><li><a href="/">主页</a></li><li><a href="/about">关于</a></li><li><a href="/archives">归档</a></li><li><a href="/links">友情链接</a></li></div><div class="information"><div class="back_btn"><li><a class="fa fa-chevron-left" onclick="window.history.go(-1)"> </a></li></div><div class="avatar"><img src="/images/my.jpeg"></div></div></div><div class="autopagerize_page_element"><div class="content"><div class="post-page"><div class="post animated fadeInDown"><div class="post-title"><h3><a>个人开源项目的一些细节</a></h3></div><div class="post-content"><h3 id="什么是开源项目"><a href="#什么是开源项目" class="headerlink" title="什么是开源项目?"></a>什么是开源项目?</h3><p>在一部分人的眼中, 我想大概就是将源代码开放出来, 放在 Github 之类的平台中</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// index.ts</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> myModule = <span class="function"><span class="params">()</span> =&gt;</span> &#123;&#125;;</span><br></pre></td></tr></table></figure>

<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">"version"</span>: <span class="string">"0.0.1"</span>,</span><br><span class="line">  "name: "test"</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm login</span><br><span class="line">npm publish</span><br></pre></td></tr></table></figure>

<p>光速发布, 然后就没有然后了, 一次性开源.</p>
<p>在另一部分人的眼中, 这是开源项目</p>
<p>// TODO:</p>
<p>从我自己的角度来说, 开源不是 KPI, 不是晋升的方式, 是单纯的兴趣爱好, 一种自我奉献, 不管是几行代码的开源</p>
<p><img src="https://cdn.lijinke.cn/2021-03-11-22-27-58-2021311222759.png" alt="2021-03-11-22-27-58-2021311222759"></p>
<p>还是 Linux 这种复杂,伟大的开源项目, 背后都是作者和所有参与者的辛苦付出, 我理解的开源项目, 代码开源, 只是整个过程中的第一步, 我以我自己维护的 <a href="https://github.com/lijinke666/react-music-player" target="_blank" rel="noopener">react-music-player</a> 为例, 讲述我是如何开发并学习到相关知识点的</p>
<h3 id="我的第一个插件"><a href="#我的第一个插件" class="headerlink" title="我的第一个插件"></a>我的第一个插件</h3><p>作为前端, 背靠 npm 这一个庞大的生态, 站在巨人的肩膀上进行开发, 非常的便捷高效, 而相关模块, 你都可以在 Github 上找到相关的代码, 我编写的第一个开源模块, 是一个 Jquery 实现的 上传插件, 如果你也开发过, 这一句代码你肯定很熟悉, 这是啥, 这是梦开始的地方!</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(<span class="function"><span class="keyword">function</span> (<span class="params">win, $</span>) </span>&#123;&#125;)(<span class="built_in">window</span>, jQuery);</span><br></pre></td></tr></table></figure>

<p>当然, 这种模式很快被淘汰了, 现在都是组件化, 起因是我自己用 React + Node.js 实现了一个博客, 想继承一个播放器, 在 Github 上找了一圈都没有合适的, 所以只有自己实现一个, 单纯从技术实现来说, 实现一个前端的音频播放器很简单,毕竟不用自己编解码, 基于 <code>&lt;audio/&gt;</code> 标签相关的 API 开发即可, 之后的事, 才是打开了新世界的大门</p>
<h3 id="要啥文档-你不知道自己看代码吗"><a href="#要啥文档-你不知道自己看代码吗" class="headerlink" title="要啥文档,你不知道自己看代码吗?"></a>要啥文档,你不知道自己看代码吗?</h3><p>没错, 代码写完了, 你把它发布到了 npm, 也在 Github 创了 repo, 但是这个是开源出去给人家用的, 第一件事就是文档, 没错, 一个 <code>README</code> 差点要了我的老命</p>
<p><img src="https://cdn.lijinke.cn/2021-03-11-22-42-31-2021311224232.png" alt="2021-03-11-22-42-31-2021311224232"></p>
<p>代码是你自己写的, 但是站在其他人的视角, 需要让被人有一个清晰的认识, 所以要有</p>
<ul>
<li>如何安装</li>
<li>如何使用</li>
<li>一图胜前言的预览截图</li>
<li>一些关键信息的 badge</li>
<li>要不要加一些 emoji 让文档看起来好看点</li>
<li>这个东西是干啥用的</li>
<li>详细的 API 文档</li>
<li>如何定制化</li>
<li>如何贡献代码</li>
<li>许可证是啥</li>
</ul>
<p>如果你自己也写过, 你会明白写清楚这些不是一时半会能完成的</p>
<p>这些网站, 可以生成一些 badge, 展示在 README 上</p>
<ul>
<li><a href="https://shields.io/" target="_blank" rel="noopener">https://shields.io/</a></li>
<li><a href="https://visitor-badge.glitch.me/#docs" target="_blank" rel="noopener">https://visitor-badge.glitch.me/#docs</a></li>
</ul>
<p>当然,也有大神提供了 README 生成器: <a href="https://github.com/kefranabg/readme-md-generator" target="_blank" rel="noopener">readme-md-generator</a>, 可以用它来生成一份精美的文档</p>
<p>这个网站可以选择一些精美的 emoji, 用 <a href="https://emoji.svend.cc/" target="_blank" rel="noopener">它</a> 来装饰你的 README</p>
<p>弄完了这些, 还需要一个可以在线访问的链接, 用 gh pages 即可</p>
<p><img src="https://cdn.lijinke.cn/2021-03-11-23-03-08-20213112338.png" alt="2021-03-11-23-03-08-20213112338"></p>
<p>对于我这个播放器, 我是自己写了一些 demo 页的代码, 对于常规的项目来说, 可以选择开源的文档生成器, 比如</p>
<ul>
<li>尤大的 <a href="https://vuepress.vuejs.org/" target="_blank" rel="noopener">vuepress</a></li>
<li>老牌的 <a href="https://www.gitbook.com/" target="_blank" rel="noopener">gitbook</a></li>
<li>或者是 facebook 的 <a href="https://github.com/facebook/docusaurus" target="_blank" rel="noopener">docusaurus</a></li>
<li>再或者是最近推出的 <a href="https://d.umijs.org/" target="_blank" rel="noopener">dumi</a>, 个人比较喜欢这个</li>
<li>…</li>
</ul>
<p><img src="https://cdn.lijinke.cn/2021-03-11-23-07-41-202131123742.png" alt="2021-03-11-23-07-41-202131123742"></p>
<p>选择一个你自己喜欢的文档工具, 然后部署在 gh pages 上, 这样你就有了一个像那么回事的官网, 当然 gh pages 是国外镜像, 速度可能偏慢, 你也可以选择部署在 类似于 <code>gitee</code> 之类的国内镜像上</p>
<h3 id="现代的工程化"><a href="#现代的工程化" class="headerlink" title="现代的工程化"></a>现代的工程化</h3><p>翻看一些知名开源项目, 你会发现工程化相关的配置文件很多, 我的一个小小的播放器, 配置文件就有这么多</p>
<p><img src="https://cdn.lijinke.cn/2021-03-11-22-48-36-2021311224837.png" alt="2021-03-11-22-48-36-2021311224837"></p>
<ul>
<li>必备的格式化: prettier</li>
<li>静态检查: eslint</li>
<li>单元测试: jest</li>
<li>代码提交格式: commitlint</li>
<li>css 预编译: postcss</li>
<li>自动发布: semantic-release</li>
<li>打包编译: webpack, babel</li>
<li>提交检查: lint-staged, husky</li>
<li>css 检查: stylelint</li>
<li>单元测试覆盖率: codecov</li>
<li>变更说明: ChangeLog</li>
</ul>
<p>所有一套配置下来, 然后再编写 npm scripts, 写一些常用的工作流, 比如 本地开发, 部署打包 等等, 作为开源组件, 通常还会提供 UMD, Commonjs, ES Module 等模块, 供用户选择, 打包工具也是多种多样, 比如 ts 就直接用 tsc, 也可以用 babel, rollup 等等… 有时候你会感叹前端生态百花齐放是不是一件坏事 :)</p>
<p><img src="https://cdn.lijinke.cn/2021-03-11-23-11-25-2021311231126.png" alt="2021-03-11-23-11-25-2021311231126"></p>
<h3 id="第一个-Issue"><a href="#第一个-Issue" class="headerlink" title="第一个 Issue"></a>第一个 Issue</h3><p>叮~, 有一天, 你在路上, 邮件通知你, 你的开源项目收到了一个 Issue, 第一个 Issue, 意味着你的项目有人关注, 有人使用了, 你急冲冲的打开电脑查看, 发现问题没有说明具体原因, 什么版本, 报错是啥, 总之就是什么有用的信息都没有, 接下来就是漫长的沟通交流, 这时候, Issue Template 就该登场了, 在根目录新建 <code>.github/ISSUE_TEMPLATE</code> 就可以预设模板, 比如我的就是</p>
<p><img src="https://cdn.lijinke.cn/2021-03-11-23-20-50-2021311232051.png" alt="2021-03-11-23-20-50-2021311232051"></p>
<p>通过模板, 可以减少很多无意义的沟通, 提高效率, 不然真的很心累, 但是事情不是这么简单, 因为世界上有这样一群人: “你尽管设置模板, 我按照你的要求填算我输”, 是的, 随便翻几个知名开源项目的 Issue, 你都会发现这样的现象, 比如 <code>Ant Design</code> 随便找一个, 贴一段代码, 还不是 md 格式的, 除此之外没有任何信息, 真的非常蛋疼</p>
<p><img src="https://cdn.lijinke.cn/2021-03-11-23-24-24-2021311232425.png" alt="2021-03-11-23-24-24-2021311232425"></p>
<p>对于我这种播放器项目还好, 可能一个月最多一两个 Issue, 无所谓, 对于其他大型项目来说, 这种对维护者来说是很累的, 所以通常都用机器人的方式自动关闭这种 Issue. “你尽管提,回答你算我输”~</p>
<h3 id="第一个-PR"><a href="#第一个-PR" class="headerlink" title="第一个 PR"></a>第一个 PR</h3><p>叮~, 有一天, 你在路上, 邮件又通知你了, 你的开源项目收到了一个 PR: “我艹, 牛逼啊”, 打开电脑一看, 好家伙, 原来是机器人, 帮我更新依赖, 白高兴一场</p>
<p><img src="https://cdn.lijinke.cn/2021-03-11-23-29-04-202131123295.png" alt="2021-03-11-23-29-04-202131123295"></p>
<p>不过也有靠谱的哥们, 直接来了几个 <a href="https://github.com/lijinke666/react-music-player/pull/266" target="_blank" rel="noopener">PR</a>, 还有一个设计师, 直接<a href="https://github.com/lijinke666/react-music-player/pull/24/files" target="_blank" rel="noopener">免费帮我设计 LOGO</a>, 很快啊, 我就把它放在了 README 上, 白嫖美滋滋. 后面,偶尔还是会收到一些 PR, 可能小到一个错别字, 或者一个 ts 定义写错了, 他们的这些暖心的举动, 第一次让我感受到了开源的魅力, 就是那种大家一起贡献, 没有利益关系的感觉, 很爽, 很有成就感</p>
<h3 id="Github-Action-和-App"><a href="#Github-Action-和-App" class="headerlink" title="Github Action 和 App"></a>Github Action 和 App</h3><p>在平时的 Issue,和 PR 管理中, 我们还可以借助 一些 Github Action 和 App 来帮助我们自动化完成一些事, 比如跑 lint,test,打包大小检测, 自动添加 tag 之类的</p>
<p><img src="https://cdn.lijinke.cn/2021-03-11-23-39-04-202131123395.png" alt="2021-03-11-23-39-04-202131123395"> <img src="https://cdn.lijinke.cn/2021-03-11-23-38-35-2021311233836.png" alt="2021-03-11-23-38-35-2021311233836"></p>
<p>比较推荐的是:</p>
<ul>
<li>Codecov: 在每一次的 PR 中输出当前测试覆盖率</li>
<li>Issue-Label Bot: 自动根据你的 Issue 类型进行打标签</li>
<li>codesandbox: 对当前 PR 自动创建一个 code sandbox</li>
<li>Netlify: 提供当前 PR 的一些在线链接 便于预览, 但是超出免费使用量要收费, 比如我这种小项目可以用, 大项目 PR 比较频繁就算了, 推荐 surge</li>
<li>surge-preview: 偏右大神基于 surge 封装的一个 action, 用了都说好</li>
<li>issues-helper: 一个工具 action 集合, 很实用, 比如自动关闭 issue, 添加评论等等</li>
</ul>
<p><img src="https://cdn.lijinke.cn/2021-03-11-23-49-30-2021311234930.png" alt="2021-03-11-23-49-30-2021311234930"></p>
<p><img src="https://cdn.lijinke.cn/2021-03-11-23-43-34-2021311234335.png" alt="2021-03-11-23-43-34-2021311234335"></p>
<p>更多的好东西, 可以在 <a href="https://github.com/marketplace" target="_blank" rel="noopener">https://github.com/marketplace</a> 中自行发现</p>
</div><div class="post-footer"><div class="meta"><div class="info"><i class="fa fa-sun-o"></i><span class="date">2021-03-11</span><i class="fa fa-comment-o"></i><a href="/2021/03/11/%E4%B8%AA%E4%BA%BA%E5%BC%80%E6%BA%90%E9%A1%B9%E7%9B%AE%E7%9A%84%E4%B8%80%E4%BA%9B%E7%BB%86%E8%8A%82/#comments">评论</a><i class="fa fa-tag"></i><a class="tag" href="/tags/开源-Github/" title="开源, Github">开源, Github </a></div></div></div></div><div style="margin:30px"><span class="leancloud-visitors" id="/2021/03/11/个人开源项目的一些细节/"><span class="post-meta-item-text" style="margin-right:5px">阅读量</span><i class="leancloud-visitors-count">1000000</i></span></div><div class="share"><div class="evernote"><a class="fa fa-bookmark" href="javascript:(function(){EN_CLIP_HOST='http://www.evernote.com';try{var%20x=document.createElement('SCRIPT');x.type='text/javascript';x.src=EN_CLIP_HOST+'/public/bookmarkClipper.js?'+(new%20Date().getTime()/100000);document.getElementsByTagName('head')[0].appendChild(x);}catch(e){location.href=EN_CLIP_HOST+'/clip.action?url='+encodeURIComponent(location.href)+'&amp;title='+encodeURIComponent(document.title);}})();" ref="nofollow" target="_blank"></a></div><div class="weibo"><a class="fa fa-weibo" href="javascript:void((function(s,d,e){try{}catch(e){}var f='http://service.weibo.com/share/share.php?',u=d.location.href,p=['url=',e(u),'&amp;title=',e(d.title),'&amp;appkey=2924220432'].join('');function a(){if(!window.open([f,p].join(''),'mb',['toolbar=0,status=0,resizable=1,width=620,height=450,left=',(s.width-620)/2,',top=',(s.height-450)/2].join('')))u.href=[f,p].join('');};if(/Firefox/.test(navigator.userAgent)){setTimeout(a,0)}else{a()}})(screen,document,encodeURIComponent));"></a></div><div class="twitter"><a class="fa fa-twitter" href="http://twitter.com/home?status=,https://www.lijinke.cn/2021/03/11/个人开源项目的一些细节/,李金珂的小屋,个人开源项目的一些细节,;" target="_blank" rel="noopener"></a></div></div><div class="pagination"><ul class="clearfix"><li class="next pagbuttons"><a class="btn" role="navigation" href="/2021/01/19/2020%E5%B9%B4%E7%BB%88%E7%BB%88%E7%BB%93/" title="2020年终总结">下一篇</a></li></ul></div><a id="comments"></a><div id="vcomments" style="margin:0 30px;"></div><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="//cdn.jsdelivr.net/gh/xcss/valine@v1.4.14/dist/Valine.min.js?v=undefined"></script><script>var valine = new Valine({
  el:'#vcomments',
  //- notify:true || false,
  //- verify:true|| false,
  notify: true,
  verify: true,
  enableQQ: true,
  recordIP: true,
  app_id:'RBh7EcHesd4twgP5qIos38HM-gzGzoHsz',
  app_key:'f47a9Cg5ea9EVoPSs4KqfE6U',
  placeholder:'留下点什么?',
  path: window.location.pathname,
  avatar:'robohash',
  visitor: true,
})</script></div></div></div></div><script src="/js/jquery.js"></script><script src="/js/jquery-migrate-1.2.1.min.js"></script><script src="/js/jquery.appear.js"></script><script src="/pwa.js"></script><script src="/main.js"></script></body></html>