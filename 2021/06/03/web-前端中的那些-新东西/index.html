<!DOCTYPE html><html lang="zh-CN"><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><meta name="author" content="李金珂,jinke.li666@gmail.com"><title>web 前端中的那些"新东西" · 李金珂的小屋</title><meta name="description" content="背景Web 前端发展至今，每年都有海量的新东西出来，不管是前沿的技术方向，还是各大浏览器厂商新支持的特性，又或是 ECMA 每年的新标准，内容之多，迭代速度之快，每个人并不能完全了解所有的东西，写这篇文章的动机就是我在学习的过程中，发现很多有意思的，或者从来没听说的特性，一看才发现，原来这玩意已经出"><meta name="keywords" content="Javascript,Node.js"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-title" content="李金珂的小屋"><meta name="icon" content="/logos/logo_192.png"><meta name="apple-touch-icon" content="/logos/logo_192.png"><meta name="apple-touch-icon-precomposed" content="/logos/logo_192.png"><meta name="apple-touch-startup-image" content="/logos/logo_192.png"><meta name="Alipay:title" content="李金珂的小屋"><meta name="Alipay:imgUrl" content="/logos/logo_192.png"><meta name="Alipay:desc" content="要想学仙术哪能不吃苦"><meta name="renderer" content="webkit"><meta name="theme-color" content="#fff"><link rel="short icon" href="/logos/logo_192.png" type="image/x-icon"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/blog_basic.css"><link rel="stylesheet" href="/css/font-awesome.min.css"><link rel="alternate" type="application/atom+xml" title="ATOM 1.0" href="/atom.xml"><link rel="manifest" href="/manifest.json"><meta name="generator" content="Hexo 5.4.0"></head><body><div class="sidebar animated fadeInDown"><div class="logo-title"><div class="title"><img src="/images/my.jpeg" style="width:127px;border-radius:50%;margin-bottom:20px;"><h3 title=""><a href="/">李金珂的小屋</a></h3><div class="description"><p>要想学仙术,哪能不吃苦</p></div></div></div><ul class="social-links"><li><a target="_blank" rel="noopener" href="http://weibo.com/金珂珂珂珂"><i class="fa fa-weibo"></i></a></li><li><a target="_blank" rel="noopener" href="http://github.com/lijinke666"><i class="fa fa-github"></i></a></li></ul><div class="footer"><a target="_blank" href="/"><span>Theme by</span></a><a target="_blank" rel="noopener" href="https://www.caicai.me"> CaiCai</a><span>&</span><a target="_blank" rel="noopener" href="https://github.com/Ben02/hexo-theme-Anatole"> Ben</a><div class="by_farbox"><a href="https://hexo.io/zh-cn/" target="_blank">Proudly published with Hexo&#65281;</a><a href="https://beian.miit.gov.cn/" target="_blank">蜀ICP备17033638号</a></div></div></div><div class="main"><div class="page-top animated fadeInDown"><div class="nav"><li><a href="/">主页</a></li><li><a href="/about">关于</a></li><li><a href="/archives">归档</a></li><li><a href="/links">友情链接</a></li></div><div class="information"><div class="back_btn"><li><a class="fa fa-chevron-left" onclick="window.history.go(-1)"> </a></li></div><div class="avatar"><img src="/images/my.jpeg"></div></div></div><div class="autopagerize_page_element"><div class="content"><div class="post-page"><div class="post animated fadeInDown"><div class="post-title"><h3><a>web 前端中的那些&quot;新东西&quot;</a></h3></div><div class="post-content"><p><a name="wQ457"></a></p>
<h3 id="背景"><a href="#背景" class="headerlink" title="背景"></a>背景</h3><p>Web 前端发展至今，每年都有海量的新东西出来，不管是前沿的技术方向，还是各大浏览器厂商新支持的特性，又或是 ECMA 每年的新标准，内容之多，迭代速度之快，每个人并不能完全了解所有的东西，写这篇文章的动机就是我在学习的过程中，发现很多有意思的，或者从来没听说的特性，一看才发现，原来这玩意已经出来很多年了，它就静静的躺在那里，静静的等你发现，这也是标题为什么的 “新” 要加引号的原因。</p>
<p>我们在业务中埋头苦干的同时，也可以偶尔抬头看一看，说不定每当我们焦头烂额不知道怎么更好的实现手里的需求时，已经有很成熟，优雅的解决方案了</p>
<p>这篇文章就大致讲一下我觉得提有意思的点，不深入代码细节</p>
<p><a name="Lgybd"></a></p>
<h3 id="Grid-布局-Chrome-57"><a href="#Grid-布局-Chrome-57" class="headerlink" title="Grid 布局 Chrome: 57+"></a>Grid 布局 Chrome: 57+</h3><p><img src="/images/2023-12-22-8a81230383ee5a5f8fab7b5171227de431afd43143c678ff76bcddc5fcba620c.png" alt="图 0"></p>
<p><br />flex 布局已经基本普及，不管是 PC 还是 Mobile 都有很广的应用 <br /><a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/CSS/grid">grid 网格布局</a> 是一个更强大的布局语法，具体语法请查看 <a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/CSS/grid">MDN</a>, 直接上一个案例</p>
<ul>
<li>一列显示两个</li>
<li>两端对齐</li>
<li>数值和同环比默认在一行显示，同环比超过两个单独换行展示</li>
<li>上下间距 8px, 左右间距 16px</li>
</ul>
<p>数值单独一行展示</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">grid-column: span <span class="number">2</span>;</span><br></pre></td></tr></table></figure>

<p>使用 flex 局部实现改需求，最大的问题就是由于是两端对齐，当是奇数个指标时，尾元素会跑到如图箭头所示的位置，使用 grid 能更优雅的实现</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">display</span>: grid;</span><br><span class="line">grid-template-<span class="attribute">columns</span>: <span class="built_in">repeat</span>(<span class="number">2</span>, <span class="number">1</span>fr);</span><br><span class="line">grid-gap: <span class="number">8px</span> <span class="number">16px</span>;</span><br><span class="line">gap: <span class="number">8px</span> <span class="number">16px</span>;</span><br><span class="line"><span class="attribute">align-items</span>: flex-end;</span><br><span class="line"><span class="attribute">justify-content</span>: space-between;</span><br><span class="line"><span class="attribute">color</span>: <span class="built_in">rgba</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0.45</span>);</span><br></pre></td></tr></table></figure>

<p>同时，我们希望在手机横屏的时候，能放开 <code>一列两个</code> 的限制，也就是根据手机屏幕自适应，竟可能的展示更多，我们只需要修改一行代码</p>
<figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="deletion">- grid-template-columns: repeat(2, 1fr);</span></span><br><span class="line"><span class="addition">+ grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));</span></span><br></pre></td></tr></table></figure>

<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">@supports</span> (<span class="attribute">display</span>: <span class="attribute">grid</span>) &#123;</span><br><span class="line">  <span class="attribute">display</span>: grid;</span><br><span class="line">  // 最基础的 repeat 兜底</span><br><span class="line">  grid-template-<span class="attribute">columns</span>: <span class="built_in">repeat</span>(<span class="number">2</span>, <span class="number">1</span>fr);</span><br><span class="line">  // 如果支持 <span class="attribute">auto</span>-fill, 覆盖掉上一个 css, 使用 <span class="attribute">auto</span>-fill 和 minmax, 能做到移动端竖屏一行显示两个，移动端横屏和 pc 根据容器宽度自适应</span><br><span class="line">  grid-template-<span class="attribute">columns</span>: <span class="built_in">repeat</span>(auto-fill, <span class="built_in">minmax</span>(<span class="number">150px</span>, <span class="number">1</span>fr));</span><br><span class="line">  gap: @cycle-compare-gap;</span><br><span class="line">  <span class="attribute">align-items</span>: flex-end;</span><br><span class="line">  <span class="attribute">justify-content</span>: space-between;</span><br><span class="line">  <span class="attribute">margin-top</span>: <span class="number">12px</span>;</span><br><span class="line">  <span class="attribute">color</span>: <span class="built_in">rgba</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0.45</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 不支持 grid 用 <span class="attribute">column-count</span> 兜底</span><br><span class="line"><span class="keyword">@supports</span> <span class="keyword">not</span> (<span class="attribute">display</span>: <span class="attribute">grid</span>) &#123;</span><br><span class="line">  <span class="attribute">column-count</span>: <span class="number">2</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><a name="jR4NL"></a></p>
<h3 id="Media-Session-Chrome-73"><a href="#Media-Session-Chrome-73" class="headerlink" title="Media Session Chrome: 73+"></a>Media Session Chrome: 73+</h3><p>有一次，在家看斗鱼直播的时候，发现地址栏旁边有一个音乐的 icon, 点击会有一个小卡片，可以开启画中画，暂停播放等<br /></p>
<p><img src="/images/2023-12-22-6cf6df7157614b80fce4cfcbc59094d0739ffe15276f1fa6af00b2bb6147ea2e.png" alt="图 1"></p>
<p>一查，好家伙，原来这是 Chorme 73 就支持的特性 <a target="_blank" rel="noopener" href="https://developer.mozilla.org/en-US/docs/Web/API/Media_Session_API">Media Session</a>, 可以实现像原生 APP 一样，在播放音乐或视频时，在地址栏有一个小卡片，很精致</p>
<p><img src="/images/2023-12-22-8aa9c0f469341883eb530526033d323b512a25720e6dc4d46640c0ebe1e1dd18.png" alt="图 2"></p>
<p><br />于是，我将这个很酷的功能，接入到我自己的 <a target="_blank" rel="noopener" href="https://github.com/lijinke666/react-music-player">音乐播放器</a> (<a href="https://www.lijinke.cn/react-music-player/">查看示例</a>)</p>
<p><img src="https://intranetproxy.alipay.com/skylark/lark/0/2022/gif/6356643/1666667794688-ce5d94e4-dd74-441f-8155-f36b6581fe7b.gif" alt="Kapture 2022-10-25 at 11.16.10.gif"></p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br></pre></td><td class="code"><pre><span class="line">updateMediaSessionMetadata = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">   <span class="keyword">if</span> (<span class="string">&#x27;mediaSession&#x27;</span> <span class="keyword">in</span> navigator &amp;&amp; <span class="built_in">this</span>.props.showMediaSession) &#123;</span><br><span class="line">     <span class="keyword">const</span> &#123; name, cover, singer &#125; = <span class="built_in">this</span>.state</span><br><span class="line">     <span class="keyword">const</span> mediaMetaDataConfig = &#123;</span><br><span class="line">       <span class="attr">title</span>: name,</span><br><span class="line">       <span class="attr">artist</span>: singer,</span><br><span class="line">       <span class="attr">album</span>: name,</span><br><span class="line">     &#125;</span><br><span class="line">     <span class="keyword">if</span> (cover) &#123;</span><br><span class="line">       mediaMetaDataConfig.artwork = [</span><br><span class="line">         <span class="string">&#x27;96x96&#x27;</span>,</span><br><span class="line">         <span class="string">&#x27;128x128&#x27;</span>,</span><br><span class="line">         <span class="string">&#x27;192x192&#x27;</span>,</span><br><span class="line">         <span class="string">&#x27;256x256&#x27;</span>,</span><br><span class="line">         <span class="string">&#x27;384x384&#x27;</span>,</span><br><span class="line">         <span class="string">&#x27;512x512&#x27;</span>,</span><br><span class="line">       ].map(<span class="function">(<span class="params">size</span>) =&gt;</span> (&#123;</span><br><span class="line">         <span class="attr">src</span>: cover,</span><br><span class="line">         <span class="attr">sizes</span>: size,</span><br><span class="line">         <span class="attr">type</span>: <span class="string">&#x27;image/png&#x27;</span>,</span><br><span class="line">       &#125;))</span><br><span class="line">     &#125;</span><br><span class="line">     navigator.mediaSession.metadata = <span class="keyword">new</span> MediaMetadata(mediaMetaDataConfig)</span><br><span class="line">     <span class="built_in">this</span>.updateMediaSessionPositionState()</span><br><span class="line">   &#125;</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"> updateMediaSessionPositionState = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">   <span class="keyword">if</span> (<span class="string">&#x27;setPositionState&#x27;</span> <span class="keyword">in</span> navigator.mediaSession) &#123;</span><br><span class="line">     <span class="keyword">try</span> &#123;</span><br><span class="line">       <span class="keyword">const</span> &#123; audio &#125; = <span class="built_in">this</span></span><br><span class="line">       navigator.mediaSession.setPositionState(&#123;</span><br><span class="line">         <span class="attr">duration</span>: <span class="built_in">this</span>.audioDuration,</span><br><span class="line">         <span class="attr">playbackRate</span>: audio.playbackRate || <span class="number">1</span>,</span><br><span class="line">         <span class="attr">position</span>: audio.currentTime || <span class="number">0</span>,</span><br><span class="line">       &#125;)</span><br><span class="line">     &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">       <span class="comment">// eslint-disable-next-line no-console</span></span><br><span class="line">       <span class="built_in">console</span>.error(<span class="string">&#x27;Update media session position state failed: &#x27;</span>, error)</span><br><span class="line">     &#125;</span><br><span class="line">   &#125;</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"> onAddMediaSession = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">   <span class="keyword">if</span> (<span class="string">&#x27;mediaSession&#x27;</span> <span class="keyword">in</span> navigator &amp;&amp; <span class="built_in">this</span>.props.showMediaSession) &#123;</span><br><span class="line">     <span class="keyword">const</span> defaultSkipTime = <span class="number">10</span></span><br><span class="line">     navigator.mediaSession.setActionHandler(<span class="string">&#x27;play&#x27;</span>, <span class="built_in">this</span>.onTogglePlay)</span><br><span class="line">     navigator.mediaSession.setActionHandler(<span class="string">&#x27;pause&#x27;</span>, <span class="built_in">this</span>.onTogglePlay)</span><br><span class="line">     navigator.mediaSession.setActionHandler(<span class="string">&#x27;seekbackward&#x27;</span>, <span class="function">(<span class="params">details</span>) =&gt;</span> &#123;</span><br><span class="line">       <span class="keyword">const</span> skipTime = details.seekOffset || defaultSkipTime</span><br><span class="line">       <span class="built_in">this</span>.audio.currentTime = <span class="built_in">Math</span>.max(<span class="built_in">this</span>.audio.currentTime - skipTime, <span class="number">0</span>)</span><br><span class="line">       <span class="built_in">this</span>.props.onAudioSeeked &amp;&amp;</span><br><span class="line">         <span class="built_in">this</span>.props.onAudioSeeked(<span class="built_in">this</span>.getBaseAudioInfo())</span><br><span class="line">     &#125;)</span><br><span class="line">     navigator.mediaSession.setActionHandler(<span class="string">&#x27;seekforward&#x27;</span>, <span class="function">(<span class="params">details</span>) =&gt;</span> &#123;</span><br><span class="line">       <span class="keyword">const</span> skipTime = details.seekOffset || defaultSkipTime</span><br><span class="line">       <span class="built_in">this</span>.audio.currentTime = <span class="built_in">Math</span>.min(</span><br><span class="line">         <span class="built_in">this</span>.audio.currentTime + skipTime,</span><br><span class="line">         <span class="built_in">this</span>.audioDuration,</span><br><span class="line">       )</span><br><span class="line">       <span class="built_in">this</span>.props.onAudioSeeked &amp;&amp;</span><br><span class="line">         <span class="built_in">this</span>.props.onAudioSeeked(<span class="built_in">this</span>.getBaseAudioInfo())</span><br><span class="line">     &#125;)</span><br><span class="line">     navigator.mediaSession.setActionHandler(</span><br><span class="line">       <span class="string">&#x27;previoustrack&#x27;</span>,</span><br><span class="line">       <span class="built_in">this</span>.onPlayPrevAudio,</span><br><span class="line">     )</span><br><span class="line">     navigator.mediaSession.setActionHandler(<span class="string">&#x27;nexttrack&#x27;</span>, <span class="built_in">this</span>.onPlayNextAudio)</span><br><span class="line"></span><br><span class="line">     <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">       <span class="built_in">this</span>.updateMediaSessionMetadata()</span><br><span class="line">     &#125;, <span class="number">0</span>)</span><br><span class="line"></span><br><span class="line">     <span class="keyword">try</span> &#123;</span><br><span class="line">       navigator.mediaSession.setActionHandler(<span class="string">&#x27;seekto&#x27;</span>, <span class="function">(<span class="params">event</span>) =&gt;</span> &#123;</span><br><span class="line">         <span class="keyword">if</span> (event.fastSeek &amp;&amp; <span class="string">&#x27;fastSeek&#x27;</span> <span class="keyword">in</span> <span class="built_in">this</span>.audio) &#123;</span><br><span class="line">           <span class="built_in">this</span>.audio.fastSeek(event.seekTime)</span><br><span class="line">           <span class="keyword">return</span></span><br><span class="line">         &#125;</span><br><span class="line">         <span class="built_in">this</span>.audio.currentTime = event.seekTime</span><br><span class="line">         <span class="built_in">this</span>.updateMediaSessionPositionState()</span><br><span class="line">       &#125;)</span><br><span class="line">     &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">       <span class="comment">// eslint-disable-next-line no-console</span></span><br><span class="line">       <span class="built_in">console</span>.warn(</span><br><span class="line">         <span class="string">&#x27;Warning! The &quot;seekto&quot; media session action is not supported.&#x27;</span>,</span><br><span class="line">       )</span><br><span class="line">     &#125;</span><br><span class="line">   &#125;</span><br><span class="line"> &#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><img src="/images/2023-12-22-4844ec218bb8673da9a951c2e4f7da2bb8afccb20ff2d6095a3044f0a060d4cc.png" alt="图 3"></p>
<p><a name="kfdpw"></a></p>
<h3 id="Visual-Viewport-Chrome-61"><a href="#Visual-Viewport-Chrome-61" class="headerlink" title="Visual Viewport Chrome: 61+"></a>Visual Viewport Chrome: 61+</h3><p><img src="/images/2023-12-22-802f4259b8158905369069daa44af111f126bce230479e4e9463c9a4907c5744.png" alt="图 16"></p>
<p>这个东西又是做什么的呢？在实际业务开发中，mac 电脑的<strong>触控板</strong>可以使用<strong>双指缩放</strong>对浏览器视窗进行缩小放大<br /></p>
<p><img src="https://intranetproxy.alipay.com/skylark/lark/0/2022/gif/6356643/1666666265863-4a7c2f20-0f2c-4ce7-b926-147e52c40b58.gif" alt="Kapture 2022-10-25 at 10.50.45.gif"></p>
<p>如果网页上包含 Canvas 会让其模糊，首先我们尝试了监听 window 的 resize 事件，发现无效，百般搜索，发现了 <a target="_blank" rel="noopener" href="https://developer.mozilla.org/en-US/docs/Web/API/VisualViewport">Visual Viewport</a> 这个东西，可以对屏幕大小发生改变，或缩放做监听，同时还可以用做移动端的双指缩放，我们借助这个功能，<a target="_blank" rel="noopener" href="https://github.com/antvis/S2/blob/72575d884bcc72251736bf0744086d068df04b52/packages/s2-core/src/ui/hd-adapter/index.ts#L107">优化了 Canvas 模糊的问题</a> ([查看具体介绍](<a target="_blank" rel="noopener" href="https://yuque.antfin.com/docs/share/d3c34ad9-b7db-46ef-be60-6c4e2f4b86ff#">https://yuque.antfin.com/docs/share/d3c34ad9-b7db-46ef-be60-6c4e2f4b86ff?#</a> 《✍ VisualViewport 实现浏览器窗口的缩放检测》))</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">visualViewport?.visualViewport?.addEventListener(</span><br><span class="line">  <span class="string">&#x27;resize&#x27;</span>,</span><br><span class="line">  <span class="built_in">this</span>.renderByZoomScale,</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"> <span class="keyword">private</span> renderByDevicePixelRatio = <span class="function">(<span class="params">ratio = <span class="built_in">window</span>.devicePixelRatio</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> &#123;</span><br><span class="line">      container,</span><br><span class="line">      <span class="attr">options</span>: &#123; width, height, devicePixelRatio &#125;,</span><br><span class="line">    &#125; = <span class="built_in">this</span>.spreadsheet;</span><br><span class="line">    <span class="keyword">const</span> canvas = <span class="built_in">this</span>.spreadsheet.getCanvasElement();</span><br><span class="line">    <span class="keyword">const</span> lastRatio = container.get(<span class="string">&#x27;pixelRatio&#x27;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (lastRatio === ratio || !canvas) &#123;</span><br><span class="line">      <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 缩放时，以向上取整后的缩放比为准</span></span><br><span class="line">    <span class="comment">// 设备像素比改变时，取当前和用户配置中最大的，保证显示效果</span></span><br><span class="line">    <span class="keyword">const</span> pixelRatio = <span class="built_in">Math</span>.max(</span><br><span class="line">      ratio,</span><br><span class="line">      devicePixelRatio,</span><br><span class="line">      MIN_DEVICE_PIXEL_RATIO,</span><br><span class="line">    );</span><br><span class="line"></span><br><span class="line">    container.set(<span class="string">&#x27;pixelRatio&#x27;</span>, pixelRatio);</span><br><span class="line">    container.changeSize(width, height);</span><br><span class="line"></span><br><span class="line">    <span class="built_in">this</span>.spreadsheet.render(<span class="literal">false</span>);</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">private</span> renderByZoomScale = debounce(</span><br><span class="line">    <span class="function">(<span class="params">event: Event &amp; &#123; target: VisualViewport &#125;</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">const</span> ratio = <span class="built_in">Math</span>.ceil(event.target.scale);</span><br><span class="line">      <span class="keyword">if</span> (ratio &gt;= <span class="number">1</span>) &#123;</span><br><span class="line">        <span class="built_in">this</span>.renderByDevicePixelRatio(ratio);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="number">350</span>,</span><br><span class="line">  );</span><br></pre></td></tr></table></figure>

<p><a name="yEC81"></a></p>
<h3 id="Place-Content-Chrome-59"><a href="#Place-Content-Chrome-59" class="headerlink" title="Place-Content Chrome: 59+"></a>Place-Content Chrome: 59+</h3><p><img src="/images/2023-12-22-0579b52294e29f98580f73f47e3d6499498f4a6c47a73de2bf4878e3d965119b.png" alt="图 4"></p>
<p>这是一个 Chorme 59 就支持的 css 的属性，同时支持 Grid 和 Flex 布局，我是看 web.dev 的文章才知道的，惭愧。.. 它可以干什么呢？其实就是对 我们熟悉的 <code>align-content</code> 和 <code>justify-content</code> 两个属性简写。比如垂直水平居中，我们都是这样写</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.center</span> &#123;</span><br><span class="line">  <span class="attribute">display</span>: flex;</span><br><span class="line">  <span class="attribute">justify-content</span>: center;</span><br><span class="line">  <span class="attribute">align-content</span>: center;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>可以简写成</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.center</span> &#123;</span><br><span class="line">  <span class="attribute">display</span>: flex;</span><br><span class="line">  place-<span class="attribute">content</span>: center;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><a name="sr5Bt"></a></p>
<h3 id="EventListener-Once-Chrome-55"><a href="#EventListener-Once-Chrome-55" class="headerlink" title="EventListener Once Chrome: 55+"></a>EventListener Once Chrome: 55+</h3><p><img src="/images/2023-12-22-2bd4f1c483c7a19e57d36ba144a82b1abeadc0fda239f1223ebdb2c582d6d521.png" alt="图 5"></p>
<p><br />众所周知，<code>addEventListener</code> 在远古时期第三个函数就从  <code>Boolean</code>值 变成了 <code>Object</code>, 原因是要支持 <a target="_blank" rel="noopener" href="https://developer.mozilla.org/en-US/docs/Web/API/EventTarget/addEventListener#parameters">更多的功能</a></p>
<figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="addition">+ addEventListener(type, listener, options)</span></span><br><span class="line"><span class="deletion">- addEventListener(type, listener, useCapture)</span></span><br></pre></td></tr></table></figure>

<p>我们监听一个事件，比如点击，通常会这样写</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">button.addEventListener(<span class="string">&#x27;click&#x27;</span>, <span class="function">() =&gt;</span> &#123;&#125;)</span><br></pre></td></tr></table></figure>

<p>如果只想让它监听一次呢？在这前有很多奇奇怪怪的处理方式，我们可以这样改写，使用 <code>options.once</code> 优雅的实现</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">button.addEventListener(<span class="string">&#x27;click&#x27;</span>, <span class="function">() =&gt;</span> &#123;&#125;, &#123; <span class="attr">once</span>: <span class="literal">true</span> &#125;)</span><br></pre></td></tr></table></figure>

<p>这样就优雅的实现了事件只触发一次，这个知道的人不知道多不多，现在都是三大框架，屏蔽了底层，估计也用不到这个东西吧。</p>
<p><a name="TckbY"></a></p>
<h3 id="AbortController-Chrome-66"><a href="#AbortController-Chrome-66" class="headerlink" title="AbortController Chrome: 66+"></a>AbortController Chrome: 66+</h3><p><img src="/images/2023-12-22-25aa4b793bf79443c365f16fc10855fb00cfe4fd2cd982ba99ac68f93883537f.png" alt="图 6"></p>
<p><br /><a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/API/AbortController">AbortController</a> 用于终止网络请求，Chorme 66 开始支持，在 Node.js 中也有相应实现<br />原生的 <code>fetch</code>请求有一个弊端就是无法中断，那么可以配置 <code>AbortController</code> 解决这个问题<br />使用方式类似于 axios 的 <code>CancelToken</code> , 比如想中断视频下载  (<a target="_blank" rel="noopener" href="https://mdn.github.io/dom-examples/abort-api/">查看示例</a>)</p>
<p><img src="https://intranetproxy.alipay.com/skylark/lark/0/2022/gif/6356643/1666667668759-f057dab8-749f-4983-95e1-4f3242418d00.gif" alt="Kapture 2022-10-25 at 11.14.17.gif"></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> controller = <span class="keyword">new</span> AbortController();</span><br><span class="line"><span class="keyword">let</span> signal = controller.signal;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> downloadBtn = <span class="built_in">document</span>.querySelector(<span class="string">&#x27;.download&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> abortBtn = <span class="built_in">document</span>.querySelector(<span class="string">&#x27;.abort&#x27;</span>);</span><br><span class="line"></span><br><span class="line">downloadBtn.addEventListener(<span class="string">&#x27;click&#x27;</span>, fetchVideo);</span><br><span class="line"></span><br><span class="line">abortBtn.addEventListener(<span class="string">&#x27;click&#x27;</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  controller.abort();</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&#x27;Download aborted&#x27;</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fetchVideo</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="comment">//...</span></span><br><span class="line">  fetch(url, &#123; signal &#125;).then(<span class="function"><span class="keyword">function</span>(<span class="params">response</span>) </span>&#123;</span><br><span class="line">    <span class="comment">//...</span></span><br><span class="line">  &#125;).catch(<span class="function"><span class="keyword">function</span>(<span class="params">e</span>) </span>&#123;</span><br><span class="line">    reports.textContent = <span class="string">&#x27;Download error: &#x27;</span> + e.message;</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><a name="Os2X3"></a></p>
<h3 id="PWA-Chrome-39"><a href="#PWA-Chrome-39" class="headerlink" title="PWA Chrome: 39+"></a>PWA Chrome: 39+</h3><p><img src="/images/2023-12-22-959affe2a9415e8e634f8375c88472efa5f136d9c3744ee0a7abda8fd1565563.png" alt="图 7"></p>
<p><br />PWA 全称  Progressive web apps,  17 年的时候特别火，谷歌主推的亲儿子，国内由于小程序以及科学上网的原因，一直半死不活，国内我印象中比较早用的是饿了么 HTML5 版本</p>
<p>简单来说就是把一个网页包装，让其看起来像一个原生 APP, 就和现在大家把一个网页，让其像小程序一样</p>
<p>:::info<br>PS: 个人观点，小程序就像一个万维网的对立，努力的把互联网变成局域网，个人很讨厌<br>:::</p>
<p>PWA 通过 <code>service worker</code> 将资源缓存，使其可以离线访问，支持 web push, 也可以添加到桌面，像一个 app 一样使用</p>
<p><img src="/images/2023-12-22-ccc1b808fdad95163f5608d06af6b7d22d6a25211925bbe1f37d270b4697a33b.png" alt="图 8"></p>
<br />

<p><img src="/images/2023-12-22-45b6b4c6b63253637e9c8c94bbd1ac0ff91fdf5cf2d64c556302896dbb20a1c9.png" alt="图 9"></p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">&quot;short_name&quot;</span>: <span class="string">&quot;李金珂的小屋&quot;</span>,</span><br><span class="line">  <span class="attr">&quot;name&quot;</span>: <span class="string">&quot;李金珂的小屋&quot;</span>,</span><br><span class="line">  <span class="attr">&quot;description&quot;</span>: <span class="string">&quot;李金珂的小屋，李金珂的个人网站，博客&quot;</span>,</span><br><span class="line">  <span class="attr">&quot;lang&quot;</span>: <span class="string">&quot;cn&quot;</span>,</span><br><span class="line">  <span class="attr">&quot;icons&quot;</span>: [</span><br><span class="line">    &#123; <span class="attr">&quot;src&quot;</span>: <span class="string">&quot;/logos/logo_48.png&quot;</span>, <span class="attr">&quot;type&quot;</span>: <span class="string">&quot;image/png&quot;</span>, <span class="attr">&quot;sizes&quot;</span>: <span class="string">&quot;48x48&quot;</span> &#125;,</span><br><span class="line">    &#123; <span class="attr">&quot;src&quot;</span>: <span class="string">&quot;/logos/logo_96.png&quot;</span>, <span class="attr">&quot;type&quot;</span>: <span class="string">&quot;image/png&quot;</span>, <span class="attr">&quot;sizes&quot;</span>: <span class="string">&quot;96x96&quot;</span> &#125;,</span><br><span class="line">    &#123; <span class="attr">&quot;src&quot;</span>: <span class="string">&quot;/logos/logo_192.png&quot;</span>, <span class="attr">&quot;type&quot;</span>: <span class="string">&quot;image/png&quot;</span>, <span class="attr">&quot;sizes&quot;</span>: <span class="string">&quot;192x192&quot;</span> &#125;,</span><br><span class="line">    &#123; <span class="attr">&quot;src&quot;</span>: <span class="string">&quot;/logos/logo_512.png&quot;</span>, <span class="attr">&quot;type&quot;</span>: <span class="string">&quot;image/png&quot;</span>, <span class="attr">&quot;sizes&quot;</span>: <span class="string">&quot;512x512&quot;</span> &#125;</span><br><span class="line">  ],</span><br><span class="line">  <span class="attr">&quot;start_url&quot;</span>: <span class="string">&quot;/&quot;</span>,</span><br><span class="line">  <span class="attr">&quot;display&quot;</span>: <span class="string">&quot;standalone&quot;</span>,</span><br><span class="line">  <span class="attr">&quot;orientation&quot;</span>: <span class="string">&quot;portrait&quot;</span>,</span><br><span class="line">  <span class="attr">&quot;background_color&quot;</span>: <span class="string">&quot;#fff&quot;</span>,</span><br><span class="line">  <span class="attr">&quot;theme_color&quot;</span>: <span class="string">&quot;#fff&quot;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//通过 serviceWorker.register 注册了这个 js</span></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 全局变量</span></span><br><span class="line"><span class="comment"> * self: 表示 Service Worker 作用域，也是全局变量</span></span><br><span class="line"><span class="comment">    caches: 表示缓存</span></span><br><span class="line"><span class="comment">    skipWaiting: 表示强制当前处在 waiting 状态的脚本进入 activate 状态</span></span><br><span class="line"><span class="comment">    clients: 表示 Service Worker 接管的页面</span></span><br><span class="line"><span class="comment">    https://fed.renren.com/2017/10/08/service-worker-notification/</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//缓存的 key</span></span><br><span class="line"><span class="keyword">const</span> cacheKey = <span class="string">&#x27;v8.6.2&#x27;</span>;</span><br><span class="line"><span class="keyword">const</span> cacheWhitelist = [];</span><br><span class="line"></span><br><span class="line"><span class="comment">//需要缓存的列表</span></span><br><span class="line"><span class="keyword">const</span> cacheList = [</span><br><span class="line">  <span class="string">&#x27;/&#x27;</span>,</span><br><span class="line">  <span class="string">&#x27;/js/jquery.js&#x27;</span>,</span><br><span class="line">  <span class="string">&#x27;/js/jquery.appear.js&#x27;</span>,</span><br><span class="line">  <span class="string">&#x27;/js/jquery-migrate-1.2.1.min.js&#x27;</span>,</span><br><span class="line">  <span class="string">&#x27;/images/favicon.png&#x27;</span>,</span><br><span class="line">  <span class="string">&#x27;/images/logo.png&#x27;</span>,</span><br><span class="line">  <span class="string">&#x27;/images/logo@2x.png&#x27;</span>,</span><br><span class="line">  <span class="string">&#x27;/images/my.jpeg&#x27;</span>,</span><br><span class="line">  <span class="string">&#x27;/fonts/fontawesome-webfont.eot&#x27;</span>,</span><br><span class="line">  <span class="string">&#x27;/fonts/fontawesome-webfont.svg&#x27;</span>,</span><br><span class="line">  <span class="string">&#x27;/fonts/fontawesome-webfont.ttf&#x27;</span>,</span><br><span class="line">  <span class="string">&#x27;/fonts/fontawesome-webfont.woff&#x27;</span>,</span><br><span class="line">  <span class="string">&#x27;/css/blog_basic.css&#x27;</span>,</span><br><span class="line">  <span class="string">&#x27;/css/font-awesome.min.css&#x27;</span>,</span><br><span class="line">  <span class="string">&#x27;/css/style.css&#x27;</span>,</span><br><span class="line">  <span class="string">&#x27;/css/style.scss&#x27;</span>,</span><br><span class="line">  <span class="string">&#x27;/logos/logo_48.png&#x27;</span>,</span><br><span class="line">  <span class="string">&#x27;/logos/logo_96.png&#x27;</span>,</span><br><span class="line">  <span class="string">&#x27;/logos/logo_192.png&#x27;</span>,</span><br><span class="line">  <span class="string">&#x27;/logos/logo_512.png&#x27;</span>,</span><br><span class="line">  <span class="string">&#x27;/about/&#x27;</span>,</span><br><span class="line">  <span class="string">&#x27;/archives/&#x27;</span>,</span><br><span class="line">  <span class="string">&#x27;/links/&#x27;</span>,</span><br><span class="line">];</span><br><span class="line"></span><br><span class="line">self.addEventListener(<span class="string">&#x27;install&#x27;</span>, <span class="function">(<span class="params">e</span>) =&gt;</span> &#123;</span><br><span class="line">  e.waitUntil(</span><br><span class="line">    caches</span><br><span class="line">      .open(cacheKey) <span class="comment">//将缓存写入在这个 key 中</span></span><br><span class="line">      .then(<span class="function">(<span class="params">cache</span>) =&gt;</span> cache.addAll(cacheList)),</span><br><span class="line">    <span class="comment">// .then(() =&gt; self.skipWaiting()) //停止等待 页面更新时  立即激活生效 service worker 脚本</span></span><br><span class="line">  );</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">//网页赚取资源 service worker 可以捕获到 fetch 事件</span></span><br><span class="line">self.addEventListener(<span class="string">&#x27;fetch&#x27;</span>, <span class="function">(<span class="params">e</span>) =&gt;</span> &#123;</span><br><span class="line">  e.respondWith(</span><br><span class="line">    <span class="comment">//有请求来 先去缓存里找之前请求过没</span></span><br><span class="line">    caches.match(e.request).then(<span class="function">(<span class="params">res</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">if</span> (res != <span class="literal">null</span>) <span class="keyword">return</span> res; <span class="comment">//如果请求过 直接返回结果</span></span><br><span class="line">      <span class="keyword">return</span> fetch(e.request); <span class="comment">//否则 继续请求</span></span><br><span class="line">    &#125;),</span><br><span class="line">  );</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">//更新静态资源</span></span><br><span class="line">self.addEventListener(<span class="string">&#x27;activate&#x27;</span>, <span class="function"><span class="keyword">function</span> (<span class="params">e</span>) </span>&#123;</span><br><span class="line">  e.waitUntil(</span><br><span class="line">    <span class="built_in">Promise</span>.all(</span><br><span class="line">      caches.keys().then(<span class="function">(<span class="params">cacheNames</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> cacheNames.map(<span class="function">(<span class="params">name</span>) =&gt;</span> &#123;</span><br><span class="line">          <span class="keyword">if</span> (cacheWhitelist.indexOf(name) === -<span class="number">1</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> caches.delete(name);</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">      &#125;),</span><br><span class="line">    ).then(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">return</span> self.clients.claim(); <span class="comment">//取得 页面控制权 页面会使用新更新的缓存</span></span><br><span class="line">    &#125;),</span><br><span class="line">  );</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">//接收推送消息</span></span><br><span class="line">self.addEventListener(<span class="string">&#x27;push&#x27;</span>, <span class="function"><span class="keyword">function</span> (<span class="params">event</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> notificationData = event.data.json();</span><br><span class="line">  <span class="keyword">const</span> title = notificationData.title;</span><br><span class="line">  <span class="comment">// 弹消息框</span></span><br><span class="line">  event.waitUntil(self.registration.showNotification(title, notificationData));</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">//推送消息点击</span></span><br><span class="line">self.addEventListener(<span class="string">&#x27;notificationclick&#x27;</span>, <span class="function"><span class="keyword">function</span> (<span class="params">event</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> notification = event.notification;</span><br><span class="line">  notification.close();</span><br><span class="line">  event.waitUntil(clients.openWindow(notification.data.url));</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">self.addEventListener(<span class="string">&#x27;error&#x27;</span>, <span class="function">(<span class="params">event</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// 上报错误信息</span></span><br><span class="line">  <span class="comment">// 常用的属性：</span></span><br><span class="line">  <span class="comment">// event.message</span></span><br><span class="line">  <span class="comment">// event.filename</span></span><br><span class="line">  <span class="comment">// event.lineno</span></span><br><span class="line">  <span class="comment">// event.colno</span></span><br><span class="line">  <span class="comment">// event.error.stack</span></span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&#x27;error:&#x27;</span>, event);</span><br><span class="line">&#125;);</span><br><span class="line">self.addEventListener(<span class="string">&#x27;unhandledrejection&#x27;</span>, <span class="function">(<span class="params">event</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// 上报错误信息</span></span><br><span class="line">  <span class="comment">// 常用的属性：</span></span><br><span class="line">  <span class="comment">// event.reason</span></span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&#x27;unhandledrejection&#x27;</span>, event);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><a name="vvWRP"></a></p>
<h3 id="Web-Component-Chrome-90"><a href="#Web-Component-Chrome-90" class="headerlink" title="Web Component Chrome: 90+"></a>Web Component Chrome: 90+</h3><p>浏览器可以识别自定义标签，比如 <code>&lt;ljk&gt;&lt;/ljk&gt;</code> , 没有任何默认样式和状态<br /></p>
<p><img src="/images/2023-12-22-01a67de3ce5922b03e057d4465ed106cd4ac4a771a7e80b39bd31fd609524dd3.png" alt="图 10"></p>
<p>同时，默认提供了 <code>&lt;button/&gt;</code> <code>&lt;input/&gt;</code> 等内置组件，<code>Web Component</code>就可以让我自定义代码，封装出类似的组件，使其可以在网页中复用，有两个很重要的关键点</p>
<ul>
<li>Shadow DOM</li>
<li>HTML template</li>
</ul>
<p>如图，我们有一个 <code>&lt;input type=&quot;range&quot;/&gt;</code> 控件，审查元素，我们发现只有一个光秃秃的 <code>input</code> 标签，别无其他，那其 <code>range</code>的 ui 在哪里呢？<br /></p>
<p><img src="/images/2023-12-22-86bb0adcdd4437fe159c4f26e01b4014732f4ecbeefe596ce5a260921ad3249b.png" alt="图 11"></p>
<p>我们打开 <code>Preferences</code> 的 <code>Show user agent shadow DOM</code></p>
<br />

<p><img src="/images/2023-12-22-b3d77f22cbec986e1d1bb1ceed5e4b616e17790c862f9911f0763ab497d556be.png" alt="图 12"></p>
<br />

<p><img src="/images/2023-12-22-4248bd4148c9e27947e712a004b1185abbaa01c7643f302a5308426ca5ccfcf1.png" alt="图 13"></p>
<p>综上所述，<code>&lt;input type =&quot;range&quot;/&gt;</code> 就是一个内置的 <code>Web Component</code>, 其对应的 UI, 藏在了 <code>shadow-root</code> 中</p>
<p>具体怎么自定义，请查看 <a target="_blank" rel="noopener" href="https://github.com/mdn/web-components-examples/blob/main/edit-word/main.js">官方例子</a></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;utf-8&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>edit-word demo<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;test.js&quot;</span> <span class="attr">defer</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">template</span> <span class="attr">id</span>=<span class="string">&quot;person-template&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h2</span>&gt;</span>Personal ID Card<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">slot</span> <span class="attr">name</span>=<span class="string">&quot;person-name&quot;</span>&gt;</span>NAME MISSING<span class="tag">&lt;/<span class="name">slot</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">slot</span> <span class="attr">name</span>=<span class="string">&quot;person-age&quot;</span>&gt;</span>AGE MISSING<span class="tag">&lt;/<span class="name">slot</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">slot</span> <span class="attr">name</span>=<span class="string">&quot;person-occupation&quot;</span>&gt;</span>OCCUPATION MISSING<span class="tag">&lt;/<span class="name">slot</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">person-details</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">p</span> <span class="attr">slot</span>=<span class="string">&quot;person-name&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">edit-word</span>&gt;</span>Morgan<span class="tag">&lt;/<span class="name">edit-word</span>&gt;</span> Stanley<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">span</span> <span class="attr">slot</span>=<span class="string">&quot;person-age&quot;</span>&gt;</span>36<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">span</span> <span class="attr">slot</span>=<span class="string">&quot;person-occupation&quot;</span>&gt;</span>Accountant<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">person-details</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>My name is <span class="tag">&lt;<span class="name">edit-word</span>&gt;</span>Chris<span class="tag">&lt;/<span class="name">edit-word</span>&gt;</span>, the man said.<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br></pre></td><td class="code"><pre><span class="line">customElements.define(</span><br><span class="line">  <span class="string">&#x27;person-details&#x27;</span>,</span><br><span class="line">  <span class="class"><span class="keyword">class</span> <span class="keyword">extends</span> <span class="title">HTMLElement</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="title">constructor</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">      <span class="built_in">super</span>();</span><br><span class="line"></span><br><span class="line">      <span class="keyword">const</span> template = <span class="built_in">document</span>.getElementById(<span class="string">&#x27;person-template&#x27;</span>);</span><br><span class="line">      <span class="keyword">const</span> templateContent = template.content;</span><br><span class="line"></span><br><span class="line">      <span class="keyword">const</span> shadowRoot = <span class="built_in">this</span>.attachShadow(&#123; <span class="attr">mode</span>: <span class="string">&#x27;open&#x27;</span> &#125;);</span><br><span class="line"></span><br><span class="line">      <span class="keyword">const</span> style = <span class="built_in">document</span>.createElement(<span class="string">&#x27;style&#x27;</span>);</span><br><span class="line">      style.textContent = <span class="string">`</span></span><br><span class="line"><span class="string">        div &#123; padding: 10px; border: 1px solid gray; width: 200px; margin: 10px; &#125;</span></span><br><span class="line"><span class="string">        h2 &#123; margin: 0 0 10px; &#125;</span></span><br><span class="line"><span class="string">        ul &#123; margin: 0; &#125;</span></span><br><span class="line"><span class="string">        p &#123; margin: 10px 0; &#125;</span></span><br><span class="line"><span class="string">      `</span>;</span><br><span class="line"></span><br><span class="line">      shadowRoot.appendChild(style);</span><br><span class="line">      shadowRoot.appendChild(templateContent.cloneNode(<span class="literal">true</span>));</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">customElements.define(</span><br><span class="line">  <span class="string">&#x27;edit-word&#x27;</span>,</span><br><span class="line">  <span class="class"><span class="keyword">class</span> <span class="keyword">extends</span> <span class="title">HTMLElement</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="title">constructor</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">      <span class="built_in">super</span>();</span><br><span class="line"></span><br><span class="line">      <span class="keyword">const</span> shadowRoot = <span class="built_in">this</span>.attachShadow(&#123; <span class="attr">mode</span>: <span class="string">&#x27;open&#x27;</span> &#125;);</span><br><span class="line">      <span class="keyword">const</span> form = <span class="built_in">document</span>.createElement(<span class="string">&#x27;form&#x27;</span>);</span><br><span class="line">      <span class="keyword">const</span> input = <span class="built_in">document</span>.createElement(<span class="string">&#x27;input&#x27;</span>);</span><br><span class="line">      <span class="keyword">const</span> span = <span class="built_in">document</span>.createElement(<span class="string">&#x27;span&#x27;</span>);</span><br><span class="line"></span><br><span class="line">      <span class="keyword">const</span> style = <span class="built_in">document</span>.createElement(<span class="string">&#x27;style&#x27;</span>);</span><br><span class="line">      style.textContent = <span class="string">&#x27;span &#123; background-color: #eef; padding: 0 2px &#125;&#x27;</span>;</span><br><span class="line"></span><br><span class="line">      shadowRoot.appendChild(style);</span><br><span class="line">      shadowRoot.appendChild(form);</span><br><span class="line">      shadowRoot.appendChild(span);</span><br><span class="line"></span><br><span class="line">      span.textContent = <span class="built_in">this</span>.textContent;</span><br><span class="line">      input.value = <span class="built_in">this</span>.textContent;</span><br><span class="line"></span><br><span class="line">      form.appendChild(input);</span><br><span class="line">      form.style.display = <span class="string">&#x27;none&#x27;</span>;</span><br><span class="line">      span.style.display = <span class="string">&#x27;inline-block&#x27;</span>;</span><br><span class="line">      input.style.width = span.clientWidth + <span class="string">&#x27;px&#x27;</span>;</span><br><span class="line"></span><br><span class="line">      <span class="built_in">this</span>.setAttribute(<span class="string">&#x27;tabindex&#x27;</span>, <span class="string">&#x27;0&#x27;</span>);</span><br><span class="line">      input.setAttribute(<span class="string">&#x27;required&#x27;</span>, <span class="string">&#x27;required&#x27;</span>);</span><br><span class="line">      <span class="built_in">this</span>.style.display = <span class="string">&#x27;inline-block&#x27;</span>;</span><br><span class="line"></span><br><span class="line">      <span class="built_in">this</span>.addEventListener(<span class="string">&#x27;click&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">        span.style.display = <span class="string">&#x27;none&#x27;</span>;</span><br><span class="line">        form.style.display = <span class="string">&#x27;inline-block&#x27;</span>;</span><br><span class="line">        input.focus();</span><br><span class="line">        input.setSelectionRange(<span class="number">0</span>, input.value.length);</span><br><span class="line">      &#125;);</span><br><span class="line"></span><br><span class="line">      form.addEventListener(<span class="string">&#x27;submit&#x27;</span>, <span class="function">(<span class="params">e</span>) =&gt;</span> &#123;</span><br><span class="line">        updateDisplay();</span><br><span class="line">        e.preventDefault();</span><br><span class="line">      &#125;);</span><br><span class="line"></span><br><span class="line">      input.addEventListener(<span class="string">&#x27;blur&#x27;</span>, updateDisplay);</span><br><span class="line"></span><br><span class="line">      <span class="function"><span class="keyword">function</span> <span class="title">updateDisplay</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        span.style.display = <span class="string">&#x27;inline-block&#x27;</span>;</span><br><span class="line">        form.style.display = <span class="string">&#x27;none&#x27;</span>;</span><br><span class="line">        span.textContent = input.value;</span><br><span class="line">        input.style.width = span.clientWidth + <span class="string">&#x27;px&#x27;</span>;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">);</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><a name="raGGc"></a></p>
<h3 id="HTML"><a href="#HTML" class="headerlink" title="HTML"></a>HTML</h3><p>忘记在哪里看到的段子</p>
<p>:::info<br>Q: 请问有什么同时支持 Angular, React, Vue 的 UI 组件库吗？<br />A:  HTML<br>:::</p>
<p>文章的最后，想以 <code>HTML</code> 这个 “新” 东西结尾，想必大家学习前端，都是从 <code>HTML</code> 超文本标记语言这个 <code>简单</code>的东西入门，前端发展至今，HTML 也变化了很多，丰富的控件能力，丰富的特性</p>
<br />

<p><img src="/images/2023-12-22-1f3c50f2656e3c24a3b0645d347749987a4537038587d7be2cdfe52fcae57da5.png" alt="图 14"></p>
<br />

<p><img src="/images/2023-12-22-076732b6ce694b1d0fd89126abc22987955c4747266773beb2f3baf7354fb4e4.png" alt="图 15"></p>
<p><br />光是 <code>input</code>就有这么多种</p>
<p><a name="bShcy"></a></p>
<h3 id="推荐网站"><a href="#推荐网站" class="headerlink" title="推荐网站"></a>推荐网站</h3><p><a target="_blank" rel="noopener" href="https://developer.mozilla.org/en-US/">MDN</a>: 不多说，web 百科全书<br /><a target="_blank" rel="noopener" href="https://web.dev/">web.dev</a>: Google 官网的 web 学习网站，干货很多<br /><a target="_blank" rel="noopener" href="https://www.zhangxinxu.com/wordpress/">张鑫旭博客</a>: 不局限与 CSS , 虽然文风很尬，干货很多</p>
</div><div class="post-footer"><div class="meta"><div class="info"><i class="fa fa-sun-o"></i><span class="date">2021-06-03</span><i class="fa fa-comment-o"></i><a href="/2021/06/03/web-%E5%89%8D%E7%AB%AF%E4%B8%AD%E7%9A%84%E9%82%A3%E4%BA%9B-%E6%96%B0%E4%B8%9C%E8%A5%BF/#comments">评论</a><i class="fa fa-tag"></i><a class="tag" href="/tags/web-javascript/" title="web, javascript">web, javascript </a></div></div></div></div><div style="margin:30px"><span class="leancloud-visitors" id="/2021/06/03/web-前端中的那些-新东西/"><span class="post-meta-item-text" style="margin-right:5px">阅读量</span><i class="leancloud-visitors-count">-</i></span></div><div class="share"><div class="evernote"><a class="fa fa-bookmark" href="javascript:(function(){EN_CLIP_HOST='http://www.evernote.com';try{var%20x=document.createElement('SCRIPT');x.type='text/javascript';x.src=EN_CLIP_HOST+'/public/bookmarkClipper.js?'+(new%20Date().getTime()/100000);document.getElementsByTagName('head')[0].appendChild(x);}catch(e){location.href=EN_CLIP_HOST+'/clip.action?url='+encodeURIComponent(location.href)+'&amp;title='+encodeURIComponent(document.title);}})();" ref="nofollow" target="_blank"></a></div><div class="weibo"><a class="fa fa-weibo" href="javascript:void((function(s,d,e){try{}catch(e){}var f='http://service.weibo.com/share/share.php?',u=d.location.href,p=['url=',e(u),'&amp;title=',e(d.title),'&amp;appkey=2924220432'].join('');function a(){if(!window.open([f,p].join(''),'mb',['toolbar=0,status=0,resizable=1,width=620,height=450,left=',(s.width-620)/2,',top=',(s.height-450)/2].join('')))u.href=[f,p].join('');};if(/Firefox/.test(navigator.userAgent)){setTimeout(a,0)}else{a()}})(screen,document,encodeURIComponent));"></a></div><div class="twitter"><a class="fa fa-twitter" target="_blank" rel="noopener" href="http://twitter.com/home?status=,https://www.lijinke.cn/2021/06/03/web-前端中的那些-新东西/,李金珂的小屋,web 前端中的那些&quot;新东西&quot;,;"></a></div></div><div class="pagination"><ul class="clearfix"><li class="pre pagbuttons"><a class="btn" role="navigation" href="/2022/03/30/%E4%BD%A0%E4%B8%8D%E7%9F%A5%E9%81%93%E7%9A%84-Canvas-%E8%A1%A8%E6%A0%BC%E4%BA%A4%E4%BA%92/" title="你不知道的 Canvas 表格交互">上一篇</a></li><li class="next pagbuttons"><a class="btn" role="navigation" href="/2021/04/19/%E5%86%99%E4%B8%80%E4%B8%AA-Github-Action/" title="写一个 Github Action">下一篇</a></li></ul></div><a id="comments"></a><div id="vcomments" style="margin:0 30px;"></div><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="//unpkg.com/valine/dist/Valine.min.js?v=undefined"></script><script>var valine = new Valine({
  el:'#vcomments',
  //- notify: || false,
  //- verify:|| false,
  notify: true,
  verify: true,
  enableQQ: true,
  recordIP: true,
  app_id:'RBh7EcHesd4twgP5qIos38HM-gzGzoHsz',
  app_key:'f47a9Cg5ea9EVoPSs4KqfE6U',
  placeholder:'留下点什么?',
  path: window.location.pathname,
  avatar:'robohash',
  visitor: true,
})</script></div></div></div></div><script src="/js/jquery.js"></script><script src="/js/jquery-migrate-1.2.1.min.js"></script><script src="/js/jquery.appear.js"></script><script src="https://unpkg.com/darkreader@4.9.32/darkreader.js"></script><script src="/pwa.js"></script><script src="/main.js"></script></body></html>